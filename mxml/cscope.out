cscope 15 $HOME/123/xml/release-2.7 -q 0000000578 0000220027
	@/home/gaojing/123/xml/release-2.7/config.h

22 
	~<°dio.h
>

23 
	~<°dlib.h
>

24 
	~<°rög.h
>

25 
	~<°d¨g.h
>

26 
	~<˘y≥.h
>

33 
	#MXML_VERSION
 "Möi-XML v2.7"

	)

40 
	#ölöe


	)

47 
	#HAVE_LONG_LONG
 1

	)

54 
	#HAVE_SNPRINTF
 1

	)

55 
	#HAVE_VSNPRINTF
 1

	)

62 
	#HAVE_STRDUP
 1

	)

69 
	#HAVE_PTHREAD_H
 1

	)

76 #i‚de‡
HAVE_STRDUP


77 *
_mxml_°rdup
(const *);

78 
	#°rdup
 
_mxml_°rdup


	)

81 *
_mxml_°rdupf
(const *, ...);

82 *
_mxml_v°rdupf
(c⁄° *, 
va_li°
);

84 #i‚de‡
HAVE_SNPRINTF


85 
_mxml_¢¥ötf
(*, 
size_t
, const *, ...);

86 
	#¢¥ötf
 
_mxml_¢¥ötf


	)

89 #i‚de‡
HAVE_VSNPRINTF


90 
_mxml_v¢¥ötf
(*, 
size_t
, c⁄° *, 
va_li°
);

91 
	#v¢¥ötf
 
_mxml_v¢¥ötf


	)

	@/home/gaojing/123/xml/release-2.7/mvalidate.c

25 
	~"c⁄fig.h
"

26 
	~"mxml.h
"

34 
	$maö
(
¨gc
,

35 *
¨gv
[])

38 
	}
}

	@/home/gaojing/123/xml/release-2.7/mxml-attr.c

29 
	~"c⁄fig.h
"

30 
	~"mxml.h
"

37 
mxml_£t_©å
(
mxml_node_t
 *
node
, c⁄° *
«me
,

38 *
vÆue
);

48 
	$mxmlEÀmítDñëeAâr
(
mxml_node_t
 *
node
,

49 c⁄° *
«me
)

51 
i
;

52 
mxml_©å_t
 *
©å
;

55 #ifde‡
DEBUG


56 
	`Ârötf
(
°dîr
, "mxmlElementDeleteAttr(node=%p,Çame=\"%s\")\n",

57 
node
, 
«me
 ?Çame : "(null)");

64 i‡(!
node
 ||Çode->
ty≥
 !
MXML_ELEMENT
 || !
«me
)

71 
i
 = 
node
->
vÆue
.
ñemít
.
num_©ås
, 
©å
 =Çode->vÆue.ñemít.
©ås
;

72 
i
 > 0;

73 
i
 --, 
©å
 ++)

75 #ifde‡
DEBUG


76 
	`¥ötf
(" %s=\"%s\"\n", 
©å
->
«me
,áâr->
vÆue
);

79 i‡(!
	`°rcmp
(
©å
->
«me
,Çame))

85 
	`‰ì
(
©å
->
«me
);

86 
	`‰ì
(
©å
->
vÆue
);

88 
i
 --;

89 i‡(
i
 > 0)

90 
	`memmove
(
©å
,áâ∏+ 1, 
i
 * (
mxml_©å_t
));

92 
node
->
vÆue
.
ñemít
.
num_©ås
 --;

96 
	}
}

107 
	$mxmlEÀmítGëAâr
(
mxml_node_t
 *
node
,

108 c⁄° *
«me
)

110 
i
;

111 
mxml_©å_t
 *
©å
;

114 #ifde‡
DEBUG


115 
	`Ârötf
(
°dîr
, "mxmlElementGetAttr(node=%p,Çame=\"%s\")\n",

116 
node
, 
«me
 ?Çame : "(null)");

123 i‡(!
node
 ||Çode->
ty≥
 !
MXML_ELEMENT
 || !
«me
)

124  (
NULL
);

130 
i
 = 
node
->
vÆue
.
ñemít
.
num_©ås
, 
©å
 =Çode->vÆue.ñemít.
©ås
;

131 
i
 > 0;

132 
i
 --, 
©å
 ++)

134 #ifde‡
DEBUG


135 
	`¥ötf
(" %s=\"%s\"\n", 
©å
->
«me
,áâr->
vÆue
);

138 i‡(!
	`°rcmp
(
©å
->
«me
,Çame))

140 #ifde‡
DEBUG


141 
	`¥ötf
(" Rëu∫ög \"%s\"!\n", 
©å
->
vÆue
);

143  (
©å
->
vÆue
);

151 #ifde‡
DEBUG


152 
	`puts
(" Returning NULL!\n");

155  (
NULL
);

156 
	}
}

169 
	$mxmlEÀmítSëAâr
(
mxml_node_t
 *
node
,

170 c⁄° *
«me
,

171 c⁄° *
vÆue
)

173 *
vÆuec
;

176 #ifde‡
DEBUG


177 
	`Ârötf
(
°dîr
, "mxmlElementSetAttr(node=%p,Çame=\"%s\", value=\"%s\")\n",

178 
node
, 
«me
 ?Çamê: "“uŒ)", 
vÆue
 ? value : "(null)");

185 i‡(!
node
 ||Çode->
ty≥
 !
MXML_ELEMENT
 || !
«me
)

188 i‡(
vÆue
)

189 
vÆuec
 = 
	`°rdup
(
vÆue
);

191 
vÆuec
 = 
NULL
;

193 i‡(
	`mxml_£t_©å
(
node
, 
«me
, 
vÆuec
))

194 
	`‰ì
(
vÆuec
);

195 
	}
}

210 
	$mxmlEÀmítSëAârf
(
mxml_node_t
 *
node
,

211 c⁄° *
«me
,

212 c⁄° *
f‹m©
,

215 
va_li°
 
≠
;

216 *
vÆue
;

219 #ifde‡
DEBUG


220 
	`Ârötf
(
°dîr
,

222 
node
, 
«me
 ?Çamê: "“uŒ)", 
f‹m©
 ? format : "(null)");

229 i‡(!
node
 ||Çode->
ty≥
 !
MXML_ELEMENT
 || !
«me
 || !
f‹m©
)

236 
	`va_°¨t
(
≠
, 
f‹m©
);

237 
vÆue
 = 
	`_mxml_v°rdupf
(
f‹m©
, 
≠
);

238 
	`va_íd
(
≠
);

240 i‡(!
vÆue
)

241 
	`mxml_îr‹
("UnableÅoállocate memory foráttribute '%s' inÉlement %s!",

242 
«me
, 
node
->
vÆue
.
ñemít
.name);

243 i‡(
	`mxml_£t_©å
(
node
, 
«me
, 
vÆue
))

244 
	`‰ì
(
vÆue
);

245 
	}
}

253 
	$mxml_£t_©å
(
mxml_node_t
 *
node
,

254 c⁄° *
«me
,

255 *
vÆue
)

257 
i
;

258 
mxml_©å_t
 *
©å
;

265 
i
 = 
node
->
vÆue
.
ñemít
.
num_©ås
, 
©å
 =Çode->vÆue.ñemít.
©ås
;

266 
i
 > 0;

267 
i
 --, 
©å
 ++)

268 i‡(!
	`°rcmp
(
©å
->
«me
,Çame))

274 i‡(
©å
->
vÆue
)

275 
	`‰ì
(
©å
->
vÆue
);

277 
©å
->
vÆue
 = value;

286 i‡(
node
->
vÆue
.
ñemít
.
num_©ås
 == 0)

287 
©å
 = 
	`mÆloc
((
mxml_©å_t
));

289 
©å
 = 
	`ªÆloc
(
node
->
vÆue
.
ñemít
.
©ås
,

290 (
node
->
vÆue
.
ñemít
.
num_©ås
 + 1Ë* (
mxml_©å_t
));

292 i‡(!
©å
)

294 
	`mxml_îr‹
("UnableÅoállocate memory foráttribute '%s' inÉlement %s!",

295 
«me
, 
node
->
vÆue
.
ñemít
.name);

299 
node
->
vÆue
.
ñemít
.
©ås
 = 
©å
;

300 
©å
 +
node
->
vÆue
.
ñemít
.
num_©ås
;

302 i‡((
©å
->
«me
 = 
	`°rdup
“ame)Ë=
NULL
)

304 
	`mxml_îr‹
("UnableÅoállocate memory foráttribute '%s' inÉlement %s!",

305 
«me
, 
node
->
vÆue
.
ñemít
.name);

309 
©å
->
vÆue
 = value;

311 
node
->
vÆue
.
ñemít
.
num_©ås
 ++;

314 
	}
}

	@/home/gaojing/123/xml/release-2.7/mxml-entity.c

33 
	~"mxml-¥iv©e.h
"

41 
	$mxmlE¡ôyAddCÆlback
(

42 
mxml_ítôy_cb_t
 
cb
)

44 
_mxml_globÆ_t
 *
globÆ
 = 
	`_mxml_globÆ
();

48 i‡(
globÆ
->
num_ítôy_cbs
 < ()((globÆ->
ítôy_cbs
) / (global->entity_cbs[0])))

50 
globÆ
->
ítôy_cbs
[globÆ->
num_ítôy_cbs
] = 
cb
;

51 
globÆ
->
num_ítôy_cbs
 ++;

57 
	`mxml_îr‹
("UnableÅoáddÉntity callback!");

61 
	}
}

71 
	$mxmlE¡ôyGëName
(
vÆ
)

73 
vÆ
)

88  (
NULL
);

90 
	}
}

101 
	$mxmlE¡ôyGëVÆue
(c⁄° *
«me
)

103 
i
;

104 
ch
;

105 
_mxml_globÆ_t
 *
globÆ
 = 
	`_mxml_globÆ
();

109 
i
 = 0; i < 
globÆ
->
num_ítôy_cbs
; i ++)

110 i‡((
ch
 = (
globÆ
->
ítôy_cbs
[
i
])(
«me
)) >= 0)

111  (
ch
);

114 
	}
}

122 
	$mxmlE¡ôyRemoveCÆlback
(

123 
mxml_ítôy_cb_t
 
cb
)

125 
i
;

126 
_mxml_globÆ_t
 *
globÆ
 = 
	`_mxml_globÆ
();

130 
i
 = 0; i < 
globÆ
->
num_ítôy_cbs
; i ++)

131 i‡(
cb
 =
globÆ
->
ítôy_cbs
[
i
])

137 
globÆ
->
num_ítôy_cbs
 --;

139 i‡(
i
 < 
globÆ
->
num_ítôy_cbs
)

140 
	`memmove
(
globÆ
->
ítôy_cbs
 + 
i
, global->entity_cbs + i + 1,

141 (
globÆ
->
num_ítôy_cbs
 - 
i
Ë* (globÆ->
ítôy_cbs
[0]));

145 
	}
}

153 
	$_mxml_ítôy_cb
(c⁄° *
«me
)

155 
diff
,

156 
cuºít
,

157 
fú°
,

158 
œ°
;

161 c⁄° *
«me
;

162 
vÆ
;

163 } 
ítôõs
[] =

429 
fú°
 = 0;

430 
œ°
 = ()((
ítôõs
) / (entities[0]) - 1);

432 (
œ°
 - 
fú°
) > 1)

434 
cuºít
 = (
fú°
 + 
œ°
) / 2;

436 i‡((
diff
 = 
	`°rcmp
(
«me
, 
ítôõs
[
cuºít
].name)) == 0)

437  (
ítôõs
[
cuºít
].
vÆ
);

438 i‡(
diff
 < 0)

439 
œ°
 = 
cuºít
;

441 
fú°
 = 
cuºít
;

449 i‡(!
	`°rcmp
(
«me
, 
ítôõs
[
fú°
].name))

450  (
ítôõs
[
fú°
].
vÆ
);

451 i‡(!
	`°rcmp
(
«me
, 
ítôõs
[
œ°
].name))

452  (
ítôõs
[
œ°
].
vÆ
);

455 
	}
}

	@/home/gaojing/123/xml/release-2.7/mxml-file.c

56 #i‚de‡
WIN32


57 
	~<uni°d.h
>

59 
	~"mxml-¥iv©e.h
"

66 
	#ENCODE_UTF8
 0

	)

67 
	#ENCODE_UTF16BE
 1

	)

68 
	#ENCODE_UTF16LE
 2

	)

75 
	#mxml_bad_ch¨
(
ch
Ë((chË< ' ' && (chË!'\n' && (chË!'\r' && (chË!'\t')

	)

82 (*
	t_mxml_gëc_cb_t
)(*, *);

83 (*
	t_mxml_putc_cb_t
)(, *);

85 
_mxml_fdbuf_s


87 
fd
;

88 *
cuºít
,

89 *
íd
,

90 
buf„r
[8192];

91 
	}
} 
	t_mxml_fdbuf_t
;

98 
mxml_add_ch¨
(
ch
, **
±r
, **
buf„r
,

99 *
bufsize
);

100 
mxml_fd_gëc
(*
p
, *
ícodög
);

101 
mxml_fd_putc
(
ch
, *
p
);

102 
mxml_fd_ªad
(
_mxml_fdbuf_t
 *
buf
);

103 
mxml_fd_wrôe
(
_mxml_fdbuf_t
 *
buf
);

104 
mxml_fûe_gëc
(*
p
, *
ícodög
);

105 
mxml_fûe_putc
(
ch
, *
p
);

106 
mxml_gë_ítôy
(
mxml_node_t
 *
∑ª¡
, *
p
,

107 *
ícodög
,

108 
_mxml_gëc_cb_t
 
gëc_cb
);

109 
ölöe
 
	$mxml_is•a˚
(
ch
)

111  (
ch
 == ' ' || ch == '\t' || ch == '\r' ||

112 
ch
 == '\n');

113 
	}
}

114 
mxml_node_t
 *
mxml_lﬂd_d©a
(mxml_node_à*
t›
, *
p
,

115 
mxml_lﬂd_cb_t
 
cb
,

116 
_mxml_gëc_cb_t
 
gëc_cb
,

117 
mxml_ßx_cb_t
 
ßx_cb
, *
ßx_d©a
);

118 
mxml_∑r£_ñemít
(
mxml_node_t
 *
node
, *
p
,

119 *
ícodög
,

120 
_mxml_gëc_cb_t
 
gëc_cb
);

121 
mxml_°rög_gëc
(*
p
, *
ícodög
);

122 
mxml_°rög_putc
(
ch
, *
p
);

123 
mxml_wrôe_«me
(c⁄° *
s
, *
p
,

124 
_mxml_putc_cb_t
 
putc_cb
);

125 
mxml_wrôe_node
(
mxml_node_t
 *
node
, *
p
,

126 
mxml_ßve_cb_t
 
cb
, 
cﬁ
,

127 
_mxml_putc_cb_t
 
putc_cb
,

128 
_mxml_globÆ_t
 *
globÆ
);

129 
mxml_wrôe_°rög
(c⁄° *
s
, *
p
,

130 
_mxml_putc_cb_t
 
putc_cb
);

131 
mxml_wrôe_ws
(
mxml_node_t
 *
node
, *
p
,

132 
mxml_ßve_cb_t
 
cb
, 
ws
,

133 
cﬁ
, 
_mxml_putc_cb_t
 
putc_cb
);

151 
mxml_node_t
 *

152 
	$mxmlLﬂdFd
(
mxml_node_t
 *
t›
,

153 
fd
,

154 
mxml_lﬂd_cb_t
 
cb
)

156 
_mxml_fdbuf_t
 
buf
;

163 
buf
.
fd
 = fd;

164 
buf
.
cuºít
 = buf.
buf„r
;

165 
buf
.
íd
 = buf.
buf„r
;

171  (
	`mxml_lﬂd_d©a
(
t›
, &
buf
, 
cb
, 
mxml_fd_gëc
, 
MXML_NO_CALLBACK
, 
NULL
));

172 
	}
}

190 
mxml_node_t
 *

191 
	$mxmlLﬂdFûe
(
mxml_node_t
 *
t›
,

192 
FILE
 *
Â
,

193 
mxml_lﬂd_cb_t
 
cb
)

199  (
	`mxml_lﬂd_d©a
(
t›
, 
Â
, 
cb
, 
mxml_fûe_gëc
, 
MXML_NO_CALLBACK
, 
NULL
));

200 
	}
}

218 
mxml_node_t
 *

219 
	$mxmlLﬂdSåög
(
mxml_node_t
 *
t›
,

220 c⁄° *
s
,

221 
mxml_lﬂd_cb_t
 
cb
)

227  (
	`mxml_lﬂd_d©a
(
t›
, (*)&
s
, 
cb
, 
mxml_°rög_gëc
, 
MXML_NO_CALLBACK
,

228 
NULL
));

229 
	}
}

249 
	$mxmlSaveAŒocSåög
(

250 
mxml_node_t
 *
node
,

251 
mxml_ßve_cb_t
 
cb
)

253 
byãs
;

254 
buf„r
[8192];

255 *
s
;

262 
byãs
 = 
	`mxmlSaveSåög
(
node
, 
buf„r
, (buf„r), 
cb
);

264 i‡(
byãs
 <= 0)

265  (
NULL
);

267 i‡(
byãs
 < ()((
buf„r
) - 1))

274  (
	`°rdup
(
buf„r
));

282 i‡((
s
 = 
	`mÆloc
(
byãs
 + 1)Ë=
NULL
)

283  (
NULL
);

285 
	`mxmlSaveSåög
(
node
, 
s
, 
byãs
 + 1, 
cb
);

291  (
s
);

292 
	}
}

306 
	$mxmlSaveFd
(
mxml_node_t
 *
node
,

307 
fd
,

308 
mxml_ßve_cb_t
 
cb
)

310 
cﬁ
;

311 
_mxml_fdbuf_t
 
buf
;

312 
_mxml_globÆ_t
 *
globÆ
 = 
	`_mxml_globÆ
();

320 
buf
.
fd
 = fd;

321 
buf
.
cuºít
 = buf.
buf„r
;

322 
buf
.
íd
 = buf.
buf„r
 + (buf.buffer);

328 i‡((
cﬁ
 = 
	`mxml_wrôe_node
(
node
, &
buf
, 
cb
, 0, 
mxml_fd_putc
, 
globÆ
)) < 0)

331 i‡(
cﬁ
 > 0)

332 i‡(
	`mxml_fd_putc
('\n', &
buf
) < 0)

339  (
	`mxml_fd_wrôe
(&
buf
));

340 
	}
}

354 
	$mxmlSaveFûe
(
mxml_node_t
 *
node
,

355 
FILE
 *
Â
,

356 
mxml_ßve_cb_t
 
cb
)

358 
cﬁ
;

359 
_mxml_globÆ_t
 *
globÆ
 = 
	`_mxml_globÆ
();

367 i‡((
cﬁ
 = 
	`mxml_wrôe_node
(
node
, 
Â
, 
cb
, 0, 
mxml_fûe_putc
, 
globÆ
)) < 0)

370 i‡(
cﬁ
 > 0)

371 i‡(
	`putc
('\n', 
Â
) < 0)

379 
	}
}

397 
	$mxmlSaveSåög
(
mxml_node_t
 *
node
,

398 *
buf„r
,

399 
bufsize
,

400 
mxml_ßve_cb_t
 
cb
)

402 
cﬁ
;

403 *
±r
[2];

404 
_mxml_globÆ_t
 *
globÆ
 = 
	`_mxml_globÆ
();

412 
±r
[0] = 
buf„r
;

413 
±r
[1] = 
buf„r
 + 
bufsize
;

415 i‡((
cﬁ
 = 
	`mxml_wrôe_node
(
node
, 
±r
, 
cb
, 0, 
mxml_°rög_putc
, 
globÆ
)) < 0)

418 i‡(
cﬁ
 > 0)

419 
	`mxml_°rög_putc
('\n', 
±r
);

425 i‡(
±r
[0] >=Ötr[1])

426 
buf„r
[
bufsize
 - 1] = '\0';

428 
±r
[0][0] = '\0';

434  (
±r
[0] - 
buf„r
);

435 
	}
}

460 
mxml_node_t
 *

461 
	$mxmlSAXLﬂdFd
(
mxml_node_t
 *
t›
,

462 
fd
,

463 
mxml_lﬂd_cb_t
 
cb
,

464 
mxml_ßx_cb_t
 
ßx_cb
,

465 *
ßx_d©a
)

467 
_mxml_fdbuf_t
 
buf
;

474 
buf
.
fd
 = fd;

475 
buf
.
cuºít
 = buf.
buf„r
;

476 
buf
.
íd
 = buf.
buf„r
;

482  (
	`mxml_lﬂd_d©a
(
t›
, &
buf
, 
cb
, 
mxml_fd_gëc
, 
ßx_cb
, 
ßx_d©a
));

483 
	}
}

508 
mxml_node_t
 *

509 
	$mxmlSAXLﬂdFûe
(

510 
mxml_node_t
 *
t›
,

511 
FILE
 *
Â
,

512 
mxml_lﬂd_cb_t
 
cb
,

513 
mxml_ßx_cb_t
 
ßx_cb
,

514 *
ßx_d©a
)

520  (
	`mxml_lﬂd_d©a
(
t›
, 
Â
, 
cb
, 
mxml_fûe_gëc
, 
ßx_cb
, 
ßx_d©a
));

521 
	}
}

546 
mxml_node_t
 *

547 
	$mxmlSAXLﬂdSåög
(

548 
mxml_node_t
 *
t›
,

549 c⁄° *
s
,

550 
mxml_lﬂd_cb_t
 
cb
,

551 
mxml_ßx_cb_t
 
ßx_cb
,

552 *
ßx_d©a
)

558  (
	`mxml_lﬂd_d©a
(
t›
, (*)&
s
, 
cb
, 
mxml_°rög_gëc
, 
ßx_cb
, 
ßx_d©a
));

559 
	}
}

574 
	$mxmlSëCu°omH™dÀrs
(

575 
mxml_cu°om_lﬂd_cb_t
 
lﬂd
,

576 
mxml_cu°om_ßve_cb_t
 
ßve
)

578 
_mxml_globÆ_t
 *
globÆ
 = 
	`_mxml_globÆ
();

582 
globÆ
->
cu°om_lﬂd_cb
 = 
lﬂd
;

583 
globÆ
->
cu°om_ßve_cb
 = 
ßve
;

584 
	}
}

592 
	$mxmlSëEº‹CÆlback
(
mxml_îr‹_cb_t
 
cb
)

594 
_mxml_globÆ_t
 *
globÆ
 = 
	`_mxml_globÆ
();

598 
globÆ
->
îr‹_cb
 = 
cb
;

599 
	}
}

611 
	$mxmlSëWøpM¨gö
(
cﬁumn
)

613 
_mxml_globÆ_t
 *
globÆ
 = 
	`_mxml_globÆ
();

617 
globÆ
->
wøp
 = 
cﬁumn
;

618 
	}
}

626 
	$mxml_add_ch¨
(
ch
,

627 **
buÂå
,

628 **
buf„r
,

629 *
bufsize
)

631 *
√wbuf„r
;

634 i‡(*
buÂå
 >(*
buf„r
 + *
bufsize
 - 4))

640 i‡(*
bufsize
 < 1024)

641 (*
bufsize
) *= 2;

643 (*
bufsize
) += 1024;

645 i‡((
√wbuf„r
 = 
	`ªÆloc
(*
buf„r
, *
bufsize
)Ë=
NULL
)

647 
	`‰ì
(*
buf„r
);

649 
	`mxml_îr‹
("U«bÀÅÿex∑nd såög buf„∏tÿ%d byãs!", *
bufsize
);

654 *
buÂå
 = 
√wbuf„r
 + (*buÂå - *
buf„r
);

655 *
buf„r
 = 
√wbuf„r
;

658 i‡(
ch
 < 0x80)

664 *(*
buÂå
)++ = 
ch
;

666 i‡(
ch
 < 0x800)

672 *(*
buÂå
)++ = 0xc0 | (
ch
 >> 6);

673 *(*
buÂå
)++ = 0x80 | (
ch
 & 0x3f);

675 i‡(
ch
 < 0x10000)

681 *(*
buÂå
)++ = 0xe0 | (
ch
 >> 12);

682 *(*
buÂå
)++ = 0x80 | ((
ch
 >> 6) & 0x3f);

683 *(*
buÂå
)++ = 0x80 | (
ch
 & 0x3f);

691 *(*
buÂå
)++ = 0xf0 | (
ch
 >> 18);

692 *(*
buÂå
)++ = 0x80 | ((
ch
 >> 12) & 0x3f);

693 *(*
buÂå
)++ = 0x80 | ((
ch
 >> 6) & 0x3f);

694 *(*
buÂå
)++ = 0x80 | (
ch
 & 0x3f);

698 
	}
}

706 
	$mxml_fd_gëc
(*
p
,

707 *
ícodög
)

709 
_mxml_fdbuf_t
 *
buf
;

710 
ch
,

711 
ãmp
;

718 
buf
 = (
_mxml_fdbuf_t
 *)
p
;

720 i‡(
buf
->
cuºít
 >buf->
íd
)

721 i‡(
	`mxml_fd_ªad
(
buf
) < 0)

722  (
EOF
);

724 
ch
 = *(
buf
->
cuºít
)++;

726 *
ícodög
)

728 
ENCODE_UTF8
 :

733 i‡(!(
ch
 & 0x80))

735 #i‡
DEBUG
 > 1

736 
	`¥ötf
("mxml_fd_gëc: %¯(0x%04x)\n", 
ch
 < ' ' ? '.' : ch, ch);

739 i‡(
	`mxml_bad_ch¨
(
ch
))

741 
	`mxml_îr‹
("Bad control character 0x%02xÇotállowed by XML standard!",

742 
ch
);

743  (
EOF
);

746  (
ch
);

748 i‡(
ch
 == 0xfe)

754 i‡(
buf
->
cuºít
 >buf->
íd
)

755 i‡(
	`mxml_fd_ªad
(
buf
) < 0)

756  (
EOF
);

758 
ch
 = *(
buf
->
cuºít
)++;

760 i‡(
ch
 != 0xff)

761  (
EOF
);

763 *
ícodög
 = 
ENCODE_UTF16BE
;

765  (
	`mxml_fd_gëc
(
p
, 
ícodög
));

767 i‡(
ch
 == 0xff)

773 i‡(
buf
->
cuºít
 >buf->
íd
)

774 i‡(
	`mxml_fd_ªad
(
buf
) < 0)

775  (
EOF
);

777 
ch
 = *(
buf
->
cuºít
)++;

779 i‡(
ch
 != 0xfe)

780  (
EOF
);

782 *
ícodög
 = 
ENCODE_UTF16LE
;

784  (
	`mxml_fd_gëc
(
p
, 
ícodög
));

786 i‡((
ch
 & 0xe0) == 0xc0)

792 i‡(
buf
->
cuºít
 >buf->
íd
)

793 i‡(
	`mxml_fd_ªad
(
buf
) < 0)

794  (
EOF
);

796 
ãmp
 = *(
buf
->
cuºít
)++;

798 i‡((
ãmp
 & 0xc0) != 0x80)

799  (
EOF
);

801 
ch
 = ((ch & 0x1fË<< 6Ë| (
ãmp
 & 0x3f);

803 i‡(
ch
 < 0x80)

805 
	`mxml_îr‹
("InvÆid UTF-8 sequí˚ f‹ ch¨a˘î 0x%04x!", 
ch
);

806  (
EOF
);

809 i‡((
ch
 & 0xf0) == 0xe0)

815 i‡(
buf
->
cuºít
 >buf->
íd
)

816 i‡(
	`mxml_fd_ªad
(
buf
) < 0)

817  (
EOF
);

819 
ãmp
 = *(
buf
->
cuºít
)++;

821 i‡((
ãmp
 & 0xc0) != 0x80)

822  (
EOF
);

824 
ch
 = ((ch & 0x0fË<< 6Ë| (
ãmp
 & 0x3f);

826 i‡(
buf
->
cuºít
 >buf->
íd
)

827 i‡(
	`mxml_fd_ªad
(
buf
) < 0)

828  (
EOF
);

830 
ãmp
 = *(
buf
->
cuºít
)++;

832 i‡((
ãmp
 & 0xc0) != 0x80)

833  (
EOF
);

835 
ch
 = (ch << 6Ë| (
ãmp
 & 0x3f);

837 i‡(
ch
 < 0x800)

839 
	`mxml_îr‹
("InvÆid UTF-8 sequí˚ f‹ ch¨a˘î 0x%04x!", 
ch
);

840  (
EOF
);

847 i‡(
ch
 == 0xfeff)

848  (
	`mxml_fd_gëc
(
p
, 
ícodög
));

850 i‡((
ch
 & 0xf8) == 0xf0)

856 i‡(
buf
->
cuºít
 >buf->
íd
)

857 i‡(
	`mxml_fd_ªad
(
buf
) < 0)

858  (
EOF
);

860 
ãmp
 = *(
buf
->
cuºít
)++;

862 i‡((
ãmp
 & 0xc0) != 0x80)

863  (
EOF
);

865 
ch
 = ((ch & 0x07Ë<< 6Ë| (
ãmp
 & 0x3f);

867 i‡(
buf
->
cuºít
 >buf->
íd
)

868 i‡(
	`mxml_fd_ªad
(
buf
) < 0)

869  (
EOF
);

871 
ãmp
 = *(
buf
->
cuºít
)++;

873 i‡((
ãmp
 & 0xc0) != 0x80)

874  (
EOF
);

876 
ch
 = (ch << 6Ë| (
ãmp
 & 0x3f);

878 i‡(
buf
->
cuºít
 >buf->
íd
)

879 i‡(
	`mxml_fd_ªad
(
buf
) < 0)

880  (
EOF
);

882 
ãmp
 = *(
buf
->
cuºít
)++;

884 i‡((
ãmp
 & 0xc0) != 0x80)

885  (
EOF
);

887 
ch
 = (ch << 6Ë| (
ãmp
 & 0x3f);

889 i‡(
ch
 < 0x10000)

891 
	`mxml_îr‹
("InvÆid UTF-8 sequí˚ f‹ ch¨a˘î 0x%04x!", 
ch
);

892  (
EOF
);

896  (
EOF
);

899 
ENCODE_UTF16BE
 :

904 i‡(
buf
->
cuºít
 >buf->
íd
)

905 i‡(
	`mxml_fd_ªad
(
buf
) < 0)

906  (
EOF
);

908 
ãmp
 = *(
buf
->
cuºít
)++;

910 
ch
 = (ch << 8Ë| 
ãmp
;

912 i‡(
	`mxml_bad_ch¨
(
ch
))

914 
	`mxml_îr‹
("Bad control character 0x%02xÇotállowed by XML standard!",

915 
ch
);

916  (
EOF
);

918 i‡(
ch
 >= 0xd800 && ch <= 0xdbff)

924 
lch
;

926 i‡(
buf
->
cuºít
 >buf->
íd
)

927 i‡(
	`mxml_fd_ªad
(
buf
) < 0)

928  (
EOF
);

930 
lch
 = *(
buf
->
cuºít
)++;

932 i‡(
buf
->
cuºít
 >buf->
íd
)

933 i‡(
	`mxml_fd_ªad
(
buf
) < 0)

934  (
EOF
);

936 
ãmp
 = *(
buf
->
cuºít
)++;

938 
lch
 = (lch << 8Ë| 
ãmp
;

940 i‡(
lch
 < 0xdc00 ||Üch >= 0xdfff)

941  (
EOF
);

943 
ch
 = (((ch & 0x3ffË<< 10Ë| (
lch
 & 0x3ff)) + 0x10000;

947 
ENCODE_UTF16LE
 :

952 i‡(
buf
->
cuºít
 >buf->
íd
)

953 i‡(
	`mxml_fd_ªad
(
buf
) < 0)

954  (
EOF
);

956 
ãmp
 = *(
buf
->
cuºít
)++;

958 
ch
 |(
ãmp
 << 8);

960 i‡(
	`mxml_bad_ch¨
(
ch
))

962 
	`mxml_îr‹
("Bad control character 0x%02xÇotállowed by XML standard!",

963 
ch
);

964  (
EOF
);

966 i‡(
ch
 >= 0xd800 && ch <= 0xdbff)

972 
lch
;

974 i‡(
buf
->
cuºít
 >buf->
íd
)

975 i‡(
	`mxml_fd_ªad
(
buf
) < 0)

976  (
EOF
);

978 
lch
 = *(
buf
->
cuºít
)++;

980 i‡(
buf
->
cuºít
 >buf->
íd
)

981 i‡(
	`mxml_fd_ªad
(
buf
) < 0)

982  (
EOF
);

984 
ãmp
 = *(
buf
->
cuºít
)++;

986 
lch
 |(
ãmp
 << 8);

988 i‡(
lch
 < 0xdc00 ||Üch >= 0xdfff)

989  (
EOF
);

991 
ch
 = (((ch & 0x3ffË<< 10Ë| (
lch
 & 0x3ff)) + 0x10000;

996 #i‡
DEBUG
 > 1

997 
	`¥ötf
("mxml_fd_gëc: %¯(0x%04x)\n", 
ch
 < ' ' ? '.' : ch, ch);

1000  (
ch
);

1001 
	}
}

1009 
	$mxml_fd_putc
(
ch
,

1010 *
p
)

1012 
_mxml_fdbuf_t
 *
buf
;

1019 
buf
 = (
_mxml_fdbuf_t
 *)
p
;

1021 i‡(
buf
->
cuºít
 >buf->
íd
)

1022 i‡(
	`mxml_fd_wrôe
(
buf
) < 0)

1025 *(
buf
->
cuºít
)++ = 
ch
;

1032 
	}
}

1040 
	$mxml_fd_ªad
(
_mxml_fdbuf_t
 *
buf
)

1042 
byãs
;

1049 i‡(!
buf
)

1056 (
byãs
 = 
	`ªad
(
buf
->
fd
, buf->
buf„r
, (buf->buffer))) < 0)

1057 #ifde‡
EINTR


1058 i‡(
î∫o
 !
EAGAIN
 &&Éºnÿ!
EINTR
)

1060 i‡(
î∫o
 !
EAGAIN
)

1064 i‡(
byãs
 == 0)

1071 
buf
->
cuºít
 = buf->
buf„r
;

1072 
buf
->
íd
 = buf->
buf„r
 + 
byãs
;

1075 
	}
}

1083 
	$mxml_fd_wrôe
(
_mxml_fdbuf_t
 *
buf
)

1085 
byãs
;

1086 *
±r
;

1093 i‡(!
buf
)

1100 i‡(
buf
->
cuºít
 =buf->
buf„r
)

1107 
±r
 = 
buf
->
buf„r
;Öå < buf->
cuºít
;Öå +
byãs
)

1108 i‡((
byãs
 = 
	`wrôe
(
buf
->
fd
, 
±r
, buf->
cuºít
 -Ötr)) < 0)

1115 
buf
->
cuºít
 = buf->
buf„r
;

1118 
	}
}

1126 
	$mxml_fûe_gëc
(*
p
,

1127 *
ícodög
)

1129 
ch
,

1130 
ãmp
;

1131 
FILE
 *
Â
;

1138 
Â
 = (
FILE
 *)
p
;

1139 
ch
 = 
	`gëc
(
Â
);

1141 i‡(
ch
 =
EOF
)

1142  (
EOF
);

1144 *
ícodög
)

1146 
ENCODE_UTF8
 :

1151 i‡(!(
ch
 & 0x80))

1153 i‡(
	`mxml_bad_ch¨
(
ch
))

1155 
	`mxml_îr‹
("Bad control character 0x%02xÇotállowed by XML standard!",

1156 
ch
);

1157  (
EOF
);

1160 #i‡
DEBUG
 > 1

1161 
	`¥ötf
("mxml_fûe_gëc: %¯(0x%04x)\n", 
ch
 < ' ' ? '.' : ch, ch);

1164  (
ch
);

1166 i‡(
ch
 == 0xfe)

1172 
ch
 = 
	`gëc
(
Â
);

1173 i‡(
ch
 != 0xff)

1174  (
EOF
);

1176 *
ícodög
 = 
ENCODE_UTF16BE
;

1178  (
	`mxml_fûe_gëc
(
p
, 
ícodög
));

1180 i‡(
ch
 == 0xff)

1186 
ch
 = 
	`gëc
(
Â
);

1187 i‡(
ch
 != 0xfe)

1188  (
EOF
);

1190 *
ícodög
 = 
ENCODE_UTF16LE
;

1192  (
	`mxml_fûe_gëc
(
p
, 
ícodög
));

1194 i‡((
ch
 & 0xe0) == 0xc0)

1200 i‡((
ãmp
 = 
	`gëc
(
Â
)Ë=
EOF
 || (temp & 0xc0) != 0x80)

1201  (
EOF
);

1203 
ch
 = ((ch & 0x1fË<< 6Ë| (
ãmp
 & 0x3f);

1205 i‡(
ch
 < 0x80)

1207 
	`mxml_îr‹
("InvÆid UTF-8 sequí˚ f‹ ch¨a˘î 0x%04x!", 
ch
);

1208  (
EOF
);

1211 i‡((
ch
 & 0xf0) == 0xe0)

1217 i‡((
ãmp
 = 
	`gëc
(
Â
)Ë=
EOF
 || (temp & 0xc0) != 0x80)

1218  (
EOF
);

1220 
ch
 = ((ch & 0x0fË<< 6Ë| (
ãmp
 & 0x3f);

1222 i‡((
ãmp
 = 
	`gëc
(
Â
)Ë=
EOF
 || (temp & 0xc0) != 0x80)

1223  (
EOF
);

1225 
ch
 = (ch << 6Ë| (
ãmp
 & 0x3f);

1227 i‡(
ch
 < 0x800)

1229 
	`mxml_îr‹
("InvÆid UTF-8 sequí˚ f‹ ch¨a˘î 0x%04x!", 
ch
);

1230  (
EOF
);

1237 i‡(
ch
 == 0xfeff)

1238  (
	`mxml_fûe_gëc
(
p
, 
ícodög
));

1240 i‡((
ch
 & 0xf8) == 0xf0)

1246 i‡((
ãmp
 = 
	`gëc
(
Â
)Ë=
EOF
 || (temp & 0xc0) != 0x80)

1247  (
EOF
);

1249 
ch
 = ((ch & 0x07Ë<< 6Ë| (
ãmp
 & 0x3f);

1251 i‡((
ãmp
 = 
	`gëc
(
Â
)Ë=
EOF
 || (temp & 0xc0) != 0x80)

1252  (
EOF
);

1254 
ch
 = (ch << 6Ë| (
ãmp
 & 0x3f);

1256 i‡((
ãmp
 = 
	`gëc
(
Â
)Ë=
EOF
 || (temp & 0xc0) != 0x80)

1257  (
EOF
);

1259 
ch
 = (ch << 6Ë| (
ãmp
 & 0x3f);

1261 i‡(
ch
 < 0x10000)

1263 
	`mxml_îr‹
("InvÆid UTF-8 sequí˚ f‹ ch¨a˘î 0x%04x!", 
ch
);

1264  (
EOF
);

1268  (
EOF
);

1271 
ENCODE_UTF16BE
 :

1276 
ch
 = (ch << 8Ë| 
	`gëc
(
Â
);

1278 i‡(
	`mxml_bad_ch¨
(
ch
))

1280 
	`mxml_îr‹
("Bad control character 0x%02xÇotállowed by XML standard!",

1281 
ch
);

1282  (
EOF
);

1284 i‡(
ch
 >= 0xd800 && ch <= 0xdbff)

1290 
lch
 = (
	`gëc
(
Â
) << 8) | getc(fp);

1292 i‡(
lch
 < 0xdc00 ||Üch >= 0xdfff)

1293  (
EOF
);

1295 
ch
 = (((ch & 0x3ffË<< 10Ë| (
lch
 & 0x3ff)) + 0x10000;

1299 
ENCODE_UTF16LE
 :

1304 
ch
 |(
	`gëc
(
Â
) << 8);

1306 i‡(
	`mxml_bad_ch¨
(
ch
))

1308 
	`mxml_îr‹
("Bad control character 0x%02xÇotállowed by XML standard!",

1309 
ch
);

1310  (
EOF
);

1312 i‡(
ch
 >= 0xd800 && ch <= 0xdbff)

1318 
lch
 = 
	`gëc
(
Â
) | (getc(fp) << 8);

1320 i‡(
lch
 < 0xdc00 ||Üch >= 0xdfff)

1321  (
EOF
);

1323 
ch
 = (((ch & 0x3ffË<< 10Ë| (
lch
 & 0x3ff)) + 0x10000;

1328 #i‡
DEBUG
 > 1

1329 
	`¥ötf
("mxml_fûe_gëc: %¯(0x%04x)\n", 
ch
 < ' ' ? '.' : ch, ch);

1332  (
ch
);

1333 
	}
}

1341 
	$mxml_fûe_putc
(
ch
,

1342 *
p
)

1344  (
	`putc
(
ch
, (
FILE
 *)
p
Ë=
EOF
 ? -1 : 0);

1345 
	}
}

1353 
mxml_gë_ítôy
(
mxml_node_t
 *
∑ª¡
,

1354 *
p
,

1355 *
ícodög
,

1356 (*
gëc_cb
)(*, *))

1359 
ch
;

1360 
ítôy
[64],

1361 *
íçå
;

1364 
íçå
 = 
ítôy
;

1366 (
ch
 = (*
gëc_cb
)(
p
, 
ícodög
)Ë!
EOF
)

1367 i‡(
ch
 > 126 || (!
	`iß um
(ch) && ch != '#'))

1369 i‡(
íçå
 < (
ítôy
 + (entity) - 1))

1370 *
íçå
++ = 
ch
;

1373 
	`mxml_îr‹
("EntityÇameÅooÜong underÖarent <%s>!",

1374 
∑ª¡
 ?Ö¨ít->
vÆue
.
ñemít
.
«me
 : "null");

1378 *
íçå
 = '\0';

1380 i‡(
ch
 != ';')

1382 
	`mxml_îr‹
("CharacterÉntity \"%s\"ÇotÅerminated underÖarent <%s>!",

1383 
ítôy
, 
∑ª¡
 ?Ö¨ít->
vÆue
.
ñemít
.
«me
 : "null");

1384  (
EOF
);

1387 i‡(
ítôy
[0] == '#')

1389 i‡(
ítôy
[1] == 'x')

1390 
ch
 = 
	`°πﬁ
(
ítôy
 + 2, 
NULL
, 16);

1392 
ch
 = 
	`°πﬁ
(
ítôy
 + 1, 
NULL
, 10);

1394 i‡((
ch
 = 
	`mxmlE¡ôyGëVÆue
(
ítôy
)) < 0)

1395 
	`mxml_îr‹
("EntityÇame \"%s;\"Çot supported underÖarent <%s>!",

1396 
ítôy
, 
∑ª¡
 ?Ö¨ít->
vÆue
.
ñemít
.
«me
 : "null");

1398 i‡(
	`mxml_bad_ch¨
(
ch
))

1400 
	`mxml_îr‹
("Bad control character 0x%02x underÖarent <%s>Çotállowed by XML standard!",

1401 
ch
, 
∑ª¡
 ?Ö¨ít->
vÆue
.
ñemít
.
«me
 : "null");

1402  (
EOF
);

1405  (
ch
);

1406 
	}
}

1413 
mxml_node_t
 *

1414 
	$mxml_lﬂd_d©a
(

1415 
mxml_node_t
 *
t›
,

1416 *
p
,

1417 
mxml_lﬂd_cb_t
 
cb
,

1418 
_mxml_gëc_cb_t
 
gëc_cb
,

1419 
mxml_ßx_cb_t
 
ßx_cb
,

1420 *
ßx_d©a
)

1422 
mxml_node_t
 *
node
,

1423 *
fú°
,

1424 *
∑ª¡
;

1425 
ch
,

1426 
whôe•a˚
;

1427 *
buf„r
,

1428 *
buÂå
;

1429 
bufsize
;

1430 
mxml_ty≥_t
 
ty≥
;

1431 
ícodög
;

1432 
_mxml_globÆ_t
 *
globÆ
 = 
	`_mxml_globÆ
();

1434 c⁄° * c⁄° 
ty≥s
[] =

1449 i‡((
buf„r
 = 
	`mÆloc
(64)Ë=
NULL
)

1451 
	`mxml_îr‹
("UnableÅoállocate string buffer!");

1452  (
NULL
);

1455 
bufsize
 = 64;

1456 
buÂå
 = 
buf„r
;

1457 
∑ª¡
 = 
t›
;

1458 
fú°
 = 
NULL
;

1459 
whôe•a˚
 = 0;

1460 
ícodög
 = 
ENCODE_UTF8
;

1462 i‡(
cb
 && 
∑ª¡
)

1463 
ty≥
 = (*
cb
)(
∑ª¡
);

1465 
ty≥
 = 
MXML_TEXT
;

1467 (
ch
 = (*
gëc_cb
)(
p
, &
ícodög
)Ë!
EOF
)

1469 i‡((
ch
 == '<' ||

1470 (
	`mxml_is•a˚
(
ch
Ë&& 
ty≥
 !
MXML_OPAQUE
 &&Åy≥ !
MXML_CUSTOM
)) &&

1471 
buÂå
 > 
buf„r
)

1477 *
buÂå
 = '\0';

1479 
ty≥
)

1481 
MXML_INTEGER
 :

1482 
node
 = 
	`mxmlNewI¡egî
(
∑ª¡
, 
	`°πﬁ
(
buf„r
, &
buÂå
, 0));

1485 
MXML_OPAQUE
 :

1486 
node
 = 
	`mxmlNewO∑que
(
∑ª¡
, 
buf„r
);

1489 
MXML_REAL
 :

1490 
node
 = 
	`mxmlNewRól
(
∑ª¡
, 
	`°πod
(
buf„r
, &
buÂå
));

1493 
MXML_TEXT
 :

1494 
node
 = 
	`mxmlNewText
(
∑ª¡
, 
whôe•a˚
, 
buf„r
);

1497 
MXML_CUSTOM
 :

1498 i‡(
globÆ
->
cu°om_lﬂd_cb
)

1504 
node
 = 
	`mxmlNewCu°om
(
∑ª¡
, 
NULL
, NULL);

1506 i‡((*
globÆ
->
cu°om_lﬂd_cb
)(
node
, 
buf„r
))

1508 
	`mxml_îr‹
("Bad custom value '%s' inÖarent <%s>!",

1509 
buf„r
, 
∑ª¡
 ?Ö¨ít->
vÆue
.
ñemít
.
«me
 : "null");

1510 
	`mxmlDñëe
(
node
);

1511 
node
 = 
NULL
;

1517 
node
 = 
NULL
;

1521 i‡(*
buÂå
)

1527 
	`mxml_îr‹
("Bad %s value '%s' inÖarent <%s>!",

1528 
ty≥
 =
MXML_INTEGER
 ? "öãgî" : "ªÆ", 
buf„r
,

1529 
∑ª¡
 ?Ö¨ít->
vÆue
.
ñemít
.
«me
 : "null");

1533 
buÂå
 = 
buf„r
;

1534 
whôe•a˚
 = 
	`mxml_is•a˚
(
ch
Ë&& 
ty≥
 =
MXML_TEXT
;

1536 i‡(!
node
 && 
ty≥
 !
MXML_IGNORE
)

1542 
	`mxml_îr‹
("UnableÅoádd valueÇode ofÅype %sÅoÖarent <%s>!",

1543 
ty≥s
[
ty≥
], 
∑ª¡
 ?Ö¨ít->
vÆue
.
ñemít
.
«me
 : "null");

1544 
îr‹
;

1547 i‡(
ßx_cb
)

1549 (*
ßx_cb
)(
node
, 
MXML_SAX_DATA
, 
ßx_d©a
);

1551 i‡(!
	`mxmlRñó£
(
node
))

1552 
node
 = 
NULL
;

1555 i‡(!
fú°
 && 
node
)

1556 
fú°
 = 
node
;

1558 i‡(
	`mxml_is•a˚
(
ch
Ë&& 
ty≥
 =
MXML_TEXT
)

1559 
whôe•a˚
 = 1;

1566 i‡(
ch
 ='<' && 
whôe•a˚
 && 
ty≥
 =
MXML_TEXT
)

1568 i‡(
∑ª¡
)

1570 
node
 = 
	`mxmlNewText
(
∑ª¡
, 
whôe•a˚
, "");

1572 i‡(
ßx_cb
)

1574 (*
ßx_cb
)(
node
, 
MXML_SAX_DATA
, 
ßx_d©a
);

1576 i‡(!
	`mxmlRñó£
(
node
))

1577 
node
 = 
NULL
;

1580 i‡(!
fú°
 && 
node
)

1581 
fú°
 = 
node
;

1584 
whôe•a˚
 = 0;

1587 i‡(
ch
 == '<')

1593 
buÂå
 = 
buf„r
;

1595 (
ch
 = (*
gëc_cb
)(
p
, &
ícodög
)Ë!
EOF
)

1596 i‡(
	`mxml_is•a˚
(
ch
Ë|| ch ='>' || (ch ='/' && 
buÂå
 > 
buf„r
))

1598 i‡(
ch
 == '<')

1600 
	`mxml_îr‹
("Bare < inÉlement!");

1601 
îr‹
;

1603 i‡(
ch
 == '&')

1605 i‡((
ch
 = 
	`mxml_gë_ítôy
(
∑ª¡
, 
p
, &
ícodög
, 
gëc_cb
)Ë=
EOF
)

1606 
îr‹
;

1608 i‡(
	`mxml_add_ch¨
(
ch
, &
buÂå
, &
buf„r
, &
bufsize
))

1609 
îr‹
;

1611 i‡(
	`mxml_add_ch¨
(
ch
, &
buÂå
, &
buf„r
, &
bufsize
))

1612 
îr‹
;

1613 i‡(((
buÂå
 - 
buf„r
) == 1 && buffer[0] == '?') ||

1614 ((
buÂå
 - 
buf„r
Ë=3 && !
	`°∫cmp
(buffer, "!--", 3)) ||

1615 ((
buÂå
 - 
buf„r
Ë=8 && !
	`°∫cmp
(buffer, "![CDATA[", 8)))

1618 *
buÂå
 = '\0';

1620 i‡(!
	`°rcmp
(
buf„r
, "!--"))

1626 (
ch
 = (*
gëc_cb
)(
p
, &
ícodög
)Ë!
EOF
)

1628 i‡(
ch
 ='>' && 
buÂå
 > (
buf„r
 + 4) &&

1629 
buÂå
[-3] != '-' && bufptr[-2] == '-' && bufptr[-1] == '-')

1631 i‡(
	`mxml_add_ch¨
(
ch
, &
buÂå
, &
buf„r
, &
bufsize
))

1632 
îr‹
;

1639 i‡(
ch
 != '>')

1645 
	`mxml_îr‹
("Early EOF in commentÇode!");

1646 
îr‹
;

1654 *
buÂå
 = '\0';

1656 i‡(!
∑ª¡
 && 
fú°
)

1662 
	`mxml_îr‹
("<%s> cannot beá secondÑootÇodeáfter <%s>",

1663 
buf„r
, 
fú°
->
vÆue
.
ñemít
.
«me
);

1664 
îr‹
;

1667 i‡((
node
 = 
	`mxmlNewEÀmít
(
∑ª¡
, 
buf„r
)Ë=
NULL
)

1673 
	`mxml_îr‹
("UnableÅoádd commentÇodeÅoÖarent <%s>!",

1674 
∑ª¡
 ?Ö¨ít->
vÆue
.
ñemít
.
«me
 : "null");

1678 i‡(
ßx_cb
)

1680 (*
ßx_cb
)(
node
, 
MXML_SAX_COMMENT
, 
ßx_d©a
);

1682 i‡(!
	`mxmlRñó£
(
node
))

1683 
node
 = 
NULL
;

1686 i‡(
node
 && !
fú°
)

1687 
fú°
 = 
node
;

1689 i‡(!
	`°rcmp
(
buf„r
, "![CDATA["))

1695 (
ch
 = (*
gëc_cb
)(
p
, &
ícodög
)Ë!
EOF
)

1697 i‡(
ch
 ='>' && !
	`°∫cmp
(
buÂå
 - 2, "]]", 2))

1699 i‡(
	`mxml_add_ch¨
(
ch
, &
buÂå
, &
buf„r
, &
bufsize
))

1700 
îr‹
;

1707 i‡(
ch
 != '>')

1713 
	`mxml_îr‹
("Early EOF in CDATAÇode!");

1714 
îr‹
;

1722 *
buÂå
 = '\0';

1724 i‡(!
∑ª¡
 && 
fú°
)

1730 
	`mxml_îr‹
("<%s> cannot beá secondÑootÇodeáfter <%s>",

1731 
buf„r
, 
fú°
->
vÆue
.
ñemít
.
«me
);

1732 
îr‹
;

1735 i‡((
node
 = 
	`mxmlNewEÀmít
(
∑ª¡
, 
buf„r
)Ë=
NULL
)

1741 
	`mxml_îr‹
("UnableÅoádd CDATAÇodeÅoÖarent <%s>!",

1742 
∑ª¡
 ?Ö¨ít->
vÆue
.
ñemít
.
«me
 : "null");

1743 
îr‹
;

1746 i‡(
ßx_cb
)

1748 (*
ßx_cb
)(
node
, 
MXML_SAX_CDATA
, 
ßx_d©a
);

1750 i‡(!
	`mxmlRñó£
(
node
))

1751 
node
 = 
NULL
;

1754 i‡(
node
 && !
fú°
)

1755 
fú°
 = 
node
;

1757 i‡(
buf„r
[0] == '?')

1763 (
ch
 = (*
gëc_cb
)(
p
, &
ícodög
)Ë!
EOF
)

1765 i‡(
ch
 ='>' && 
buÂå
 > 
buf„r
 && bufptr[-1] == '?')

1767 i‡(
	`mxml_add_ch¨
(
ch
, &
buÂå
, &
buf„r
, &
bufsize
))

1768 
îr‹
;

1775 i‡(
ch
 != '>')

1781 
	`mxml_îr‹
("Early EOF inÖrocessing instructionÇode!");

1782 
îr‹
;

1789 *
buÂå
 = '\0';

1791 i‡(!
∑ª¡
 && 
fú°
)

1797 
	`mxml_îr‹
("<%s> cannot beá secondÑootÇodeáfter <%s>",

1798 
buf„r
, 
fú°
->
vÆue
.
ñemít
.
«me
);

1799 
îr‹
;

1802 i‡((
node
 = 
	`mxmlNewEÀmít
(
∑ª¡
, 
buf„r
)Ë=
NULL
)

1808 
	`mxml_îr‹
("UnableÅoáddÖrocessing instructionÇodeÅoÖarent <%s>!",

1809 
∑ª¡
 ?Ö¨ít->
vÆue
.
ñemít
.
«me
 : "null");

1810 
îr‹
;

1813 i‡(
ßx_cb
)

1815 (*
ßx_cb
)(
node
, 
MXML_SAX_DIRECTIVE
, 
ßx_d©a
);

1817 i‡(!
	`mxmlRñó£
(
node
))

1818 
node
 = 
NULL
;

1821 i‡(
node
)

1823 i‡(!
fú°
)

1824 
fú°
 = 
node
;

1826 i‡(!
∑ª¡
)

1828 
∑ª¡
 = 
node
;

1830 i‡(
cb
)

1831 
ty≥
 = (*
cb
)(
∑ª¡
);

1835 i‡(
buf„r
[0] == '!')

1843 i‡(
ch
 == '>')

1847 i‡(
ch
 == '&')

1848 i‡((
ch
 = 
	`mxml_gë_ítôy
(
∑ª¡
, 
p
, &
ícodög
, 
gëc_cb
)Ë=
EOF
)

1849 
îr‹
;

1851 i‡(
	`mxml_add_ch¨
(
ch
, &
buÂå
, &
buf„r
, &
bufsize
))

1852 
îr‹
;

1855 (
ch
 = (*
gëc_cb
)(
p
, &
ícodög
)Ë!
EOF
);

1861 i‡(
ch
 != '>')

1867 
	`mxml_îr‹
("Early EOF in declarationÇode!");

1868 
îr‹
;

1875 *
buÂå
 = '\0';

1877 i‡(!
∑ª¡
 && 
fú°
)

1883 
	`mxml_îr‹
("<%s> cannot beá secondÑootÇodeáfter <%s>",

1884 
buf„r
, 
fú°
->
vÆue
.
ñemít
.
«me
);

1885 
îr‹
;

1888 i‡((
node
 = 
	`mxmlNewEÀmít
(
∑ª¡
, 
buf„r
)Ë=
NULL
)

1894 
	`mxml_îr‹
("UnableÅoádd declarationÇodeÅoÖarent <%s>!",

1895 
∑ª¡
 ?Ö¨ít->
vÆue
.
ñemít
.
«me
 : "null");

1896 
îr‹
;

1899 i‡(
ßx_cb
)

1901 (*
ßx_cb
)(
node
, 
MXML_SAX_DIRECTIVE
, 
ßx_d©a
);

1903 i‡(!
	`mxmlRñó£
(
node
))

1904 
node
 = 
NULL
;

1907 i‡(
node
)

1909 i‡(!
fú°
)

1910 
fú°
 = 
node
;

1912 i‡(!
∑ª¡
)

1914 
∑ª¡
 = 
node
;

1916 i‡(
cb
)

1917 
ty≥
 = (*
cb
)(
∑ª¡
);

1921 i‡(
buf„r
[0] == '/')

1927 i‡(!
∑ª¡
 || 
	`°rcmp
(
buf„r
 + 1,Ö¨ít->
vÆue
.
ñemít
.
«me
))

1933 
	`mxml_îr‹
("Mismatched closeÅag <%s> underÖarent <%s>!",

1934 
buf„r
, 
∑ª¡
 ?Ö¨ít->
vÆue
.
ñemít
.
«me
 : "(null)");

1935 
îr‹
;

1942 
ch
 !'>' && ch !
EOF
)

1943 
ch
 = (*
gëc_cb
)(
p
, &
ícodög
);

1945 
node
 = 
∑ª¡
;

1946 
∑ª¡
 =Öarent->parent;

1948 i‡(
ßx_cb
)

1950 (*
ßx_cb
)(
node
, 
MXML_SAX_ELEMENT_CLOSE
, 
ßx_d©a
);

1952 i‡(!
	`mxmlRñó£
(
node
Ë&& 
fú°
 ==Çode)

1953 
fú°
 = 
NULL
;

1960 i‡(
cb
 && 
∑ª¡
)

1961 
ty≥
 = (*
cb
)(
∑ª¡
);

1969 i‡(!
∑ª¡
 && 
fú°
)

1975 
	`mxml_îr‹
("<%s> cannot beá secondÑootÇodeáfter <%s>",

1976 
buf„r
, 
fú°
->
vÆue
.
ñemít
.
«me
);

1977 
îr‹
;

1980 i‡((
node
 = 
	`mxmlNewEÀmít
(
∑ª¡
, 
buf„r
)Ë=
NULL
)

1986 
	`mxml_îr‹
("UnableÅoáddÉlementÇodeÅoÖarent <%s>!",

1987 
∑ª¡
 ?Ö¨ít->
vÆue
.
ñemít
.
«me
 : "null");

1988 
îr‹
;

1991 i‡(
	`mxml_is•a˚
(
ch
))

1993 i‡((
ch
 = 
	`mxml_∑r£_ñemít
(
node
, 
p
, &
ícodög
, 
gëc_cb
)Ë=
EOF
)

1994 
îr‹
;

1996 i‡(
ch
 == '/')

1998 i‡((
ch
 = (*
gëc_cb
)(
p
, &
ícodög
)) != '>')

2000 
	`mxml_îr‹
("Expected > but got '%c' instead forÉlement <%s/>!",

2001 
ch
, 
buf„r
);

2002 
	`mxmlDñëe
(
node
);

2003 
îr‹
;

2006 
ch
 = '/';

2009 i‡(
ßx_cb
)

2010 (*
ßx_cb
)(
node
, 
MXML_SAX_ELEMENT_OPEN
, 
ßx_d©a
);

2012 i‡(!
fú°
)

2013 
fú°
 = 
node
;

2015 i‡(
ch
 =
EOF
)

2018 i‡(
ch
 != '/')

2024 
∑ª¡
 = 
node
;

2026 i‡(
cb
 && 
∑ª¡
)

2027 
ty≥
 = (*
cb
)(
∑ª¡
);

2029 i‡(
ßx_cb
)

2031 (*
ßx_cb
)(
node
, 
MXML_SAX_ELEMENT_CLOSE
, 
ßx_d©a
);

2033 i‡(!
	`mxmlRñó£
(
node
Ë&& 
fú°
 ==Çode)

2034 
fú°
 = 
NULL
;

2038 
buÂå
 = 
buf„r
;

2040 i‡(
ch
 == '&')

2046 i‡((
ch
 = 
	`mxml_gë_ítôy
(
∑ª¡
, 
p
, &
ícodög
, 
gëc_cb
)Ë=
EOF
)

2047 
îr‹
;

2049 i‡(
	`mxml_add_ch¨
(
ch
, &
buÂå
, &
buf„r
, &
bufsize
))

2050 
îr‹
;

2052 i‡(
ty≥
 =
MXML_OPAQUE
 ||Åy≥ =
MXML_CUSTOM
 || !
	`mxml_is•a˚
(
ch
))

2058 i‡(
	`mxml_add_ch¨
(
ch
, &
buÂå
, &
buf„r
, &
bufsize
))

2059 
îr‹
;

2067 
	`‰ì
(
buf„r
);

2073 i‡(
∑ª¡
)

2075 
node
 = 
∑ª¡
;

2077 
∑ª¡
->∑ª¡ !
t›
 &&Öarent->parent)

2078 
∑ª¡
 =Öarent->parent;

2080 i‡(
node
 !
∑ª¡
)

2082 
	`mxml_îr‹
("Missing closeÅag </%s> underÖarent <%s>!",

2083 
node
->
vÆue
.
ñemít
.
«me
,

2084 
node
->
∑ª¡
 ?Çode->∑ª¡->
vÆue
.
ñemít
.
«me
 : "(null)");

2086 
	`mxmlDñëe
(
fú°
);

2088  (
NULL
);

2092 i‡(
∑ª¡
)

2093  (
∑ª¡
);

2095  (
fú°
);

2101 
îr‹
:

2103 
	`mxmlDñëe
(
fú°
);

2105 
	`‰ì
(
buf„r
);

2107  (
NULL
);

2108 
	}
}

2116 
	$mxml_∑r£_ñemít
(

2117 
mxml_node_t
 *
node
,

2118 *
p
,

2119 *
ícodög
,

2120 
_mxml_gëc_cb_t
 
gëc_cb
)

2122 
ch
,

2123 
quŸe
;

2124 *
«me
,

2125 *
vÆue
,

2126 *
±r
;

2127 
«mesize
,

2128 
vÆsize
;

2135 i‡((
«me
 = 
	`mÆloc
(64)Ë=
NULL
)

2137 
	`mxml_îr‹
("UnableÅoállocate memory forÇame!");

2138  (
EOF
);

2141 
«mesize
 = 64;

2143 i‡((
vÆue
 = 
	`mÆloc
(64)Ë=
NULL
)

2145 
	`‰ì
(
«me
);

2146 
	`mxml_îr‹
("UnableÅoállocate memory for value!");

2147  (
EOF
);

2150 
vÆsize
 = 64;

2156 (
ch
 = (*
gëc_cb
)(
p
, 
ícodög
)Ë!
EOF
)

2158 #i‡
DEBUG
 > 1

2159 
	`Ârötf
(
°dîr
, "∑r£_ñemít: ch='%c'\n", 
ch
);

2166 i‡(
	`mxml_is•a˚
(
ch
))

2173 i‡(
ch
 == '/' || ch == '?')

2179 
quŸe
 = (*
gëc_cb
)(
p
, 
ícodög
);

2181 i‡(
quŸe
 != '>')

2183 
	`mxml_îr‹
("Expected '>'áfter '%c' forÉlement %s, but got '%c'!",

2184 
ch
, 
node
->
vÆue
.
ñemít
.
«me
, 
quŸe
);

2185 
îr‹
;

2190 i‡(
ch
 == '<')

2192 
	`mxml_îr‹
("B¨ê< i¿ñemíà%s!", 
node
->
vÆue
.
ñemít
.
«me
);

2193 
îr‹
;

2195 i‡(
ch
 == '>')

2202 
«me
[0] = 
ch
;

2203 
±r
 = 
«me
 + 1;

2205 i‡(
ch
 == '\"' || ch == '\'')

2211 
quŸe
 = 
ch
;

2213 (
ch
 = (*
gëc_cb
)(
p
, 
ícodög
)Ë!
EOF
)

2215 i‡(
ch
 == '&')

2216 i‡((
ch
 = 
	`mxml_gë_ítôy
(
node
, 
p
, 
ícodög
, 
gëc_cb
)Ë=
EOF
)

2217 
îr‹
;

2219 i‡(
	`mxml_add_ch¨
(
ch
, &
±r
, &
«me
, &
«mesize
))

2220 
îr‹
;

2222 i‡(
ch
 =
quŸe
)

2232 (
ch
 = (*
gëc_cb
)(
p
, 
ícodög
)Ë!
EOF
)

2233 i‡(
	`mxml_is•a˚
(
ch
) || ch == '=' || ch == '/' || ch == '>' ||

2234 
ch
 == '?')

2238 i‡(
ch
 == '&')

2239 i‡((
ch
 = 
	`mxml_gë_ítôy
(
node
, 
p
, 
ícodög
, 
gëc_cb
)Ë=
EOF
)

2240 
îr‹
;

2242 i‡(
	`mxml_add_ch¨
(
ch
, &
±r
, &
«me
, &
«mesize
))

2243 
îr‹
;

2247 *
±r
 = '\0';

2249 i‡(
	`mxmlEÀmítGëAâr
(
node
, 
«me
))

2250 
îr‹
;

2252 
ch
 !
EOF
 && 
	`mxml_is•a˚
(ch))

2253 
ch
 = (*
gëc_cb
)(
p
, 
ícodög
);

2255 i‡(
ch
 == '=')

2261 (
ch
 = (*
gëc_cb
)(
p
, 
ícodög
)Ë!
EOF
 && 
	`mxml_is•a˚
(ch));

2263 i‡(
ch
 =
EOF
)

2265 
	`mxml_îr‹
("Missing value foráttribute '%s' inÉlement %s!",

2266 
«me
, 
node
->
vÆue
.
ñemít
.name);

2267 
îr‹
;

2270 i‡(
ch
 == '\'' || ch == '\"')

2276 
quŸe
 = 
ch
;

2277 
±r
 = 
vÆue
;

2279 (
ch
 = (*
gëc_cb
)(
p
, 
ícodög
)Ë!
EOF
)

2280 i‡(
ch
 =
quŸe
)

2284 i‡(
ch
 == '&')

2285 i‡((
ch
 = 
	`mxml_gë_ítôy
(
node
, 
p
, 
ícodög
, 
gëc_cb
)Ë=
EOF
)

2286 
îr‹
;

2288 i‡(
	`mxml_add_ch¨
(
ch
, &
±r
, &
vÆue
, &
vÆsize
))

2289 
îr‹
;

2292 *
±r
 = '\0';

2300 
vÆue
[0] = 
ch
;

2301 
±r
 = 
vÆue
 + 1;

2303 (
ch
 = (*
gëc_cb
)(
p
, 
ícodög
)Ë!
EOF
)

2304 i‡(
	`mxml_is•a˚
(
ch
) || ch == '=' || ch == '/' || ch == '>')

2308 i‡(
ch
 == '&')

2309 i‡((
ch
 = 
	`mxml_gë_ítôy
(
node
, 
p
, 
ícodög
, 
gëc_cb
)Ë=
EOF
)

2310 
îr‹
;

2312 i‡(
	`mxml_add_ch¨
(
ch
, &
±r
, &
vÆue
, &
vÆsize
))

2313 
îr‹
;

2316 *
±r
 = '\0';

2323 
	`mxmlEÀmítSëAâr
(
node
, 
«me
, 
vÆue
);

2327 
	`mxml_îr‹
("Missing value foráttribute '%s' inÉlement %s!",

2328 
«me
, 
node
->
vÆue
.
ñemít
.name);

2329 
îr‹
;

2336 i‡(
ch
 == '/' || ch == '?')

2342 
quŸe
 = (*
gëc_cb
)(
p
, 
ícodög
);

2344 i‡(
quŸe
 != '>')

2346 
	`mxml_îr‹
("Expected '>'áfter '%c' forÉlement %s, but got '%c'!",

2347 
ch
, 
node
->
vÆue
.
ñemít
.
«me
, 
quŸe
);

2348 
ch
 = 
EOF
;

2353 i‡(
ch
 == '>')

2361 
	`‰ì
(
«me
);

2362 
	`‰ì
(
vÆue
);

2364  (
ch
);

2370 
îr‹
:

2372 
	`‰ì
(
«me
);

2373 
	`‰ì
(
vÆue
);

2375  (
EOF
);

2376 
	}
}

2384 
	$mxml_°rög_gëc
(*
p
,

2385 *
ícodög
)

2387 
ch
;

2388 c⁄° **
s
;

2391 
s
 = (c⁄° **)
p
;

2393 i‡((
ch
 = (*
s
)[0] & 255Ë!0 || *
ícodög
 =
ENCODE_UTF16LE
)

2399 (*
s
)++;

2401 *
ícodög
)

2403 
ENCODE_UTF8
 :

2404 i‡(!(
ch
 & 0x80))

2406 #i‡
DEBUG
 > 1

2407 
	`¥ötf
("mxml_°rög_gëc: %¯(0x%04x)\n", 
ch
 < ' ' ? '.' : ch, ch);

2410 i‡(
	`mxml_bad_ch¨
(
ch
))

2412 
	`mxml_îr‹
("Bad control character 0x%02xÇotállowed by XML standard!",

2413 
ch
);

2414  (
EOF
);

2417  (
ch
);

2419 i‡(
ch
 == 0xfe)

2425 i‡(((*
s
)[0] & 255) != 0xff)

2426  (
EOF
);

2428 *
ícodög
 = 
ENCODE_UTF16BE
;

2429 (*
s
)++;

2431  (
	`mxml_°rög_gëc
(
p
, 
ícodög
));

2433 i‡(
ch
 == 0xff)

2439 i‡(((*
s
)[0] & 255) != 0xfe)

2440  (
EOF
);

2442 *
ícodög
 = 
ENCODE_UTF16LE
;

2443 (*
s
)++;

2445  (
	`mxml_°rög_gëc
(
p
, 
ícodög
));

2447 i‡((
ch
 & 0xe0) == 0xc0)

2453 i‡(((*
s
)[0] & 0xc0) != 0x80)

2454  (
EOF
);

2456 
ch
 = ((ch & 0x1fË<< 6Ë| ((*
s
)[0] & 0x3f);

2458 (*
s
)++;

2460 i‡(
ch
 < 0x80)

2462 
	`mxml_îr‹
("InvÆid UTF-8 sequí˚ f‹ ch¨a˘î 0x%04x!", 
ch
);

2463  (
EOF
);

2466 #i‡
DEBUG
 > 1

2467 
	`¥ötf
("mxml_°rög_gëc: %¯(0x%04x)\n", 
ch
 < ' ' ? '.' : ch, ch);

2470  (
ch
);

2472 i‡((
ch
 & 0xf0) == 0xe0)

2478 i‡(((*
s
)[0] & 0xc0) != 0x80 ||

2479 ((*
s
)[1] & 0xc0) != 0x80)

2480  (
EOF
);

2482 
ch
 = ((((ch & 0x0fË<< 6Ë| ((*
s
)[0] & 0x3f)) << 6) | ((*s)[1] & 0x3f);

2484 (*
s
) += 2;

2486 i‡(
ch
 < 0x800)

2488 
	`mxml_îr‹
("InvÆid UTF-8 sequí˚ f‹ ch¨a˘î 0x%04x!", 
ch
);

2489  (
EOF
);

2496 i‡(
ch
 == 0xfeff)

2497  (
	`mxml_°rög_gëc
(
p
, 
ícodög
));

2499 #i‡
DEBUG
 > 1

2500 
	`¥ötf
("mxml_°rög_gëc: %¯(0x%04x)\n", 
ch
 < ' ' ? '.' : ch, ch);

2503  (
ch
);

2505 i‡((
ch
 & 0xf8) == 0xf0)

2511 i‡(((*
s
)[0] & 0xc0) != 0x80 ||

2512 ((*
s
)[1] & 0xc0) != 0x80 ||

2513 ((*
s
)[2] & 0xc0) != 0x80)

2514  (
EOF
);

2516 
ch
 = ((((((ch & 0x07Ë<< 6Ë| ((*
s
)[0] & 0x3f)) << 6) |

2517 ((*
s
)[1] & 0x3f)) << 6) | ((*s)[2] & 0x3f);

2519 (*
s
) += 3;

2521 i‡(
ch
 < 0x10000)

2523 
	`mxml_îr‹
("InvÆid UTF-8 sequí˚ f‹ ch¨a˘î 0x%04x!", 
ch
);

2524  (
EOF
);

2527 #i‡
DEBUG
 > 1

2528 
	`¥ötf
("mxml_°rög_gëc: %¯(0x%04x)\n", 
ch
 < ' ' ? '.' : ch, ch);

2531  (
ch
);

2534  (
EOF
);

2536 
ENCODE_UTF16BE
 :

2541 
ch
 = (ch << 8Ë| ((*
s
)[0] & 255);

2542 (*
s
) ++;

2544 i‡(
	`mxml_bad_ch¨
(
ch
))

2546 
	`mxml_îr‹
("Bad control character 0x%02xÇotállowed by XML standard!",

2547 
ch
);

2548  (
EOF
);

2550 i‡(
ch
 >= 0xd800 && ch <= 0xdbff)

2556 
lch
;

2559 i‡(!(*
s
)[0])

2560  (
EOF
);

2562 
lch
 = (((*
s
)[0] & 255) << 8) | ((*s)[1] & 255);

2563 (*
s
) += 2;

2565 i‡(
lch
 < 0xdc00 ||Üch >= 0xdfff)

2566  (
EOF
);

2568 
ch
 = (((ch & 0x3ffË<< 10Ë| (
lch
 & 0x3ff)) + 0x10000;

2571 #i‡
DEBUG
 > 1

2572 
	`¥ötf
("mxml_°rög_gëc: %¯(0x%04x)\n", 
ch
 < ' ' ? '.' : ch, ch);

2575  (
ch
);

2577 
ENCODE_UTF16LE
 :

2582 
ch
 = ch | (((*
s
)[0] & 255) << 8);

2584 i‡(!
ch
)

2586 (*
s
) --;

2587  (
EOF
);

2590 (*
s
) ++;

2592 i‡(
	`mxml_bad_ch¨
(
ch
))

2594 
	`mxml_îr‹
("Bad control character 0x%02xÇotállowed by XML standard!",

2595 
ch
);

2596  (
EOF
);

2598 i‡(
ch
 >= 0xd800 && ch <= 0xdbff)

2604 
lch
;

2607 i‡(!(*
s
)[1])

2608  (
EOF
);

2610 
lch
 = (((*
s
)[1] & 255) << 8) | ((*s)[0] & 255);

2611 (*
s
) += 2;

2613 i‡(
lch
 < 0xdc00 ||Üch >= 0xdfff)

2614  (
EOF
);

2616 
ch
 = (((ch & 0x3ffË<< 10Ë| (
lch
 & 0x3ff)) + 0x10000;

2619 #i‡
DEBUG
 > 1

2620 
	`¥ötf
("mxml_°rög_gëc: %¯(0x%04x)\n", 
ch
 < ' ' ? '.' : ch, ch);

2623  (
ch
);

2627  (
EOF
);

2628 
	}
}

2636 
	$mxml_°rög_putc
(
ch
,

2637 *
p
)

2639 **
µ
;

2642 
µ
 = (**)
p
;

2644 i‡(
µ
[0] <Öp[1])

2645 
µ
[0][0] = 
ch
;

2647 
µ
[0] ++;

2650 
	}
}

2658 
mxml_wrôe_«me
(c⁄° *
s
,

2659 *
p
,

2660 (*
putc_cb
)(, *))

2663 
quŸe
;

2664 c⁄° *
«me
;

2667 i‡(*
s
 == '\"' || *s == '\'')

2673 i‡((*
putc_cb
)(*
s
, 
p
) < 0)

2676 
quŸe
 = *
s
++;

2678 *
s
 && *†!
quŸe
)

2680 i‡((
«me
 = 
	`mxmlE¡ôyGëName
(*
s
)Ë!
NULL
)

2682 i‡((*
putc_cb
)('&', 
p
) < 0)

2685 *
«me
)

2687 i‡((*
putc_cb
)(*
«me
, 
p
) < 0)

2690 
«me
 ++;

2693 i‡((*
putc_cb
)(';', 
p
) < 0)

2696 i‡((*
putc_cb
)(*
s
, 
p
) < 0)

2699 
s
 ++;

2706 i‡((*
putc_cb
)(
quŸe
, 
p
) < 0)

2715 *
s
)

2717 i‡((*
putc_cb
)(*
s
, 
p
) < 0)

2720 
s
 ++;

2725 
	}
}

2733 
	$mxml_wrôe_node
(
mxml_node_t
 *
node
,

2734 *
p
,

2735 
mxml_ßve_cb_t
 
cb
,

2736 
cﬁ
,

2737 
_mxml_putc_cb_t
 
putc_cb
,

2738 
_mxml_globÆ_t
 *
globÆ
)

2740 
i
,

2741 
width
;

2742 
mxml_©å_t
 *
©å
;

2743 
s
[255];

2750 
node
->
ty≥
)

2752 
MXML_ELEMENT
 :

2753 
cﬁ
 = 
	`mxml_wrôe_ws
(
node
, 
p
, 
cb
, 
MXML_WS_BEFORE_OPEN
, cﬁ, 
putc_cb
);

2755 i‡((*
putc_cb
)('<', 
p
) < 0)

2757 i‡(
node
->
vÆue
.
ñemít
.
«me
[0] == '?' ||

2758 !
	`°∫cmp
(
node
->
vÆue
.
ñemít
.
«me
, "!--", 3) ||

2759 !
	`°∫cmp
(
node
->
vÆue
.
ñemít
.
«me
, "![CDATA[", 8))

2766 c⁄° *
±r
;

2769 
±r
 = 
node
->
vÆue
.
ñemít
.
«me
; *ptr;Ötr ++)

2770 i‡((*
putc_cb
)(*
±r
, 
p
) < 0)

2773 i‡(
	`mxml_wrôe_«me
(
node
->
vÆue
.
ñemít
.
«me
, 
p
, 
putc_cb
) < 0)

2776 
cﬁ
 +
	`°æí
(
node
->
vÆue
.
ñemít
.
«me
) + 1;

2778 
i
 = 
node
->
vÆue
.
ñemít
.
num_©ås
, 
©å
 =Çode->vÆue.ñemít.
©ås
;

2779 
i
 > 0;

2780 
i
 --, 
©å
 ++)

2782 
width
 = 
	`°æí
(
©å
->
«me
);

2784 i‡(
©å
->
vÆue
)

2785 
width
 +
	`°æí
(
©å
->
vÆue
) + 3;

2787 i‡(
globÆ
->
wøp
 > 0 && (
cﬁ
 + 
width
) > global->wrap)

2789 i‡((*
putc_cb
)('\n', 
p
) < 0)

2792 
cﬁ
 = 0;

2796 i‡((*
putc_cb
)(' ', 
p
) < 0)

2799 
cﬁ
 ++;

2802 i‡(
	`mxml_wrôe_«me
(
©å
->
«me
, 
p
, 
putc_cb
) < 0)

2805 i‡(
©å
->
vÆue
)

2807 i‡((*
putc_cb
)('=', 
p
) < 0)

2809 i‡((*
putc_cb
)('\"', 
p
) < 0)

2811 i‡(
	`mxml_wrôe_°rög
(
©å
->
vÆue
, 
p
, 
putc_cb
) < 0)

2813 i‡((*
putc_cb
)('\"', 
p
) < 0)

2817 
cﬁ
 +
width
;

2820 i‡(
node
->
chûd
)

2826 
mxml_node_t
 *
chûd
;

2829 i‡((*
putc_cb
)('>', 
p
) < 0)

2832 
cﬁ
 ++;

2834 
cﬁ
 = 
	`mxml_wrôe_ws
(
node
, 
p
, 
cb
, 
MXML_WS_AFTER_OPEN
, cﬁ, 
putc_cb
);

2836 
chûd
 = 
node
->chûd; chûd; chûd = chûd->
√xt
)

2838 i‡((
cﬁ
 = 
	`mxml_wrôe_node
(
chûd
, 
p
, 
cb
, cﬁ, 
putc_cb
, 
globÆ
)) < 0)

2846 i‡(
node
->
vÆue
.
ñemít
.
«me
[0] != '!' &&

2847 
node
->
vÆue
.
ñemít
.
«me
[0] != '?')

2849 
cﬁ
 = 
	`mxml_wrôe_ws
(
node
, 
p
, 
cb
, 
MXML_WS_BEFORE_CLOSE
, cﬁ, 
putc_cb
);

2851 i‡((*
putc_cb
)('<', 
p
) < 0)

2853 i‡((*
putc_cb
)('/', 
p
) < 0)

2855 i‡(
	`mxml_wrôe_°rög
(
node
->
vÆue
.
ñemít
.
«me
, 
p
, 
putc_cb
) < 0)

2857 i‡((*
putc_cb
)('>', 
p
) < 0)

2860 
cﬁ
 +
	`°æí
(
node
->
vÆue
.
ñemít
.
«me
) + 3;

2862 
cﬁ
 = 
	`mxml_wrôe_ws
(
node
, 
p
, 
cb
, 
MXML_WS_AFTER_CLOSE
, cﬁ, 
putc_cb
);

2865 i‡(
node
->
vÆue
.
ñemít
.
«me
[0] == '!' ||

2866 
node
->
vÆue
.
ñemít
.
«me
[0] == '?')

2872 i‡((*
putc_cb
)('>', 
p
) < 0)

2875 
cﬁ
 ++;

2877 
cﬁ
 = 
	`mxml_wrôe_ws
(
node
, 
p
, 
cb
, 
MXML_WS_AFTER_OPEN
, cﬁ, 
putc_cb
);

2881 i‡((*
putc_cb
)(' ', 
p
) < 0)

2883 i‡((*
putc_cb
)('/', 
p
) < 0)

2885 i‡((*
putc_cb
)('>', 
p
) < 0)

2888 
cﬁ
 += 3;

2890 
cﬁ
 = 
	`mxml_wrôe_ws
(
node
, 
p
, 
cb
, 
MXML_WS_AFTER_OPEN
, cﬁ, 
putc_cb
);

2894 
MXML_INTEGER
 :

2895 i‡(
node
->
¥ev
)

2897 i‡(
globÆ
->
wøp
 > 0 && 
cﬁ
 > global->wrap)

2899 i‡((*
putc_cb
)('\n', 
p
) < 0)

2902 
cﬁ
 = 0;

2904 i‡((*
putc_cb
)(' ', 
p
) < 0)

2907 
cﬁ
 ++;

2910 
	`•rötf
(
s
, "%d", 
node
->
vÆue
.
öãgî
);

2911 i‡(
	`mxml_wrôe_°rög
(
s
, 
p
, 
putc_cb
) < 0)

2914 
cﬁ
 +
	`°æí
(
s
);

2917 
MXML_OPAQUE
 :

2918 i‡(
	`mxml_wrôe_°rög
(
node
->
vÆue
.
›aque
, 
p
, 
putc_cb
) < 0)

2921 
cﬁ
 +
	`°æí
(
node
->
vÆue
.
›aque
);

2924 
MXML_REAL
 :

2925 i‡(
node
->
¥ev
)

2927 i‡(
globÆ
->
wøp
 > 0 && 
cﬁ
 > global->wrap)

2929 i‡((*
putc_cb
)('\n', 
p
) < 0)

2932 
cﬁ
 = 0;

2934 i‡((*
putc_cb
)(' ', 
p
) < 0)

2937 
cﬁ
 ++;

2940 
	`•rötf
(
s
, "%f", 
node
->
vÆue
.
ªÆ
);

2941 i‡(
	`mxml_wrôe_°rög
(
s
, 
p
, 
putc_cb
) < 0)

2944 
cﬁ
 +
	`°æí
(
s
);

2947 
MXML_TEXT
 :

2948 i‡(
node
->
vÆue
.
ãxt
.
whôe•a˚
 && 
cﬁ
 > 0)

2950 i‡(
globÆ
->
wøp
 > 0 && 
cﬁ
 > global->wrap)

2952 i‡((*
putc_cb
)('\n', 
p
) < 0)

2955 
cﬁ
 = 0;

2957 i‡((*
putc_cb
)(' ', 
p
) < 0)

2960 
cﬁ
 ++;

2963 i‡(
	`mxml_wrôe_°rög
(
node
->
vÆue
.
ãxt
.
°rög
, 
p
, 
putc_cb
) < 0)

2966 
cﬁ
 +
	`°æí
(
node
->
vÆue
.
ãxt
.
°rög
);

2969 
MXML_CUSTOM
 :

2970 i‡(
globÆ
->
cu°om_ßve_cb
)

2972 *
d©a
;

2973 c⁄° *
√wlöe
;

2976 i‡((
d©a
 = (*
globÆ
->
cu°om_ßve_cb
)(
node
)Ë=
NULL
)

2979 i‡(
	`mxml_wrôe_°rög
(
d©a
, 
p
, 
putc_cb
) < 0)

2982 i‡((
√wlöe
 = 
	`°ºchr
(
d©a
, '\n')Ë=
NULL
)

2983 
cﬁ
 +
	`°æí
(
d©a
);

2985 
cﬁ
 = 
	`°æí
(
√wlöe
);

2987 
	`‰ì
(
d©a
);

2995  (
cﬁ
);

2996 
	}
}

3004 
	$mxml_wrôe_°rög
(

3005 c⁄° *
s
,

3006 *
p
,

3007 
_mxml_putc_cb_t
 
putc_cb
)

3009 c⁄° *
«me
;

3012 *
s
)

3014 i‡((
«me
 = 
	`mxmlE¡ôyGëName
(*
s
)Ë!
NULL
)

3016 i‡((*
putc_cb
)('&', 
p
) < 0)

3019 *
«me
)

3021 i‡((*
putc_cb
)(*
«me
, 
p
) < 0)

3023 
«me
 ++;

3026 i‡((*
putc_cb
)(';', 
p
) < 0)

3029 i‡((*
putc_cb
)(*
s
, 
p
) < 0)

3032 
s
 ++;

3036 
	}
}

3044 
	$mxml_wrôe_ws
(
mxml_node_t
 *
node
,

3045 *
p
,

3046 
mxml_ßve_cb_t
 
cb
,

3047 
ws
,

3048 
cﬁ
,

3049 
_mxml_putc_cb_t
 
putc_cb
)

3051 c⁄° *
s
;

3054 i‡(
cb
 && (
s
 = (*cb)(
node
, 
ws
)Ë!
NULL
)

3056 *
s
)

3058 i‡((*
putc_cb
)(*
s
, 
p
) < 0)

3060 i‡(*
s
 == '\n')

3061 
cﬁ
 = 0;

3062 i‡(*
s
 == '\t')

3064 
cﬁ
 +
MXML_TAB
;

3065 
cﬁ
 = cﬁ - (cﬁ % 
MXML_TAB
);

3068 
cﬁ
 ++;

3070 
s
 ++;

3074  (
cﬁ
);

3075 
	}
}

	@/home/gaojing/123/xml/release-2.7/mxml-get.c

40 
	~"c⁄fig.h
"

41 
	~"mxml.h
"

53 
	$mxmlGëCDATA
(
mxml_node_t
 *
node
)

59 i‡(!
node
 ||Çode->
ty≥
 !
MXML_ELEMENT
 ||

60 
	`°∫cmp
(
node
->
vÆue
.
ñemít
.
«me
, "![CDATA[", 8))

61  (
NULL
);

67  (
node
->
vÆue
.
ñemít
.
«me
 + 8);

68 
	}
}

81 
	$mxmlGëCu°om
(
mxml_node_t
 *
node
)

87 i‡(!
node
)

88  (
NULL
);

94 i‡(
node
->
ty≥
 =
MXML_CUSTOM
)

95  (
node
->
vÆue
.
cu°om
.
d©a
);

96 i‡(
node
->
ty≥
 =
MXML_ELEMENT
 &&

97 
node
->
chûd
 &&

98 
node
->
chûd
->
ty≥
 =
MXML_CUSTOM
)

99  (
node
->
chûd
->
vÆue
.
cu°om
.
d©a
);

101  (
NULL
);

102 
	}
}

114 
	$mxmlGëEÀmít
(
mxml_node_t
 *
node
)

120 i‡(!
node
 ||Çode->
ty≥
 !
MXML_ELEMENT
)

121  (
NULL
);

127  (
node
->
vÆue
.
ñemít
.
«me
);

128 
	}
}

140 
mxml_node_t
 *

141 
	$mxmlGëFú°Chûd
(
mxml_node_t
 *
node
)

147 i‡(!
node
 ||Çode->
ty≥
 !
MXML_ELEMENT
)

148  (
NULL
);

154  (
node
->
chûd
);

155 
	}
}

168 
	$mxmlGëI¡egî
(
mxml_node_t
 *
node
)

174 i‡(!
node
)

181 i‡(
node
->
ty≥
 =
MXML_INTEGER
)

182  (
node
->
vÆue
.
öãgî
);

183 i‡(
node
->
ty≥
 =
MXML_ELEMENT
 &&

184 
node
->
chûd
 &&

185 
node
->
chûd
->
ty≥
 =
MXML_INTEGER
)

186  (
node
->
chûd
->
vÆue
.
öãgî
);

189 
	}
}

201 
mxml_node_t
 *

202 
	$mxmlGëLa°Chûd
(
mxml_node_t
 *
node
)

208 i‡(!
node
 ||Çode->
ty≥
 !
MXML_ELEMENT
)

209  (
NULL
);

215  (
node
->
œ°_chûd
);

216 
	}
}

227 
mxml_node_t
 *

228 
	$mxmlGëNextSiblög
(
mxml_node_t
 *
node
)

234 i‡(!
node
)

235  (
NULL
);

241  (
node
->
√xt
);

242 
	}
}

255 
	$mxmlGëO∑que
(
mxml_node_t
 *
node
)

261 i‡(!
node
)

262  (
NULL
);

268 i‡(
node
->
ty≥
 =
MXML_OPAQUE
)

269  (
node
->
vÆue
.
›aque
);

270 i‡(
node
->
ty≥
 =
MXML_ELEMENT
 &&

271 
node
->
chûd
 &&

272 
node
->
chûd
->
ty≥
 =
MXML_OPAQUE
)

273  (
node
->
chûd
->
vÆue
.
›aque
);

275  (
NULL
);

276 
	}
}

287 
mxml_node_t
 *

288 
	$mxmlGëP¨ít
(
mxml_node_t
 *
node
)

294 i‡(!
node
)

295  (
NULL
);

301  (
node
->
∑ª¡
);

302 
	}
}

313 
mxml_node_t
 *

314 
	$mxmlGëPªvSiblög
(
mxml_node_t
 *
node
)

320 i‡(!
node
)

321  (
NULL
);

327  (
node
->
¥ev
);

328 
	}
}

340 
	$mxmlGëRól
(
mxml_node_t
 *
node
)

346 i‡(!
node
)

353 i‡(
node
->
ty≥
 =
MXML_REAL
)

354  (
node
->
vÆue
.
ªÆ
);

355 i‡(
node
->
ty≥
 =
MXML_ELEMENT
 &&

356 
node
->
chûd
 &&

357 
node
->
chûd
->
ty≥
 =
MXML_REAL
)

358  (
node
->
chûd
->
vÆue
.
ªÆ
);

361 
	}
}

374 
	$mxmlGëText
(
mxml_node_t
 *
node
,

375 *
whôe•a˚
)

381 i‡(!
node
)

383 i‡(
whôe•a˚
)

384 *
whôe•a˚
 = 0;

386  (
NULL
);

393 i‡(
node
->
ty≥
 =
MXML_TEXT
)

395 i‡(
whôe•a˚
)

396 *
whôe•a˚
 = 
node
->
vÆue
.
ãxt
.whitespace;

398  (
node
->
vÆue
.
ãxt
.
°rög
);

400 i‡(
node
->
ty≥
 =
MXML_ELEMENT
 &&

401 
node
->
chûd
 &&

402 
node
->
chûd
->
ty≥
 =
MXML_TEXT
)

404 i‡(
whôe•a˚
)

405 *
whôe•a˚
 = 
node
->
chûd
->
vÆue
.
ãxt
.whitespace;

407  (
node
->
chûd
->
vÆue
.
ãxt
.
°rög
);

411 i‡(
whôe•a˚
)

412 *
whôe•a˚
 = 0;

414  (
NULL
);

416 
	}
}

427 
mxml_ty≥_t


428 
	$mxmlGëTy≥
(
mxml_node_t
 *
node
)

434 i‡(!
node
)

435  (
MXML_IGNORE
);

441  (
node
->
ty≥
);

442 
	}
}

452 
	$mxmlGëU£rD©a
(
mxml_node_t
 *
node
)

458 i‡(!
node
)

459  (
NULL
);

465  (
node
->
u£r_d©a
);

466 
	}
}

	@/home/gaojing/123/xml/release-2.7/mxml-index.c

24 
	~"c⁄fig.h
"

25 
	~"mxml.h
"

32 
ödex_com∑ª
(
mxml_ödex_t
 *
öd
, 
mxml_node_t
 *
fú°
,

33 
mxml_node_t
 *
£c⁄d
);

34 
ödex_föd
(
mxml_ödex_t
 *
öd
, c⁄° *
ñemít
,

35 c⁄° *
vÆue
, 
mxml_node_t
 *
node
);

36 
ödex_s‹t
(
mxml_ödex_t
 *
öd
, 
À·
, 
right
);

44 
	$mxmlIndexDñëe
(
mxml_ödex_t
 *
öd
)

50 i‡(!
öd
)

57 i‡(
öd
->
©å
)

58 
	`‰ì
(
öd
->
©å
);

60 i‡(
öd
->
Æloc_nodes
)

61 
	`‰ì
(
öd
->
nodes
);

63 
	`‰ì
(
öd
);

64 
	}
}

73 
mxml_node_t
 *

74 
	$mxmlIndexEnum
(
mxml_ödex_t
 *
öd
)

80 i‡(!
öd
)

81  (
NULL
);

87 i‡(
öd
->
cur_node
 < ind->
num_nodes
)

88  (
öd
->
nodes
[öd->
cur_node
 ++]);

90  (
NULL
);

91 
	}
}

103 
mxml_node_t
 *

104 
	$mxmlIndexFöd
(
mxml_ödex_t
 *
öd
,

105 c⁄° *
ñemít
,

106 c⁄° *
vÆue
)

108 
diff
,

109 
cuºít
,

110 
fú°
,

111 
œ°
;

114 #ifde‡
DEBUG


115 
	`¥ötf
("mxmlIndexFind(ind=%p,Élement=\"%s\", value=\"%s\")\n",

116 
öd
, 
ñemít
 ?ÉÀmíà: "“uŒ)", 
vÆue
 ? value : "(null)");

123 i‡(!
öd
 || (!öd->
©å
 && 
vÆue
))

125 #ifde‡
DEBUG


126 
	`puts
("Ñeturning NULL...");

127 
	`¥ötf
(" ind->©å=\"%s\"\n", 
öd
->
©å
 ? ind->attr : "(null)");

130  (
NULL
);

138 i‡(!
ñemít
 && !
vÆue
)

139  (
	`mxmlIndexEnum
(
öd
));

145 i‡(!
öd
->
num_nodes
)

147 #ifde‡
DEBUG


148 
	`puts
("Ñeturning NULL...");

149 
	`puts
("ÇoÇodes!");

152  (
NULL
);

159 i‡(
öd
->
cur_node
 == 0)

165 
fú°
 = 0;

166 
œ°
 = 
öd
->
num_nodes
 - 1;

168 #ifde‡
DEBUG


169 
	`¥ötf
(" föd fú°Åime,Çum_nodes=%d...\n", 
öd
->
num_nodes
);

172 (
œ°
 - 
fú°
) > 1)

174 
cuºít
 = (
fú°
 + 
œ°
) / 2;

176 #ifde‡
DEBUG


177 
	`¥ötf
(" fú°=%d,Üa°=%d, cuºít=%d\n", 
fú°
, 
œ°
, 
cuºít
);

180 i‡((
diff
 = 
	`ödex_föd
(
öd
, 
ñemít
, 
vÆue
, ind->
nodes
[
cuºít
])) == 0)

186 #ifde‡
DEBUG


187 
	`puts
(" match!");

190 
cuºít
 > 0 &&

191 !
	`ödex_föd
(
öd
, 
ñemít
, 
vÆue
, ind->
nodes
[
cuºít
 - 1]))

192 
cuºít
 --;

194 #ifde‡
DEBUG


195 
	`¥ötf
("Ñëu∫ög fú° m©ch=%d\n", 
cuºít
);

202 
öd
->
cur_node
 = 
cuºít
 + 1;

204  (
öd
->
nodes
[
cuºít
]);

206 i‡(
diff
 < 0)

207 
œ°
 = 
cuºít
;

209 
fú°
 = 
cuºít
;

211 #ifde‡
DEBUG


212 
	`¥ötf
(" diff=%d\n", 
diff
);

220 
cuºít
 = 
fú°
; cuºíà<
œ°
; current ++)

221 i‡(!
	`ödex_föd
(
öd
, 
ñemít
, 
vÆue
, ind->
nodes
[
cuºít
]))

227 #ifde‡
DEBUG


228 
	`¥ötf
("Ñëu∫ög o∆y m©ch %d...\n", 
cuºít
);

231 
öd
->
cur_node
 = 
cuºít
 + 1;

233  (
öd
->
nodes
[
cuºít
]);

240 
öd
->
cur_node
 = ind->
num_nodes
;

242 #ifde‡
DEBUG


243 
	`puts
("Ñeturning NULL...");

246  (
NULL
);

248 i‡(
öd
->
cur_node
 < ind->
num_nodes
 &&

249 !
	`ödex_föd
(
öd
, 
ñemít
, 
vÆue
, ind->
nodes
[öd->
cur_node
]))

255 #ifde‡
DEBUG


256 
	`¥ötf
("Ñëu∫ögÇexàm©ch %d...\n", 
öd
->
cur_node
);

259  (
öd
->
nodes
[öd->
cur_node
 ++]);

266 
öd
->
cur_node
 = ind->
num_nodes
;

268 #ifde‡
DEBUG


269 
	`puts
("Ñeturning NULL...");

272  (
NULL
);

273 
	}
}

283 
	$mxmlIndexGëCou¡
(
mxml_ödex_t
 *
öd
)

289 i‡(!
öd
)

296  (
öd
->
num_nodes
);

297 
	}
}

310 
mxml_ödex_t
 *

311 
	$mxmlIndexNew
(
mxml_node_t
 *
node
,

312 c⁄° *
ñemít
,

313 c⁄° *
©å
)

315 
mxml_ödex_t
 *
öd
;

316 
mxml_node_t
 *
cuºít
,

317 **
ãmp
;

324 #ifde‡
DEBUG


325 
	`¥ötf
("mxmlIndexNew(node=%p,Élement=\"%s\",áttr=\"%s\")\n",

326 
node
, 
ñemít
 ?ÉÀmíà: "“uŒ)", 
©å
 ?áttr : "(null)");

329 i‡(!
node
)

330  (
NULL
);

336 i‡((
öd
 = 
	`ˇŒoc
(1, (
mxml_ödex_t
))Ë=
NULL
)

338 
	`mxml_îr‹
("UnableÅoállocate %d bytes for index - %s",

339 (
mxml_ödex_t
), 
	`°ªº‹
(
î∫o
));

340  (
NULL
);

343 i‡(
©å
)

344 
öd
->
©å
 = 
	`°rdup
(attr);

346 i‡(!
ñemít
 && !
©å
)

347 
cuºít
 = 
node
;

349 
cuºít
 = 
	`mxmlFödEÀmít
(
node
,Çode, 
ñemít
, 
©å
, 
NULL
, 
MXML_DESCEND
);

351 
cuºít
)

353 i‡(
öd
->
num_nodes
 >öd->
Æloc_nodes
)

355 i‡(!
öd
->
Æloc_nodes
)

356 
ãmp
 = 
	`mÆloc
(64 * (
mxml_node_t
 *));

358 
ãmp
 = 
	`ªÆloc
(
öd
->
nodes
, (öd->
Æloc_nodes
 + 64Ë* (
mxml_node_t
 *));

360 i‡(!
ãmp
)

366 
	`mxml_îr‹
("UnableÅoállocate %d bytes for index: %s",

367 (
öd
->
Æloc_nodes
 + 64Ë* (
mxml_node_t
 *),

368 
	`°ªº‹
(
î∫o
));

370 
	`mxmlIndexDñëe
(
öd
);

371  (
NULL
);

374 
öd
->
nodes
 = 
ãmp
;

375 
öd
->
Æloc_nodes
 += 64;

378 
öd
->
nodes
[öd->
num_nodes
 ++] = 
cuºít
;

380 
cuºít
 = 
	`mxmlFödEÀmít
(cuºít, 
node
, 
ñemít
, 
©å
, 
NULL
, 
MXML_DESCEND
);

387 #ifde‡
DEBUG


389 
i
;

392 
	`¥ötf
("%dÇode(sËö index.\n\n", 
öd
->
num_nodes
);

394 i‡(
©å
)

396 
	`¥ötf
("Nodê Addªs† EÀmíà %s\n", 
©å
);

397 
	`puts
("-------- -------- -------------- ------------------------------");

399 
i
 = 0; i < 
öd
->
num_nodes
; i ++)

400 
	`¥ötf
("%8d %-8∞ %-14.14† %s\n", 
i
, 
öd
->
nodes
[i],

401 
öd
->
nodes
[
i
]->
vÆue
.
ñemít
.
«me
,

402 
	`mxmlEÀmítGëAâr
(
öd
->
nodes
[
i
], 
©å
));

406 
	`puts
("Node Address Element");

407 
	`puts
("-------- -------- --------------");

409 
i
 = 0; i < 
öd
->
num_nodes
; i ++)

410 
	`¥ötf
("%8d %-8∞ %s\n", 
i
, 
öd
->
nodes
[i],

411 
öd
->
nodes
[
i
]->
vÆue
.
ñemít
.
«me
);

414 
	`putch¨
('\n');

418 i‡(
öd
->
num_nodes
 > 1)

419 
	`ödex_s‹t
(
öd
, 0, ind->
num_nodes
 - 1);

421 #ifde‡
DEBUG


423 
i
;

426 
	`puts
("After sorting:\n");

428 i‡(
©å
)

430 
	`¥ötf
("Nodê Addªs† EÀmíà %s\n", 
©å
);

431 
	`puts
("-------- -------- -------------- ------------------------------");

433 
i
 = 0; i < 
öd
->
num_nodes
; i ++)

434 
	`¥ötf
("%8d %-8∞ %-14.14† %s\n", 
i
, 
öd
->
nodes
[i],

435 
öd
->
nodes
[
i
]->
vÆue
.
ñemít
.
«me
,

436 
	`mxmlEÀmítGëAâr
(
öd
->
nodes
[
i
], 
©å
));

440 
	`puts
("Node Address Element");

441 
	`puts
("-------- -------- --------------");

443 
i
 = 0; i < 
öd
->
num_nodes
; i ++)

444 
	`¥ötf
("%8d %-8∞ %s\n", 
i
, 
öd
->
nodes
[i],

445 
öd
->
nodes
[
i
]->
vÆue
.
ñemít
.
«me
);

448 
	`putch¨
('\n');

456  (
öd
);

457 
	}
}

468 
mxml_node_t
 *

469 
	$mxmlIndexRe£t
(
mxml_ödex_t
 *
öd
)

471 #ifde‡
DEBUG


472 
	`¥ötf
("mxmlIndexRe£t(öd=%p)\n", 
öd
);

479 i‡(!
öd
)

480  (
NULL
);

486 
öd
->
cur_node
 = 0;

492 i‡(
öd
->
num_nodes
)

493  (
öd
->
nodes
[0]);

495  (
NULL
);

496 
	}
}

504 
	$ödex_com∑ª
(
mxml_ödex_t
 *
öd
,

505 
mxml_node_t
 *
fú°
,

506 
mxml_node_t
 *
£c⁄d
)

508 
diff
;

515 i‡((
diff
 = 
	`°rcmp
(
fú°
->
vÆue
.
ñemít
.
«me
,

516 
£c⁄d
->
vÆue
.
ñemít
.
«me
)) != 0)

517  (
diff
);

523 i‡(
öd
->
©å
)

525 i‡((
diff
 = 
	`°rcmp
(
	`mxmlEÀmítGëAâr
(
fú°
, 
öd
->
©å
),

526 
	`mxmlEÀmítGëAâr
(
£c⁄d
, 
öd
->
©å
))) != 0)

527  (
diff
);

535 
	}
}

543 
	$ödex_föd
(
mxml_ödex_t
 *
öd
,

544 c⁄° *
ñemít
,

545 c⁄° *
vÆue
,

546 
mxml_node_t
 *
node
)

548 
diff
;

555 i‡(
ñemít
)

557 i‡((
diff
 = 
	`°rcmp
(
ñemít
, 
node
->
vÆue
.ñemít.
«me
)) != 0)

558  (
diff
);

565 i‡(
vÆue
)

567 i‡((
diff
 = 
	`°rcmp
(
vÆue
, 
	`mxmlEÀmítGëAâr
(
node
, 
öd
->
©å
))) != 0)

568  (
diff
);

576 
	}
}

586 
	$ödex_s‹t
(
mxml_ödex_t
 *
öd
,

587 
À·
,

588 
right
)

590 
mxml_node_t
 *
pivŸ
,

591 *
ãmp
;

592 
ãm∂
,

593 
ãm¥
;

606 
pivŸ
 = 
öd
->
nodes
[
À·
];

608 
ãm∂
 = 
À·
, 
ãm¥
 = 
right
;Åempl <Åempr;)

614 (
ãm∂
 < 
right
) &&

615 
	`ödex_com∑ª
(
öd
, ind->
nodes
[
ãm∂
], 
pivŸ
) <= 0)

616 
ãm∂
 ++;

622 (
ãm¥
 > 
À·
) &&

623 
	`ödex_com∑ª
(
öd
, ind->
nodes
[
ãm¥
], 
pivŸ
) > 0)

624 
ãm¥
 --;

630 i‡(
ãm∂
 < 
ãm¥
)

632 
ãmp
 = 
öd
->
nodes
[
ãm∂
];

633 
öd
->
nodes
[
ãm∂
] = ind->nodes[
ãm¥
];

634 
öd
->
nodes
[
ãm¥
] = 
ãmp
;

643 i‡(
	`ödex_com∑ª
(
öd
, 
pivŸ
, ind->
nodes
[
ãm¥
]) > 0)

645 
öd
->
nodes
[
À·
] = ind->nodes[
ãm¥
];

646 
öd
->
nodes
[
ãm¥
] = 
pivŸ
;

653 i‡(
À·
 < (
ãm¥
 - 1))

654 
	`ödex_s‹t
(
öd
, 
À·
, 
ãm¥
 - 1);

656 
right
 > (
À·
 = 
ãm¥
 + 1));

657 
	}
}

	@/home/gaojing/123/xml/release-2.7/mxml-node.c

40 
	~"c⁄fig.h
"

41 
	~"mxml.h
"

48 
mxml_node_t
 *
mxml_√w
(mxml_node_à*
∑ª¡
, 
mxml_ty≥_t
 
ty≥
);

63 
	$mxmlAdd
(
mxml_node_t
 *
∑ª¡
,

64 
whîe
,

65 
mxml_node_t
 *
chûd
,

66 
mxml_node_t
 *
node
)

68 #ifde‡
DEBUG


69 
	`Ârötf
(
°dîr
, "mxmlAdd’¨ít=%p, whîe=%d, chûd=%p,Çode=%p)\n", 
∑ª¡
,

70 
whîe
, 
chûd
, 
node
);

77 i‡(!
∑ª¡
 || !
node
)

80 #i‡
DEBUG
 > 1

81 
	`Ârötf
(
°dîr
, " BEFORE:Çode->∑ª¡=%p\n", 
node
->
∑ª¡
);

82 i‡(
∑ª¡
)

84 
	`Ârötf
(
°dîr
, " BEFORE:Ö¨ít->chûd=%p\n", 
∑ª¡
->
chûd
);

85 
	`Ârötf
(
°dîr
, " BEFORE:Ö¨ít->œ°_chûd=%p\n", 
∑ª¡
->
œ°_chûd
);

86 
	`Ârötf
(
°dîr
, " BEFORE:Ö¨ít->¥ev=%p\n", 
∑ª¡
->
¥ev
);

87 
	`Ârötf
(
°dîr
, " BEFORE:Ö¨ít->√xt=%p\n", 
∑ª¡
->
√xt
);

95 i‡(
node
->
∑ª¡
)

96 
	`mxmlRemove
(
node
);

102 
node
->
∑ª¡
 =Öarent;

104 
whîe
)

106 
MXML_ADD_BEFORE
 :

107 i‡(!
chûd
 || chûd =
∑ª¡
->child || child->parent !=Öarent)

113 
node
->
√xt
 = 
∑ª¡
->
chûd
;

115 i‡(
∑ª¡
->
chûd
)

116 
∑ª¡
->
chûd
->
¥ev
 = 
node
;

118 
∑ª¡
->
œ°_chûd
 = 
node
;

120 
∑ª¡
->
chûd
 = 
node
;

128 
node
->
√xt
 = 
chûd
;

129 
node
->
¥ev
 = 
chûd
->prev;

131 i‡(
chûd
->
¥ev
)

132 
chûd
->
¥ev
->
√xt
 = 
node
;

134 
∑ª¡
->
chûd
 = 
node
;

136 
chûd
->
¥ev
 = 
node
;

140 
MXML_ADD_AFTER
 :

141 i‡(!
chûd
 || chûd =
∑ª¡
->
œ°_chûd
 || child->parent !=Öarent)

147 
node
->
∑ª¡
 =Öarent;

148 
node
->
¥ev
 = 
∑ª¡
->
œ°_chûd
;

150 i‡(
∑ª¡
->
œ°_chûd
)

151 
∑ª¡
->
œ°_chûd
->
√xt
 = 
node
;

153 
∑ª¡
->
chûd
 = 
node
;

155 
∑ª¡
->
œ°_chûd
 = 
node
;

163 
node
->
¥ev
 = 
chûd
;

164 
node
->
√xt
 = 
chûd
->next;

166 i‡(
chûd
->
√xt
)

167 
chûd
->
√xt
->
¥ev
 = 
node
;

169 
∑ª¡
->
œ°_chûd
 = 
node
;

171 
chûd
->
√xt
 = 
node
;

176 #i‡
DEBUG
 > 1

177 
	`Ârötf
(
°dîr
, " AFTER:Çode->∑ª¡=%p\n", 
node
->
∑ª¡
);

178 i‡(
∑ª¡
)

180 
	`Ârötf
(
°dîr
, " AFTER:Ö¨ít->chûd=%p\n", 
∑ª¡
->
chûd
);

181 
	`Ârötf
(
°dîr
, " AFTER:Ö¨ít->œ°_chûd=%p\n", 
∑ª¡
->
œ°_chûd
);

182 
	`Ârötf
(
°dîr
, " AFTER:Ö¨ít->¥ev=%p\n", 
∑ª¡
->
¥ev
);

183 
	`Ârötf
(
°dîr
, " AFTER:Ö¨ít->√xt=%p\n", 
∑ª¡
->
√xt
);

186 
	}
}

197 
	$mxmlDñëe
(
mxml_node_t
 *
node
)

199 
i
;

202 #ifde‡
DEBUG


203 
	`Ârötf
(
°dîr
, "mxmlDñëe“ode=%p)\n", 
node
);

210 i‡(!
node
)

217 
	`mxmlRemove
(
node
);

223 
node
->
chûd
)

224 
	`mxmlDñëe
(
node
->
chûd
);

230 
node
->
ty≥
)

232 
MXML_ELEMENT
 :

233 i‡(
node
->
vÆue
.
ñemít
.
«me
)

234 
	`‰ì
(
node
->
vÆue
.
ñemít
.
«me
);

236 i‡(
node
->
vÆue
.
ñemít
.
num_©ås
)

238 
i
 = 0; i < 
node
->
vÆue
.
ñemít
.
num_©ås
; i ++)

240 i‡(
node
->
vÆue
.
ñemít
.
©ås
[
i
].
«me
)

241 
	`‰ì
(
node
->
vÆue
.
ñemít
.
©ås
[
i
].
«me
);

242 i‡(
node
->
vÆue
.
ñemít
.
©ås
[
i
].value)

243 
	`‰ì
(
node
->
vÆue
.
ñemít
.
©ås
[
i
].value);

246 
	`‰ì
(
node
->
vÆue
.
ñemít
.
©ås
);

249 
MXML_INTEGER
 :

252 
MXML_OPAQUE
 :

253 i‡(
node
->
vÆue
.
›aque
)

254 
	`‰ì
(
node
->
vÆue
.
›aque
);

256 
MXML_REAL
 :

259 
MXML_TEXT
 :

260 i‡(
node
->
vÆue
.
ãxt
.
°rög
)

261 
	`‰ì
(
node
->
vÆue
.
ãxt
.
°rög
);

263 
MXML_CUSTOM
 :

264 i‡(
node
->
vÆue
.
cu°om
.
d©a
 &&

265 
node
->
vÆue
.
cu°om
.
de°roy
)

266 (*(
node
->
vÆue
.
cu°om
.
de°roy
))“ode->vÆue.cu°om.
d©a
);

276 
	`‰ì
(
node
);

277 
	}
}

291 
	$mxmlGëRefCou¡
(
mxml_node_t
 *
node
)

297 i‡(!
node
)

304  (
node
->
ªf_cou¡
);

305 
	}
}

319 
mxml_node_t
 *

320 
	$mxmlNewCDATA
(
mxml_node_t
 *
∑ª¡
,

321 c⁄° *
d©a
)

323 
mxml_node_t
 *
node
;

326 #ifde‡
DEBUG


327 
	`Ârötf
(
°dîr
, "mxmlNewCDATA(parent=%p, data=\"%s\")\n",

328 
∑ª¡
, 
d©a
 ? data : "(null)");

335 i‡(!
d©a
)

336  (
NULL
);

342 i‡((
node
 = 
	`mxml_√w
(
∑ª¡
, 
MXML_ELEMENT
)Ë!
NULL
)

343 
node
->
vÆue
.
ñemít
.
«me
 = 
	`_mxml_°rdupf
("![CDATA[%s]]", 
d©a
);

345  (
node
);

346 
	}
}

360 
mxml_node_t
 *

361 
	$mxmlNewCu°om
(

362 
mxml_node_t
 *
∑ª¡
,

363 *
d©a
,

364 
mxml_cu°om_de°roy_cb_t
 
de°roy
)

366 
mxml_node_t
 *
node
;

369 #ifde‡
DEBUG


370 
	`Ârötf
(
°dîr
, "mxmlNewCu°om’¨ít=%p, d©a=%p, de°roy=%p)\n", 
∑ª¡
,

371 
d©a
, 
de°roy
);

378 i‡((
node
 = 
	`mxml_√w
(
∑ª¡
, 
MXML_CUSTOM
)Ë!
NULL
)

380 
node
->
vÆue
.
cu°om
.
d©a
 = data;

381 
node
->
vÆue
.
cu°om
.
de°roy
 = destroy;

384  (
node
);

385 
	}
}

396 
mxml_node_t
 *

397 
	$mxmlNewEÀmít
(
mxml_node_t
 *
∑ª¡
,

398 c⁄° *
«me
)

400 
mxml_node_t
 *
node
;

403 #ifde‡
DEBUG


404 
	`Ârötf
(
°dîr
, "mxmlNewEÀmít’¨ít=%p,Çame=\"%s\")\n", 
∑ª¡
,

405 
«me
 ?Çame : "(null)");

412 i‡(!
«me
)

413  (
NULL
);

419 i‡((
node
 = 
	`mxml_√w
(
∑ª¡
, 
MXML_ELEMENT
)Ë!
NULL
)

420 
node
->
vÆue
.
ñemít
.
«me
 = 
	`°rdup
(name);

422  (
node
);

423 
	}
}

434 
mxml_node_t
 *

435 
	$mxmlNewI¡egî
(
mxml_node_t
 *
∑ª¡
,

436 
öãgî
)

438 
mxml_node_t
 *
node
;

441 #ifde‡
DEBUG


442 
	`Ârötf
(
°dîr
, "mxmlNewI¡egî’¨ít=%p, i¡egî=%d)\n", 
∑ª¡
, 
öãgî
);

449 i‡((
node
 = 
	`mxml_√w
(
∑ª¡
, 
MXML_INTEGER
)Ë!
NULL
)

450 
node
->
vÆue
.
öãgî
 = integer;

452  (
node
);

453 
	}
}

465 
mxml_node_t
 *

466 
	$mxmlNewO∑que
(
mxml_node_t
 *
∑ª¡
,

467 c⁄° *
›aque
)

469 
mxml_node_t
 *
node
;

472 #ifde‡
DEBUG


473 
	`Ârötf
(
°dîr
, "mxmlNewO∑que’¨ít=%p, o∑que=\"%s\")\n", 
∑ª¡
,

474 
›aque
 ? opaque : "(null)");

481 i‡(!
›aque
)

482  (
NULL
);

488 i‡((
node
 = 
	`mxml_√w
(
∑ª¡
, 
MXML_OPAQUE
)Ë!
NULL
)

489 
node
->
vÆue
.
›aque
 = 
	`°rdup
(opaque);

491  (
node
);

492 
	}
}

503 
mxml_node_t
 *

504 
	$mxmlNewRól
(
mxml_node_t
 *
∑ª¡
,

505 
ªÆ
)

507 
mxml_node_t
 *
node
;

510 #ifde‡
DEBUG


511 
	`Ârötf
(
°dîr
, "mxmlNewRól’¨ít=%p,Ñól=%g)\n", 
∑ª¡
, 
ªÆ
);

518 i‡((
node
 = 
	`mxml_√w
(
∑ª¡
, 
MXML_REAL
)Ë!
NULL
)

519 
node
->
vÆue
.
ªÆ
 =Ñeal;

521  (
node
);

522 
	}
}

535 
mxml_node_t
 *

536 
	$mxmlNewText
(
mxml_node_t
 *
∑ª¡
,

537 
whôe•a˚
,

538 c⁄° *
°rög
)

540 
mxml_node_t
 *
node
;

543 #ifde‡
DEBUG


544 
	`Ârötf
(
°dîr
, "mxmlNewText(parent=%p, whitespace=%d, string=\"%s\")\n",

545 
∑ª¡
, 
whôe•a˚
, 
°rög
 ? string : "(null)");

552 i‡(!
°rög
)

553  (
NULL
);

559 i‡((
node
 = 
	`mxml_√w
(
∑ª¡
, 
MXML_TEXT
)Ë!
NULL
)

561 
node
->
vÆue
.
ãxt
.
whôe•a˚
 = whitespace;

562 
node
->
vÆue
.
ãxt
.
°rög
 = 
	`°rdup
(string);

565  (
node
);

566 
	}
}

579 
mxml_node_t
 *

580 
	$mxmlNewTextf
(
mxml_node_t
 *
∑ª¡
,

581 
whôe•a˚
,

582 c⁄° *
f‹m©
,

585 
mxml_node_t
 *
node
;

586 
va_li°
 
≠
;

589 #ifde‡
DEBUG


590 
	`Ârötf
(
°dîr
, "mxmlNewTextf(parent=%p, whitespace=%d, format=\"%s\", ...)\n",

591 
∑ª¡
, 
whôe•a˚
, 
f‹m©
 ? format : "(null)");

598 i‡(!
f‹m©
)

599  (
NULL
);

605 i‡((
node
 = 
	`mxml_√w
(
∑ª¡
, 
MXML_TEXT
)Ë!
NULL
)

607 
	`va_°¨t
(
≠
, 
f‹m©
);

609 
node
->
vÆue
.
ãxt
.
whôe•a˚
 = whitespace;

610 
node
->
vÆue
.
ãxt
.
°rög
 = 
	`_mxml_v°rdupf
(
f‹m©
, 
≠
);

612 
	`va_íd
(
≠
);

615  (
node
);

616 
	}
}

627 
	$mxmlRemove
(
mxml_node_t
 *
node
)

629 #ifde‡
DEBUG


630 
	`Ârötf
(
°dîr
, "mxmlRemove“ode=%p)\n", 
node
);

637 i‡(!
node
 || !node->
∑ª¡
)

644 #i‡
DEBUG
 > 1

645 
	`Ârötf
(
°dîr
, " BEFORE:Çode->∑ª¡=%p\n", 
node
->
∑ª¡
);

646 i‡(
node
->
∑ª¡
)

648 
	`Ârötf
(
°dîr
, " BEFORE:Çode->∑ª¡->chûd=%p\n", 
node
->
∑ª¡
->
chûd
);

649 
	`Ârötf
(
°dîr
, " BEFORE:Çode->∑ª¡->œ°_chûd=%p\n", 
node
->
∑ª¡
->
œ°_chûd
);

651 
	`Ârötf
(
°dîr
, " BEFORE:Çode->chûd=%p\n", 
node
->
chûd
);

652 
	`Ârötf
(
°dîr
, " BEFORE:Çode->œ°_chûd=%p\n", 
node
->
œ°_chûd
);

653 
	`Ârötf
(
°dîr
, " BEFORE:Çode->¥ev=%p\n", 
node
->
¥ev
);

654 
	`Ârötf
(
°dîr
, " BEFORE:Çode->√xt=%p\n", 
node
->
√xt
);

657 i‡(
node
->
¥ev
)

658 
node
->
¥ev
->
√xt
 =Çode->next;

660 
node
->
∑ª¡
->
chûd
 =Çode->
√xt
;

662 i‡(
node
->
√xt
)

663 
node
->
√xt
->
¥ev
 =Çode->prev;

665 
node
->
∑ª¡
->
œ°_chûd
 =Çode->
¥ev
;

667 
node
->
∑ª¡
 = 
NULL
;

668 
node
->
¥ev
 = 
NULL
;

669 
node
->
√xt
 = 
NULL
;

671 #i‡
DEBUG
 > 1

672 
	`Ârötf
(
°dîr
, " AFTER:Çode->∑ª¡=%p\n", 
node
->
∑ª¡
);

673 i‡(
node
->
∑ª¡
)

675 
	`Ârötf
(
°dîr
, " AFTER:Çode->∑ª¡->chûd=%p\n", 
node
->
∑ª¡
->
chûd
);

676 
	`Ârötf
(
°dîr
, " AFTER:Çode->∑ª¡->œ°_chûd=%p\n", 
node
->
∑ª¡
->
œ°_chûd
);

678 
	`Ârötf
(
°dîr
, " AFTER:Çode->chûd=%p\n", 
node
->
chûd
);

679 
	`Ârötf
(
°dîr
, " AFTER:Çode->œ°_chûd=%p\n", 
node
->
œ°_chûd
);

680 
	`Ârötf
(
°dîr
, " AFTER:Çode->¥ev=%p\n", 
node
->
¥ev
);

681 
	`Ârötf
(
°dîr
, " AFTER:Çode->√xt=%p\n", 
node
->
√xt
);

683 
	}
}

695 
mxml_node_t
 *

696 
	$mxmlNewXML
(c⁄° *
vîsi⁄
)

698 
ñemít
[1024];

701 
	`¢¥ötf
(
ñemít
, (element), "?xml version=\"%s\"Éncoding=\"utf-8\"?",

702 
vîsi⁄
 ? version : "1.0");

704  (
	`mxmlNewEÀmít
(
NULL
, 
ñemít
));

705 
	}
}

718 
	$mxmlRñó£
(
mxml_node_t
 *
node
)

720 i‡(
node
)

722 i‡((-- 
node
->
ªf_cou¡
) <= 0)

724 
	`mxmlDñëe
(
node
);

728  (
node
->
ªf_cou¡
);

732 
	}
}

742 
	$mxmlRëaö
(
mxml_node_t
 *
node
)

744 i‡(
node
)

745  (++ 
node
->
ªf_cou¡
);

748 
	}
}

755 
mxml_node_t
 *

756 
	$mxml_√w
(
mxml_node_t
 *
∑ª¡
,

757 
mxml_ty≥_t
 
ty≥
)

759 
mxml_node_t
 *
node
;

762 #i‡
DEBUG
 > 1

763 
	`Ârötf
(
°dîr
, "mxml_√w’¨ít=%p,Åy≥=%d)\n", 
∑ª¡
, 
ty≥
);

770 i‡((
node
 = 
	`ˇŒoc
(1, (
mxml_node_t
))Ë=
NULL
)

772 #i‡
DEBUG
 > 1

773 
	`Âuts
("Ñëu∫ög NULL\n", 
°dîr
);

776  (
NULL
);

779 #i‡
DEBUG
 > 1

780 
	`Ârötf
(
°dîr
, "Ñëu∫ög %p\n", 
node
);

787 
node
->
ty≥
 =Åype;

788 
node
->
ªf_cou¡
 = 1;

794 i‡(
∑ª¡
)

795 
	`mxmlAdd
(
∑ª¡
, 
MXML_ADD_AFTER
, 
MXML_ADD_TO_PARENT
, 
node
);

801  (
node
);

802 
	}
}

	@/home/gaojing/123/xml/release-2.7/mxml-private.c

29 
	~"mxml-¥iv©e.h
"

46 #i‡
deföed
(
__sun
Ë|| deföed(
_AIX
)

47 #¥agm®
föi
(
_mxml_föi
)

48 
	#_MXML_FINI
 
_mxml_föi


	)

49 #ñi‡
deföed
(
__hpux
)

50 #¥agm®
FINI
 
_mxml_föi


51 
	#_MXML_FINI
 
_mxml_föi


	)

52 #ñi‡
deföed
(
__GNUC__
)

53 
	#_MXML_FINI
 
	`__©åibuã
((
de°ru˘‹
)Ë
_mxml_föi


	)

55 
	#_MXML_FINI
 
_föi


	)

64 
	$mxml_îr‹
(c⁄° *
f‹m©
,

67 
va_li°
 
≠
;

68 
s
[1024];

69 
_mxml_globÆ_t
 *
globÆ
 = 
	`_mxml_globÆ
();

77 i‡(!
f‹m©
)

84 
	`va_°¨t
(
≠
, 
f‹m©
);

86 
	`v¢¥ötf
(
s
, (s), 
f‹m©
, 
≠
);

88 
	`va_íd
(
≠
);

94 i‡(
globÆ
->
îr‹_cb
)

95 (*
globÆ
->
îr‹_cb
)(
s
);

97 
	`Ârötf
(
°dîr
, "mxml: %s\n", 
s
);

98 
	}
}

105 
mxml_ty≥_t


106 
	$mxml_ign‹e_cb
(
mxml_node_t
 *
node
)

108 ()
node
;

110  (
MXML_IGNORE
);

111 
	}
}

118 
mxml_ty≥_t


119 
	$mxml_öãgî_cb
(
mxml_node_t
 *
node
)

121 ()
node
;

123  (
MXML_INTEGER
);

124 
	}
}

131 
mxml_ty≥_t


132 
	$mxml_›aque_cb
(
mxml_node_t
 *
node
)

134 ()
node
;

136  (
MXML_OPAQUE
);

137 
	}
}

144 
mxml_ty≥_t


145 
	$mxml_ªÆ_cb
(
mxml_node_t
 *
node
)

147 ()
node
;

149  (
MXML_REAL
);

150 
	}
}

153 #ifde‡
HAVE_PTHREAD_H


154 
	~<±hªad.h
>

156 
±hªad_key_t
 
	g_mxml_key
 = -1;

157 
±hªad_⁄˚_t
 
	g_mxml_key_⁄˚
 = 
PTHREAD_ONCE_INIT
;

159 
_mxml_öô
();

160 
_mxml_de°ru˘‹
(*
g
);

168 
	$_mxml_de°ru˘‹
(*
g
)

170 
	`‰ì
(
g
);

171 
	}
}

179 
	$_MXML_FINI
()

181 
_mxml_globÆ_t
 *
globÆ
;

184 i‡(
_mxml_key
 != -1)

186 i‡((
globÆ
 = (
_mxml_globÆ_t
 *)
	`±hªad_gë•ecific
(
_mxml_key
)Ë!
NULL
)

187 
	`_mxml_de°ru˘‹
(
globÆ
);

189 
	`±hªad_key_dñëe
(
_mxml_key
);

190 
_mxml_key
 = -1;

192 
	}
}

199 
_mxml_globÆ_t
 *

200 
	$_mxml_globÆ
()

202 
_mxml_globÆ_t
 *
globÆ
;

205 
	`±hªad_⁄˚
(&
_mxml_key_⁄˚
, 
_mxml_öô
);

207 i‡((
globÆ
 = (
_mxml_globÆ_t
 *)
	`±hªad_gë•ecific
(
_mxml_key
)Ë=
NULL
)

209 
globÆ
 = (
_mxml_globÆ_t
 *)
	`ˇŒoc
(1, (_mxml_global_t));

210 
	`±hªad_£t•ecific
(
_mxml_key
, 
globÆ
);

212 
globÆ
->
num_ítôy_cbs
 = 1;

213 
globÆ
->
ítôy_cbs
[0] = 
_mxml_ítôy_cb
;

214 
globÆ
->
wøp
 = 72;

217  (
globÆ
);

218 
	}
}

226 
	$_mxml_öô
()

228 
	`±hªad_key_¸óã
(&
_mxml_key
, 
_mxml_de°ru˘‹
);

229 
	}
}

232 #ñi‡
deföed
(
WIN32
Ë&& deföed(
MXML1_EXPORTS
)

233 
	~<wödows.h
>

235 
DWORD
 
	g_mxml_és_ödex
;

242 
BOOL
 
WINAPI


243 
	$DŒMaö
(
HINSTANCE
 
hö°
,

244 
DWORD
 
ªas⁄
,

245 
LPVOID
 
ª£rved
)

247 
_mxml_globÆ_t
 *
globÆ
;

250 ()
hö°
;

251 ()
ª£rved
;

253 
ªas⁄
)

255 
DLL_PROCESS_ATTACH
 :

256 i‡((
_mxml_és_ödex
 = 
	`TlsAŒoc
()Ë=
TLS_OUT_OF_INDEXES
)

257  (
FALSE
);

260 
DLL_THREAD_DETACH
 :

261 i‡((
globÆ
 = (
_mxml_globÆ_t
 *)
	`TlsGëVÆue
(
_mxml_és_ödex
)Ë!
NULL
)

262 
	`‰ì
(
globÆ
);

265 
DLL_PROCESS_DETACH
 :

266 i‡((
globÆ
 = (
_mxml_globÆ_t
 *)
	`TlsGëVÆue
(
_mxml_és_ödex
)Ë!
NULL
)

267 
	`‰ì
(
globÆ
);

269 
	`TlsFªe
(
_mxml_és_ödex
);

276  (
TRUE
);

277 
	}
}

284 
_mxml_globÆ_t
 *

285 
	$_mxml_globÆ
()

287 
_mxml_globÆ_t
 *
globÆ
;

290 i‡((
globÆ
 = (
_mxml_globÆ_t
 *)
	`TlsGëVÆue
(
_mxml_és_ödex
)Ë=
NULL
)

292 
globÆ
 = (
_mxml_globÆ_t
 *)
	`ˇŒoc
(1, (_mxml_global_t));

294 
globÆ
->
num_ítôy_cbs
 = 1;

295 
globÆ
->
ítôy_cbs
[0] = 
_mxml_ítôy_cb
;

296 
globÆ
->
wøp
 = 72;

298 
	`TlsSëVÆue
(
_mxml_és_ödex
, (
LPVOID
)
globÆ
);

301  (
globÆ
);

302 
	}
}

310 
_mxml_globÆ_t
 *

311 
	$_mxml_globÆ
()

313 
_mxml_globÆ_t
 
globÆ
 =

315 
NULL
,

317 { 
_mxml_ítôy_cb
 },

319 
NULL
,

320 
NULL


324  (&
globÆ
);

325 
	}
}

	@/home/gaojing/123/xml/release-2.7/mxml-private.h

21 
	~"c⁄fig.h
"

22 
	~"mxml.h
"

29 
	s_mxml_globÆ_s


31 (*
	mîr‹_cb
)(const *);

32 
	mnum_ítôy_cbs
;

33 (*
	mítôy_cbs
[100])(c⁄° *
	m«me
);

34 
	mwøp
;

35 
mxml_cu°om_lﬂd_cb_t
 
	mcu°om_lﬂd_cb
;

36 
mxml_cu°om_ßve_cb_t
 
	mcu°om_ßve_cb
;

37 } 
	t_mxml_globÆ_t
;

44 
_mxml_globÆ_t
 *
_mxml_globÆ
();

45 
_mxml_ítôy_cb
(c⁄° *
«me
);

	@/home/gaojing/123/xml/release-2.7/mxml-search.c

29 
	~"c⁄fig.h
"

30 
	~"mxml.h
"

46 
mxml_node_t
 *

47 
	$mxmlFödEÀmít
(
mxml_node_t
 *
node
,

48 
mxml_node_t
 *
t›
,

49 c⁄° *
«me
,

50 c⁄° *
©å
,

51 c⁄° *
vÆue
,

52 
des˚nd
)

54 c⁄° *
ãmp
;

61 i‡(!
node
 || !
t›
 || (!
©å
 && 
vÆue
))

62  (
NULL
);

68 
node
 = 
	`mxmlWÆkNext
“ode, 
t›
, 
des˚nd
);

74 
node
 !
NULL
)

80 i‡(
node
->
ty≥
 =
MXML_ELEMENT
 &&

81 
node
->
vÆue
.
ñemít
.
«me
 &&

82 (!
«me
 || !
	`°rcmp
(
node
->
vÆue
.
ñemít
.name,Çame)))

88 i‡(!
©å
)

89  (
node
);

95 i‡((
ãmp
 = 
	`mxmlEÀmítGëAâr
(
node
, 
©å
)Ë!
NULL
)

101 i‡(!
vÆue
 || !
	`°rcmp
(vÆue, 
ãmp
))

102  (
node
);

110 i‡(
des˚nd
 =
MXML_DESCEND
)

111 
node
 = 
	`mxmlWÆkNext
“ode, 
t›
, 
MXML_DESCEND
);

113 
node
 =Çode->
√xt
;

116  (
NULL
);

117 
	}
}

133 
mxml_node_t
 *

134 
	$mxmlFödP©h
(
mxml_node_t
 *
t›
,

135 c⁄° *
∑th
)

137 
mxml_node_t
 *
node
;

138 
ñemít
[256];

139 c⁄° *
∑th£p
;

140 
des˚nd
;

147 i‡(!
t›
 || !
∑th
 || !*path)

148  (
NULL
);

154 
node
 = 
t›
;

155 *
∑th
)

161 i‡(!
	`°∫cmp
(
∑th
, "*/", 2))

163 
∑th
 += 2;

164 
des˚nd
 = 
MXML_DESCEND
;

167 
des˚nd
 = 
MXML_DESCEND_FIRST
;

173 i‡((
∑th£p
 = 
	`°rchr
(
∑th
, '/')Ë=
NULL
)

174 
∑th£p
 = 
∑th
 + 
	`°æí
(path);

176 i‡(
∑th£p
 =
∑th
 || (∑th£∞-Ö©hË>(
ñemít
))

177  (
NULL
);

179 
	`mem˝y
(
ñemít
, 
∑th
, 
∑th£p
 -Öath);

180 
ñemít
[
∑th£p
 - 
∑th
] = '\0';

182 i‡(*
∑th£p
)

183 
∑th
 = 
∑th£p
 + 1;

185 
∑th
 = 
∑th£p
;

191 i‡((
node
 = 
	`mxmlFödEÀmít
“ode,Çode, 
ñemít
, 
NULL
, NULL,

192 
des˚nd
)Ë=
NULL
)

193  (
NULL
);

200 i‡(
node
->
chûd
 &&Çode->chûd->
ty≥
 !
MXML_ELEMENT
)

201  (
node
->
chûd
);

203  (
node
);

204 
	}
}

215 
mxml_node_t
 *

216 
	$mxmlWÆkNext
(
mxml_node_t
 *
node
,

217 
mxml_node_t
 *
t›
,

218 
des˚nd
)

220 i‡(!
node
)

221  (
NULL
);

222 i‡(
node
->
chûd
 && 
des˚nd
)

223  (
node
->
chûd
);

224 i‡(
node
 =
t›
)

225  (
NULL
);

226 i‡(
node
->
√xt
)

227  (
node
->
√xt
);

228 i‡(
node
->
∑ª¡
 &&Çode->∑ª¡ !
t›
)

230 
node
 =Çode->
∑ª¡
;

232 !
node
->
√xt
)

233 i‡(
node
->
∑ª¡
 =
t›
 || !node->parent)

234  (
NULL
);

236 
node
 =Çode->
∑ª¡
;

238  (
node
->
√xt
);

241  (
NULL
);

242 
	}
}

253 
mxml_node_t
 *

254 
	$mxmlWÆkPªv
(
mxml_node_t
 *
node
,

255 
mxml_node_t
 *
t›
,

256 
des˚nd
)

258 i‡(!
node
 ||Çodê=
t›
)

259  (
NULL
);

260 i‡(
node
->
¥ev
)

262 i‡(
node
->
¥ev
->
œ°_chûd
 && 
des˚nd
)

268 
node
 =Çode->
¥ev
->
œ°_chûd
;

270 
node
->
œ°_chûd
)

271 
node
 =Çode->
œ°_chûd
;

273  (
node
);

276  (
node
->
¥ev
);

278 i‡(
node
->
∑ª¡
 !
t›
)

279  (
node
->
∑ª¡
);

281  (
NULL
);

282 
	}
}

	@/home/gaojing/123/xml/release-2.7/mxml-set.c

33 
	~"c⁄fig.h
"

34 
	~"mxml.h
"

46 
	$mxmlSëCDATA
(
mxml_node_t
 *
node
,

47 c⁄° *
d©a
)

53 i‡(
node
 &&Çode->
ty≥
 =
MXML_ELEMENT
 &&

54 
	`°∫cmp
(
node
->
vÆue
.
ñemít
.
«me
, "![CDATA[", 8) &&

55 
node
->
chûd
 &&Çode->chûd->
ty≥
 =
MXML_ELEMENT
 &&

56 !
	`°∫cmp
(
node
->
chûd
->
vÆue
.
ñemít
.
«me
, "![CDATA[", 8))

57 
node
 =Çode->
chûd
;

59 i‡(!
node
 ||Çode->
ty≥
 !
MXML_ELEMENT
 || !
d©a
 ||

60 
	`°∫cmp
(
node
->
vÆue
.
ñemít
.
«me
, "![CDATA[", 8))

67 i‡(
node
->
vÆue
.
ñemít
.
«me
)

68 
	`‰ì
(
node
->
vÆue
.
ñemít
.
«me
);

70 
node
->
vÆue
.
ñemít
.
«me
 = 
	`_mxml_°rdupf
("![CDATA[%s]]", 
d©a
);

73 
	}
}

85 
	$mxmlSëCu°om
(

86 
mxml_node_t
 *
node
,

87 *
d©a
,

88 
mxml_cu°om_de°roy_cb_t
 
de°roy
)

94 i‡(
node
 &&Çode->
ty≥
 =
MXML_ELEMENT
 &&

95 
node
->
chûd
 &&Çode->chûd->
ty≥
 =
MXML_CUSTOM
)

96 
node
 =Çode->
chûd
;

98 i‡(!
node
 ||Çode->
ty≥
 !
MXML_CUSTOM
)

105 i‡(
node
->
vÆue
.
cu°om
.
d©a
 &&Çode->vÆue.cu°om.
de°roy
)

106 (*(
node
->
vÆue
.
cu°om
.
de°roy
))“ode->vÆue.cu°om.
d©a
);

108 
node
->
vÆue
.
cu°om
.
d©a
 = data;

109 
node
->
vÆue
.
cu°om
.
de°roy
 = destroy;

112 
	}
}

122 
	$mxmlSëEÀmít
(
mxml_node_t
 *
node
,

123 c⁄° *
«me
)

129 i‡(!
node
 ||Çode->
ty≥
 !
MXML_ELEMENT
 || !
«me
)

136 i‡(
node
->
vÆue
.
ñemít
.
«me
)

137 
	`‰ì
(
node
->
vÆue
.
ñemít
.
«me
);

139 
node
->
vÆue
.
ñemít
.
«me
 = 
	`°rdup
(name);

142 
	}
}

152 
	$mxmlSëI¡egî
(
mxml_node_t
 *
node
,

153 
öãgî
)

159 i‡(
node
 &&Çode->
ty≥
 =
MXML_ELEMENT
 &&

160 
node
->
chûd
 &&Çode->chûd->
ty≥
 =
MXML_INTEGER
)

161 
node
 =Çode->
chûd
;

163 i‡(!
node
 ||Çode->
ty≥
 !
MXML_INTEGER
)

170 
node
->
vÆue
.
öãgî
 = integer;

173 
	}
}

183 
	$mxmlSëO∑que
(
mxml_node_t
 *
node
,

184 c⁄° *
›aque
)

190 i‡(
node
 &&Çode->
ty≥
 =
MXML_ELEMENT
 &&

191 
node
->
chûd
 &&Çode->chûd->
ty≥
 =
MXML_OPAQUE
)

192 
node
 =Çode->
chûd
;

194 i‡(!
node
 ||Çode->
ty≥
 !
MXML_OPAQUE
 || !
›aque
)

201 i‡(
node
->
vÆue
.
›aque
)

202 
	`‰ì
(
node
->
vÆue
.
›aque
);

204 
node
->
vÆue
.
›aque
 = 
	`°rdup
(opaque);

207 
	}
}

217 
	$mxmlSëRól
(
mxml_node_t
 *
node
,

218 
ªÆ
)

224 i‡(
node
 &&Çode->
ty≥
 =
MXML_ELEMENT
 &&

225 
node
->
chûd
 &&Çode->chûd->
ty≥
 =
MXML_REAL
)

226 
node
 =Çode->
chûd
;

228 i‡(!
node
 ||Çode->
ty≥
 !
MXML_REAL
)

235 
node
->
vÆue
.
ªÆ
 =Ñeal;

238 
	}
}

248 
	$mxmlSëText
(
mxml_node_t
 *
node
,

249 
whôe•a˚
,

250 c⁄° *
°rög
)

256 i‡(
node
 &&Çode->
ty≥
 =
MXML_ELEMENT
 &&

257 
node
->
chûd
 &&Çode->chûd->
ty≥
 =
MXML_TEXT
)

258 
node
 =Çode->
chûd
;

260 i‡(!
node
 ||Çode->
ty≥
 !
MXML_TEXT
 || !
°rög
)

267 i‡(
node
->
vÆue
.
ãxt
.
°rög
)

268 
	`‰ì
(
node
->
vÆue
.
ãxt
.
°rög
);

270 
node
->
vÆue
.
ãxt
.
whôe•a˚
 = whitespace;

271 
node
->
vÆue
.
ãxt
.
°rög
 = 
	`°rdup
(string);

274 
	}
}

284 
	$mxmlSëTextf
(
mxml_node_t
 *
node
,

285 
whôe•a˚
,

286 c⁄° *
f‹m©
,

289 
va_li°
 
≠
;

296 i‡(
node
 &&Çode->
ty≥
 =
MXML_ELEMENT
 &&

297 
node
->
chûd
 &&Çode->chûd->
ty≥
 =
MXML_TEXT
)

298 
node
 =Çode->
chûd
;

300 i‡(!
node
 ||Çode->
ty≥
 !
MXML_TEXT
 || !
f‹m©
)

307 i‡(
node
->
vÆue
.
ãxt
.
°rög
)

308 
	`‰ì
(
node
->
vÆue
.
ãxt
.
°rög
);

310 
	`va_°¨t
(
≠
, 
f‹m©
);

312 
node
->
vÆue
.
ãxt
.
whôe•a˚
 = whitespace;

313 
node
->
vÆue
.
ãxt
.
°rög
 = 
	`_mxml_°rdupf
(
f‹m©
, 
≠
);

315 
	`va_íd
(
≠
);

318 
	}
}

328 
	$mxmlSëU£rD©a
(
mxml_node_t
 *
node
,

329 *
d©a
)

335 i‡(!
node
)

342 
node
->
u£r_d©a
 = 
d©a
;

344 
	}
}

	@/home/gaojing/123/xml/release-2.7/mxml-string.c

29 
	~"c⁄fig.h
"

37 #i‚de‡
va_c›y


38 #ifde‡
__va_c›y


39 
	#va_c›y
(
d°
,
§c
Ë
	`__va_c›y
(d°,§c)

	)

41 
	#va_c›y
(
d°
,
§c
Ë
	`mem˝y
(&d°, &§c, (
va_li°
))

	)

46 #i‚de‡
HAVE_SNPRINTF


52 
	$_mxml_¢¥ötf
(*
buf„r
,

53 
size_t
 
bufsize
,

54 c⁄° *
f‹m©
,

57 
va_li°
 
≠
;

58 
byãs
;

61 
	`va_°¨t
(
≠
, 
f‹m©
);

62 
byãs
 = 
	`v¢¥ötf
(
buf„r
, 
bufsize
, 
f‹m©
, 
≠
);

63 
	`va_íd
(
≠
);

65  (
byãs
);

66 
	}
}

74 #i‚de‡
HAVE_STRDUP


76 
	$_mxml_°rdup
(c⁄° *
s
)

78 *
t
;

81 i‡(
s
 =
NULL
)

82  (
NULL
);

84 i‡((
t
 = 
	`mÆloc
(
	`°æí
(
s
Ë+ 1)Ë=
NULL
)

85  (
NULL
);

87  (
	`°r˝y
(
t
, 
s
));

88 
	}
}

97 
	$_mxml_°rdupf
(c⁄° *
f‹m©
,

100 
va_li°
 
≠
;

101 *
s
;

109 
	`va_°¨t
(
≠
, 
f‹m©
);

110 
s
 = 
	`_mxml_v°rdupf
(
f‹m©
, 
≠
);

111 
	`va_íd
(
≠
);

113  (
s
);

114 
	}
}

117 #i‚de‡
HAVE_VSNPRINTF


123 
	$_mxml_v¢¥ötf
(*
buf„r
,

124 
size_t
 
bufsize
,

125 c⁄° *
f‹m©
,

126 
va_li°
 
≠
)

128 *
buÂå
,

129 *
bu„nd
,

130 
sign
,

131 
size
,

132 
ty≥
;

133 
width
,

134 
¥ec
;

135 
tf‹m©
[100],

136 *
çå
,

137 
ãmp
[1024];

138 *
s
;

139 
¶í
;

140 
byãs
;

147 
buÂå
 = 
buf„r
;

148 
bu„nd
 = 
buf„r
 + 
bufsize
 - 1;

149 
byãs
 = 0;

151 *
f‹m©
)

153 i‡(*
f‹m©
 == '%')

155 
çå
 = 
tf‹m©
;

156 *
çå
++ = *
f‹m©
++;

158 i‡(*
f‹m©
 == '%')

160 i‡(
buÂå
 && buÂå < 
bu„nd
Ë*buÂå++ = *
f‹m©
;

161 
byãs
 ++;

162 
f‹m©
 ++;

165 i‡(
	`°rchr
(" -+#\'", *
f‹m©
))

167 *
çå
++ = *
f‹m©
;

168 
sign
 = *
f‹m©
++;

171 
sign
 = 0;

173 i‡(*
f‹m©
 == '*')

179 
f‹m©
 ++;

180 
width
 = 
	`va_¨g
(
≠
, );

182 
	`¢¥ötf
(
çå
, (
tf‹m©
Ë- (çå -Åf‹m©), "%d", 
width
);

183 
çå
 +
	`°æí
(tptr);

187 
width
 = 0;

189 
	`isdigô
(*
f‹m©
 & 255))

191 i‡(
çå
 < (
tf‹m©
 + (tformat) - 1))

192 *
çå
++ = *
f‹m©
;

194 
width
 = width * 10 + *
f‹m©
++ - '0';

198 i‡(*
f‹m©
 == '.')

200 i‡(
çå
 < (
tf‹m©
 + (tformat) - 1))

201 *
çå
++ = *
f‹m©
;

203 
f‹m©
 ++;

205 i‡(*
f‹m©
 == '*')

211 
f‹m©
 ++;

212 
¥ec
 = 
	`va_¨g
(
≠
, );

214 
	`¢¥ötf
(
çå
, (
tf‹m©
Ë- (çå -Åf‹m©), "%d", 
¥ec
);

215 
çå
 +
	`°æí
(tptr);

219 
¥ec
 = 0;

221 
	`isdigô
(*
f‹m©
 & 255))

223 i‡(
çå
 < (
tf‹m©
 + (tformat) - 1))

224 *
çå
++ = *
f‹m©
;

226 
¥ec
 =Öª¯* 10 + *
f‹m©
++ - '0';

231 
¥ec
 = -1;

233 i‡(*
f‹m©
 == 'l' && format[1] == 'l')

235 
size
 = 'L';

237 i‡(
çå
 < (
tf‹m©
 + (tformat) - 2))

239 *
çå
++ = 'l';

240 *
çå
++ = 'l';

243 
f‹m©
 += 2;

245 i‡(*
f‹m©
 == 'h' || *format == 'l' || *format == 'L')

247 i‡(
çå
 < (
tf‹m©
 + (tformat) - 1))

248 *
çå
++ = *
f‹m©
;

250 
size
 = *
f‹m©
++;

253 i‡(!*
f‹m©
)

256 i‡(
çå
 < (
tf‹m©
 + (tformat) - 1))

257 *
çå
++ = *
f‹m©
;

259 
ty≥
 = *
f‹m©
++;

260 *
çå
 = '\0';

262 
ty≥
)

269 i‡((
width
 + 2Ë> (
ãmp
))

272 
	`•rötf
(
ãmp
, 
tf‹m©
, 
	`va_¨g
(
≠
, ));

274 
byãs
 +
	`°æí
(
ãmp
);

276 i‡(
buÂå
)

278 i‡((
buÂå
 + 
	`°æí
(
ãmp
)Ë> 
bu„nd
)

280 
	`°∫˝y
(
buÂå
, 
ãmp
, (
size_t
)(
bu„nd
 - bufptr));

281 
buÂå
 = 
bu„nd
;

285 
	`°r˝y
(
buÂå
, 
ãmp
);

286 
buÂå
 +
	`°æí
(
ãmp
);

299 i‡((
width
 + 2Ë> (
ãmp
))

302 #ifde‡
HAVE_LONG_LONG


303 i‡(
size
 == 'L')

304 
	`•rötf
(
ãmp
, 
tf‹m©
, 
	`va_¨g
(
≠
, ));

307 
	`•rötf
(
ãmp
, 
tf‹m©
, 
	`va_¨g
(
≠
, ));

309 
byãs
 +
	`°æí
(
ãmp
);

311 i‡(
buÂå
)

313 i‡((
buÂå
 + 
	`°æí
(
ãmp
)Ë> 
bu„nd
)

315 
	`°∫˝y
(
buÂå
, 
ãmp
, (
size_t
)(
bu„nd
 - bufptr));

316 
buÂå
 = 
bu„nd
;

320 
	`°r˝y
(
buÂå
, 
ãmp
);

321 
buÂå
 +
	`°æí
(
ãmp
);

327 i‡((
width
 + 2Ë> (
ãmp
))

330 
	`•rötf
(
ãmp
, 
tf‹m©
, 
	`va_¨g
(
≠
, *));

332 
byãs
 +
	`°æí
(
ãmp
);

334 i‡(
buÂå
)

336 i‡((
buÂå
 + 
	`°æí
(
ãmp
)Ë> 
bu„nd
)

338 
	`°∫˝y
(
buÂå
, 
ãmp
, (
size_t
)(
bu„nd
 - bufptr));

339 
buÂå
 = 
bu„nd
;

343 
	`°r˝y
(
buÂå
, 
ãmp
);

344 
buÂå
 +
	`°æí
(
ãmp
);

350 
byãs
 +
width
;

352 i‡(
buÂå
)

354 i‡(
width
 <= 1)

355 *
buÂå
++ = 
	`va_¨g
(
≠
, );

358 i‡((
buÂå
 + 
width
Ë> 
bu„nd
)

359 
width
 = 
bu„nd
 - 
buÂå
;

361 
	`mem˝y
(
buÂå
, 
	`va_¨g
(
≠
, *), (
size_t
)
width
);

362 
buÂå
 +
width
;

368 i‡((
s
 = 
	`va_¨g
(
≠
, *)Ë=
NULL
)

369 
s
 = "(null)";

371 
¶í
 = 
	`°æí
(
s
);

372 i‡(
¶í
 > 
width
 && 
¥ec
 != width)

373 
width
 = 
¶í
;

375 
byãs
 +
width
;

377 i‡(
buÂå
)

379 i‡((
buÂå
 + 
width
Ë> 
bu„nd
)

380 
width
 = 
bu„nd
 - 
buÂå
;

382 i‡(
¶í
 > 
width
)

383 
¶í
 = 
width
;

385 i‡(
sign
 == '-')

387 
	`°∫˝y
(
buÂå
, 
s
, (
size_t
)
¶í
);

388 
	`mem£t
(
buÂå
 + 
¶í
, ' ', (
size_t
)(
width
 - slen));

392 
	`mem£t
(
buÂå
, ' ', (
size_t
)(
width
 - 
¶í
));

393 
	`°∫˝y
(
buÂå
 + 
width
 - 
¶í
, 
s
, (
size_t
)slen);

396 
buÂå
 +
width
;

401 *(
	`va_¨g
(
≠
, *)Ë
byãs
;

407 
byãs
 ++;

409 i‡(
buÂå
 && buÂå < 
bu„nd
)

410 *
buÂå
++ = *
f‹m©
;

412 
f‹m©
 ++;

420 *
buÂå
 = '\0';

422  (
byãs
);

423 
	}
}

432 
	$_mxml_v°rdupf
(c⁄° *
f‹m©
,

433 
va_li°
 
≠
)

435 
byãs
;

436 *
buf„r
,

437 
ãmp
[256];

438 
va_li°
 
≠c›y
;

446 
	`va_c›y
(
≠c›y
, 
≠
);

447 
byãs
 = 
	`v¢¥ötf
(
ãmp
, —emp), 
f‹m©
, 
≠c›y
);

449 i‡(
byãs
 < (
ãmp
))

455  (
	`°rdup
(
ãmp
));

463 i‡((
buf„r
 = 
	`ˇŒoc
(1, 
byãs
 + 1)Ë!
NULL
)

464 
	`v¢¥ötf
(
buf„r
, 
byãs
 + 1, 
f‹m©
, 
≠
);

470  (
buf„r
);

471 
	}
}

	@/home/gaojing/123/xml/release-2.7/mxml.h

21 #i‚de‡
_mxml_h_


22 
	#_mxml_h_


	)

28 
	~<°dio.h
>

29 
	~<°dlib.h
>

30 
	~<°rög.h
>

31 
	~<˘y≥.h
>

32 
	~<î∫o.h
>

39 
	#MXML_TAB
 8

	)

41 
	#MXML_NO_CALLBACK
 0

	)

42 
	#MXML_INTEGER_CALLBACK
 
mxml_öãgî_cb


	)

44 
	#MXML_OPAQUE_CALLBACK
 
mxml_›aque_cb


	)

46 
	#MXML_REAL_CALLBACK
 
mxml_ªÆ_cb


	)

48 
	#MXML_TEXT_CALLBACK
 0

	)

49 
	#MXML_IGNORE_CALLBACK
 
mxml_ign‹e_cb


	)

52 
	#MXML_NO_PARENT
 0

	)

54 
	#MXML_DESCEND
 1

	)

55 
	#MXML_NO_DESCEND
 0

	)

56 
	#MXML_DESCEND_FIRST
 -1

	)

58 
	#MXML_WS_BEFORE_OPEN
 0

	)

59 
	#MXML_WS_AFTER_OPEN
 1

	)

60 
	#MXML_WS_BEFORE_CLOSE
 2

	)

61 
	#MXML_WS_AFTER_CLOSE
 3

	)

63 
	#MXML_ADD_BEFORE
 0

	)

64 
	#MXML_ADD_AFTER
 1

	)

65 
	#MXML_ADD_TO_PARENT
 
NULL


	)

72 
mxml_ßx_evít_e


74 
	gMXML_SAX_CDATA
,

75 
	gMXML_SAX_COMMENT
,

76 
	gMXML_SAX_DATA
,

77 
	gMXML_SAX_DIRECTIVE
,

78 
	gMXML_SAX_ELEMENT_CLOSE
,

79 
	gMXML_SAX_ELEMENT_OPEN


80 } 
	tmxml_ßx_evít_t
;

82 
mxml_ty≥_e


84 
	gMXML_IGNORE
 = -1,

85 
	gMXML_ELEMENT
,

86 
	gMXML_INTEGER
,

87 
	gMXML_OPAQUE
,

88 
	gMXML_REAL
,

89 
	gMXML_TEXT
,

90 
	gMXML_CUSTOM


91 } 
	tmxml_ty≥_t
;

93 (*
	tmxml_cu°om_de°roy_cb_t
)(*);

96 (*
	tmxml_îr‹_cb_t
)(const *);

99 
mxml_©å_s


101 *
«me
;

102 *
vÆue
;

103 
	}
} 
	tmxml_©å_t
;

105 
mxml_ñemít_s


107 *
	g«me
;

108 
	gnum_©ås
;

109 
mxml_©å_t
 *
	g©ås
;

110 } 
	tmxml_ñemít_t
;

112 
mxml_ãxt_s


114 
	gwhôe•a˚
;

115 *
	g°rög
;

116 } 
	tmxml_ãxt_t
;

118 
mxml_cu°om_s


120 *
	gd©a
;

121 
mxml_cu°om_de°roy_cb_t
 
	gde°roy
;

122 } 
	tmxml_cu°om_t
;

124 
mxml_vÆue_u


126 
mxml_ñemít_t
 
	gñemít
;

127 
	göãgî
;

128 *
	g›aque
;

129 
	gªÆ
;

130 
mxml_ãxt_t
 
	gãxt
;

131 
mxml_cu°om_t
 
	gcu°om
;

132 } 
	tmxml_vÆue_t
;

134 
mxml_node_s


136 
mxml_ty≥_t
 
	gty≥
;

137 
mxml_node_s
 *
	g√xt
;

138 
mxml_node_s
 *
	g¥ev
;

139 
mxml_node_s
 *
	g∑ª¡
;

140 
mxml_node_s
 *
	gchûd
;

141 
mxml_node_s
 *
	gœ°_chûd
;

142 
mxml_vÆue_t
 
	gvÆue
;

143 
	gªf_cou¡
;

144 *
	gu£r_d©a
;

147 
mxml_node_s
 
	tmxml_node_t
;

149 
mxml_ödex_s


151 *
	g©å
;

152 
	gnum_nodes
;

153 
	gÆloc_nodes
;

154 
	gcur_node
;

155 
mxml_node_t
 **
	gnodes
;

158 
mxml_ödex_s
 
	tmxml_ödex_t
;

161 (*
	tmxml_cu°om_lﬂd_cb_t
)(
	tmxml_node_t
 *, const *);

164 *(*
	tmxml_cu°om_ßve_cb_t
)(
	tmxml_node_t
 *);

167 (*
	tmxml_ítôy_cb_t
)(const *);

170 
	$mxml_ty≥_t
 (*
	tmxml_lﬂd_cb_t
)(
	tmxml_node_t
 *);

173 c⁄° *(*
	tmxml_ßve_cb_t
)(
	tmxml_node_t
 *, );

176 (*
	tmxml_ßx_cb_t
)(
	tmxml_node_t
 *, 
	tmxml_ßx_evít_t
, *);

184 #ifde‡
__˝lu•lus


192 
	`mxmlAdd
(
mxml_node_t
 *
∑ª¡
, 
whîe
,

193 
mxml_node_t
 *
chûd
, mxml_node_à*
node
);

194 
	`mxmlDñëe
(
mxml_node_t
 *
node
);

195 
	`mxmlEÀmítDñëeAâr
(
mxml_node_t
 *
node
,

196 c⁄° *
«me
);

197 c⁄° *
	`mxmlEÀmítGëAâr
(
mxml_node_t
 *
node
, c⁄° *
«me
);

198 
	`mxmlEÀmítSëAâr
(
mxml_node_t
 *
node
, c⁄° *
«me
,

199 c⁄° *
vÆue
);

200 
	`mxmlEÀmítSëAârf
(
mxml_node_t
 *
node
, c⁄° *
«me
,

201 c⁄° *
f‹m©
, ...)

202 #ifde‡
__GNUC__


203 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__¥ötf__
, 3, 4)))

206 
	`mxmlE¡ôyAddCÆlback
(
mxml_ítôy_cb_t
 
cb
);

207 c⁄° *
	`mxmlE¡ôyGëName
(
vÆ
);

208 
	`mxmlE¡ôyGëVÆue
(c⁄° *
«me
);

209 
	`mxmlE¡ôyRemoveCÆlback
(
mxml_ítôy_cb_t
 
cb
);

210 
mxml_node_t
 *
	`mxmlFödEÀmít
(mxml_node_à*
node
, mxml_node_à*
t›
,

211 c⁄° *
«me
, c⁄° *
©å
,

212 c⁄° *
vÆue
, 
des˚nd
);

213 
mxml_node_t
 *
	`mxmlFödP©h
(mxml_node_à*
node
, c⁄° *
∑th
);

214 c⁄° *
	`mxmlGëCDATA
(
mxml_node_t
 *
node
);

215 c⁄° *
	`mxmlGëCu°om
(
mxml_node_t
 *
node
);

216 c⁄° *
	`mxmlGëEÀmít
(
mxml_node_t
 *
node
);

217 
mxml_node_t
 *
	`mxmlGëFú°Chûd
(mxml_node_à*
node
);

218 
	`mxmlGëI¡egî
(
mxml_node_t
 *
node
);

219 
mxml_node_t
 *
	`mxmlGëLa°Chûd
(mxml_node_à*
node
);

220 
mxml_node_t
 *
	`mxmlGëNextSiblög
(mxml_node_à*
node
);

221 c⁄° *
	`mxmlGëO∑que
(
mxml_node_t
 *
node
);

222 
mxml_node_t
 *
	`mxmlGëP¨ít
(mxml_node_à*
node
);

223 
mxml_node_t
 *
	`mxmlGëPªvSiblög
(mxml_node_à*
node
);

224 
	`mxmlGëRól
(
mxml_node_t
 *
node
);

225 
	`mxmlGëRefCou¡
(
mxml_node_t
 *
node
);

226 c⁄° *
	`mxmlGëText
(
mxml_node_t
 *
node
, *
whôe•a˚
);

227 
mxml_ty≥_t
 
	`mxmlGëTy≥
(
mxml_node_t
 *
node
);

228 *
	`mxmlGëU£rD©a
(
mxml_node_t
 *
node
);

229 
	`mxmlIndexDñëe
(
mxml_ödex_t
 *
öd
);

230 
mxml_node_t
 *
	`mxmlIndexEnum
(
mxml_ödex_t
 *
öd
);

231 
mxml_node_t
 *
	`mxmlIndexFöd
(
mxml_ödex_t
 *
öd
,

232 c⁄° *
ñemít
,

233 c⁄° *
vÆue
);

234 
	`mxmlIndexGëCou¡
(
mxml_ödex_t
 *
öd
);

235 
mxml_ödex_t
 *
	`mxmlIndexNew
(
mxml_node_t
 *
node
, c⁄° *
ñemít
,

236 c⁄° *
©å
);

237 
mxml_node_t
 *
	`mxmlIndexRe£t
(
mxml_ödex_t
 *
öd
);

238 
mxml_node_t
 *
	`mxmlLﬂdFd
(mxml_node_à*
t›
, 
fd
,

239 
	`mxml_ty≥_t
 (*
cb
)(
mxml_node_t
 *));

240 
mxml_node_t
 *
	`mxmlLﬂdFûe
(mxml_node_à*
t›
, 
FILE
 *
Â
,

241 
	`mxml_ty≥_t
 (*
cb
)(
mxml_node_t
 *));

242 
mxml_node_t
 *
	`mxmlLﬂdSåög
(mxml_node_à*
t›
, c⁄° *
s
,

243 
	`mxml_ty≥_t
 (*
cb
)(
mxml_node_t
 *));

244 
mxml_node_t
 *
	`mxmlNewCDATA
(mxml_node_à*
∑ª¡
, c⁄° *
°rög
);

245 
mxml_node_t
 *
	`mxmlNewCu°om
(mxml_node_à*
∑ª¡
, *
d©a
,

246 
mxml_cu°om_de°roy_cb_t
 
de°roy
);

247 
mxml_node_t
 *
	`mxmlNewEÀmít
(mxml_node_à*
∑ª¡
, c⁄° *
«me
);

248 
mxml_node_t
 *
	`mxmlNewI¡egî
(mxml_node_à*
∑ª¡
, 
öãgî
);

249 
mxml_node_t
 *
	`mxmlNewO∑que
(mxml_node_à*
∑ª¡
, c⁄° *
›aque
);

250 
mxml_node_t
 *
	`mxmlNewRól
(mxml_node_à*
∑ª¡
, 
ªÆ
);

251 
mxml_node_t
 *
	`mxmlNewText
(mxml_node_à*
∑ª¡
, 
whôe•a˚
,

252 c⁄° *
°rög
);

253 
mxml_node_t
 *
	`mxmlNewTextf
(mxml_node_à*
∑ª¡
, 
whôe•a˚
,

254 c⁄° *
f‹m©
, ...)

255 #ifde‡
__GNUC__


256 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__¥ötf__
, 3, 4)))

259 
mxml_node_t
 *
	`mxmlNewXML
(c⁄° *
vîsi⁄
);

260 
	`mxmlRñó£
(
mxml_node_t
 *
node
);

261 
	`mxmlRemove
(
mxml_node_t
 *
node
);

262 
	`mxmlRëaö
(
mxml_node_t
 *
node
);

263 *
	`mxmlSaveAŒocSåög
(
mxml_node_t
 *
node
,

264 
mxml_ßve_cb_t
 
cb
);

265 
	`mxmlSaveFd
(
mxml_node_t
 *
node
, 
fd
,

266 
mxml_ßve_cb_t
 
cb
);

267 
	`mxmlSaveFûe
(
mxml_node_t
 *
node
, 
FILE
 *
Â
,

268 
mxml_ßve_cb_t
 
cb
);

269 
	`mxmlSaveSåög
(
mxml_node_t
 *
node
, *
buf„r
,

270 
bufsize
, 
mxml_ßve_cb_t
 
cb
);

271 
mxml_node_t
 *
	`mxmlSAXLﬂdFd
(mxml_node_à*
t›
, 
fd
,

272 
	`mxml_ty≥_t
 (*
cb
)(
mxml_node_t
 *),

273 
mxml_ßx_cb_t
 
ßx
, *
ßx_d©a
);

274 
mxml_node_t
 *
	`mxmlSAXLﬂdFûe
(mxml_node_à*
t›
, 
FILE
 *
Â
,

275 
	`mxml_ty≥_t
 (*
cb
)(
mxml_node_t
 *),

276 
mxml_ßx_cb_t
 
ßx
, *
ßx_d©a
);

277 
mxml_node_t
 *
	`mxmlSAXLﬂdSåög
(mxml_node_à*
t›
, c⁄° *
s
,

278 
	`mxml_ty≥_t
 (*
cb
)(
mxml_node_t
 *),

279 
mxml_ßx_cb_t
 
ßx
, *
ßx_d©a
);

280 
	`mxmlSëCDATA
(
mxml_node_t
 *
node
, c⁄° *
d©a
);

281 
	`mxmlSëCu°om
(
mxml_node_t
 *
node
, *
d©a
,

282 
mxml_cu°om_de°roy_cb_t
 
de°roy
);

283 
	`mxmlSëCu°omH™dÀrs
(
mxml_cu°om_lﬂd_cb_t
 
lﬂd
,

284 
mxml_cu°om_ßve_cb_t
 
ßve
);

285 
	`mxmlSëEÀmít
(
mxml_node_t
 *
node
, c⁄° *
«me
);

286 
	`mxmlSëEº‹CÆlback
(
mxml_îr‹_cb_t
 
cb
);

287 
	`mxmlSëI¡egî
(
mxml_node_t
 *
node
, 
öãgî
);

288 
	`mxmlSëO∑que
(
mxml_node_t
 *
node
, c⁄° *
›aque
);

289 
	`mxmlSëRól
(
mxml_node_t
 *
node
, 
ªÆ
);

290 
	`mxmlSëText
(
mxml_node_t
 *
node
, 
whôe•a˚
,

291 c⁄° *
°rög
);

292 
	`mxmlSëTextf
(
mxml_node_t
 *
node
, 
whôe•a˚
,

293 c⁄° *
f‹m©
, ...)

294 #ifde‡
__GNUC__


295 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__¥ötf__
, 3, 4)))

298 
	`mxmlSëU£rD©a
(
mxml_node_t
 *
node
, *
d©a
);

299 
	`mxmlSëWøpM¨gö
(
cﬁumn
);

300 
mxml_node_t
 *
	`mxmlWÆkNext
(mxml_node_à*
node
, mxml_node_à*
t›
,

301 
des˚nd
);

302 
mxml_node_t
 *
	`mxmlWÆkPªv
(mxml_node_à*
node
, mxml_node_à*
t›
,

303 
des˚nd
);

310 
	`mxml_îr‹
(c⁄° *
f‹m©
, ...);

311 
mxml_ty≥_t
 
	`mxml_ign‹e_cb
(
mxml_node_t
 *
node
);

312 
mxml_ty≥_t
 
	`mxml_öãgî_cb
(
mxml_node_t
 *
node
);

313 
mxml_ty≥_t
 
	`mxml_›aque_cb
(
mxml_node_t
 *
node
);

314 
mxml_ty≥_t
 
	`mxml_ªÆ_cb
(
mxml_node_t
 *
node
);

321 #ifde‡
__˝lu•lus


322 
	}
}

	@/home/gaojing/123/xml/release-2.7/mxmldoc.c

51 
	~"c⁄fig.h
"

52 
	~"mxml.h
"

53 
	~<time.h
>

54 
	~<sys/°©.h
>

55 #i‚de‡
WIN32


56 
	~<dúít.h
>

57 
	~<uni°d.h
>

59 #ifde‡
__APPLE__


60 
	~<•awn.h
>

61 
	~<sys/waô.h
>

62 **
ívú⁄
;

144 
	#STATE_NONE
 0

	)

145 
	#STATE_PREPROCESSOR
 1

	)

146 
	#STATE_C_COMMENT
 2

	)

147 
	#STATE_CXX_COMMENT
 3

	)

148 
	#STATE_STRING
 4

	)

149 
	#STATE_CHARACTER
 5

	)

150 
	#STATE_IDENTIFIER
 6

	)

157 
	#OUTPUT_NONE
 0

	)

158 
	#OUTPUT_HTML
 1

	)

159 
	#OUTPUT_XML
 2

	)

160 
	#OUTPUT_MAN
 3

	)

161 
	#OUTPUT_TOKENS
 4

	)

168 
mxml_node_t
 *
add_v¨übÀ
(mxml_node_à*
∑ª¡
, c⁄° *
«me
,

169 
mxml_node_t
 *
ty≥
);

170 
mxml_node_t
 *
föd_public
(mxml_node_à*
node
, mxml_node_à*
t›
,

171 c⁄° *
«me
);

172 *
gë_commít_öfo
(
mxml_node_t
 *
des¸ùti⁄
);

173 *
gë_ãxt
(
mxml_node_t
 *
node
, *
buf„r
, 
buÊí
);

174 
mxml_ty≥_t
 
lﬂd_cb
(
mxml_node_t
 *
node
);

175 
mxml_node_t
 *
√w_documíèti⁄
(mxml_node_à**
mxmldoc
);

176 
ªmove_dúe˘‹y
(c⁄° *
∑th
);

177 
ß„_°r˝y
(*
d°
, c⁄° *
§c
);

178 
sˇn_fûe
(c⁄° *
fûíame
, 
FILE
 *
Â
,

179 
mxml_node_t
 *
doc
);

180 
s‹t_node
(
mxml_node_t
 *
åì
, mxml_node_à*
func
);

181 
upd©e_commít
(
mxml_node_t
 *
∑ª¡
,

182 
mxml_node_t
 *
commít
);

183 
ußge
(c⁄° *
›ti⁄
);

184 
wrôe_des¸ùti⁄
(
FILE
 *
out
, 
mxml_node_t
 *
des¸ùti⁄
,

185 c⁄° *
ñemít
, 
summ¨y
);

186 
wrôe_ñemít
(
FILE
 *
out
, 
mxml_node_t
 *
doc
,

187 
mxml_node_t
 *
ñemít
, 
mode
);

188 
wrôe_fûe
(
FILE
 *
out
, c⁄° *
fûe
);

189 
wrôe_fun˘i⁄
(
FILE
 *
out
, 
mxml_node_t
 *
doc
,

190 
mxml_node_t
 *
fun˘i⁄
, 
Àvñ
);

191 
wrôe_html
(c⁄° *
£˘i⁄
, c⁄° *
tôÀ
,

192 c⁄° *
foŸîfûe
,

193 c⁄° *
hódîfûe
,

194 c⁄° *
öåofûe
, c⁄° *
cssfûe
,

195 c⁄° *
‰amefûe
,

196 c⁄° *
doc£t
, c⁄° *
docvîsi⁄
,

197 c⁄° *
„ed«me
, c⁄° *
„eduæ
,

198 
mxml_node_t
 *
doc
);

199 
wrôe_html_hód
(
FILE
 *
out
, c⁄° *
£˘i⁄
,

200 c⁄° *
tôÀ
, c⁄° *
cssfûe
);

201 
wrôe_m™
(c⁄° *
m™_«me
, c⁄° *
£˘i⁄
,

202 c⁄° *
tôÀ
, c⁄° *
hódîfûe
,

203 c⁄° *
foŸîfûe
, c⁄° *
öåofûe
,

204 
mxml_node_t
 *
doc
);

205 
wrôe_scu
(
FILE
 *
out
, 
mxml_node_t
 *
doc
,

206 
mxml_node_t
 *
scut
);

207 
wrôe_°rög
(
FILE
 *
out
, c⁄° *
s
, 
mode
);

208 
wrôe_toc
(
FILE
 *
out
, 
mxml_node_t
 *
doc
,

209 c⁄° *
öåofûe
, c⁄° *
èrgë
,

210 
xml
);

211 
wrôe_tokís
(
FILE
 *
out
, 
mxml_node_t
 *
doc
,

212 c⁄° *
∑th
);

213 c⁄° *
ws_cb
(
mxml_node_t
 *
node
, 
whîe
);

221 
	$maö
(
¨gc
,

222 *
¨gv
[])

224 
i
;

225 
Àn
;

226 
FILE
 *
Â
;

227 
mxml_node_t
 *
doc
;

228 
mxml_node_t
 *
mxmldoc
;

229 c⁄° *
cssfûe
,

230 *
doc£t
,

231 *
docvîsi⁄
,

232 *
„ed«me
,

233 *
„eduæ
,

234 *
foŸîfûe
,

235 *
‰amefûe
,

236 *
hódîfûe
,

237 *
öåofûe
,

238 *
«me
,

239 *
∑th
,

240 *
£˘i⁄
,

241 *
tôÀ
,

242 *
xmlfûe
;

243 
mode
,

244 
upd©e
;

251 
cssfûe
 = 
NULL
;

252 
doc
 = 
NULL
;

253 
doc£t
 = 
NULL
;

254 
docvîsi⁄
 = 
NULL
;

255 
„ed«me
 = 
NULL
;

256 
„eduæ
 = 
NULL
;

257 
foŸîfûe
 = 
NULL
;

258 
‰amefûe
 = 
NULL
;

259 
hódîfûe
 = 
NULL
;

260 
öåofûe
 = 
NULL
;

261 
mode
 = 
OUTPUT_HTML
;

262 
mxmldoc
 = 
NULL
;

263 
«me
 = 
NULL
;

264 
∑th
 = 
NULL
;

265 
£˘i⁄
 = 
NULL
;

266 
tôÀ
 = 
NULL
;

267 
upd©e
 = 0;

268 
xmlfûe
 = 
NULL
;

270 
i
 = 1; i < 
¨gc
; i ++)

271 i‡(!
	`°rcmp
(
¨gv
[
i
], "--help"))

277 
	`ußge
(
NULL
);

279 i‡(!
	`°rcmp
(
¨gv
[
i
], "--version"))

285 
	`puts
(
MXML_VERSION
 + 10);

288 i‡(!
	`°rcmp
(
¨gv
[
i
], "--css"Ë&& !
cssfûe
)

294 
i
 ++;

295 i‡(
i
 < 
¨gc
)

296 
cssfûe
 = 
¨gv
[
i
];

298 
	`ußge
(
NULL
);

300 i‡(!
	`°rcmp
(
¨gv
[
i
], "--doc£t"Ë&& !
doc£t
)

306 
i
 ++;

307 i‡(
i
 < 
¨gc
)

308 
doc£t
 = 
¨gv
[
i
];

310 
	`ußge
(
NULL
);

312 i‡(!
	`°rcmp
(
¨gv
[
i
], "--docvîsi⁄"Ë&& !
docvîsi⁄
)

318 
i
 ++;

319 i‡(
i
 < 
¨gc
)

320 
docvîsi⁄
 = 
¨gv
[
i
];

322 
	`ußge
(
NULL
);

324 i‡(!
	`°rcmp
(
¨gv
[
i
], "--foŸî"Ë&& !
foŸîfûe
)

330 
i
 ++;

331 i‡(
i
 < 
¨gc
)

332 
foŸîfûe
 = 
¨gv
[
i
];

334 
	`ußge
(
NULL
);

336 i‡(!
	`°rcmp
(
¨gv
[
i
], "--„ed«me"Ë&& !
„ed«me
)

342 
i
 ++;

343 i‡(
i
 < 
¨gc
)

344 
„ed«me
 = 
¨gv
[
i
];

346 
	`ußge
(
NULL
);

348 i‡(!
	`°rcmp
(
¨gv
[
i
], "--„eduæ"Ë&& !
„eduæ
)

354 
i
 ++;

355 i‡(
i
 < 
¨gc
)

356 
„eduæ
 = 
¨gv
[
i
];

358 
	`ußge
(
NULL
);

360 i‡(!
	`°rcmp
(
¨gv
[
i
], "--‰amed"Ë&& !
‰amefûe
)

366 
i
 ++;

367 i‡(
i
 < 
¨gc
)

368 
‰amefûe
 = 
¨gv
[
i
];

370 
	`ußge
(
NULL
);

372 i‡(!
	`°rcmp
(
¨gv
[
i
], "--hódî"Ë&& !
hódîfûe
)

378 
i
 ++;

379 i‡(
i
 < 
¨gc
)

380 
hódîfûe
 = 
¨gv
[
i
];

382 
	`ußge
(
NULL
);

384 i‡(!
	`°rcmp
(
¨gv
[
i
], "--öåo"Ë&& !
öåofûe
)

390 
i
 ++;

391 i‡(
i
 < 
¨gc
)

392 
öåofûe
 = 
¨gv
[
i
];

394 
	`ußge
(
NULL
);

396 i‡(!
	`°rcmp
(
¨gv
[
i
], "--m™"Ë&& !
«me
)

402 
i
 ++;

403 i‡(
i
 < 
¨gc
)

405 
mode
 = 
OUTPUT_MAN
;

406 
«me
 = 
¨gv
[
i
];

409 
	`ußge
(
NULL
);

411 i‡(!
	`°rcmp
(
¨gv
[
i
], "--no-output"))

412 
mode
 = 
OUTPUT_NONE
;

413 i‡(!
	`°rcmp
(
¨gv
[
i
], "--£˘i⁄"Ë&& !
£˘i⁄
)

419 
i
 ++;

420 i‡(
i
 < 
¨gc
)

421 
£˘i⁄
 = 
¨gv
[
i
];

423 
	`ußge
(
NULL
);

425 i‡(!
	`°rcmp
(
¨gv
[
i
], "--tôÀ"Ë&& !
tôÀ
)

431 
i
 ++;

432 i‡(
i
 < 
¨gc
)

433 
tôÀ
 = 
¨gv
[
i
];

435 
	`ußge
(
NULL
);

437 i‡(!
	`°rcmp
(
¨gv
[
i
], "--tokens"))

443 
mode
 = 
OUTPUT_TOKENS
;

445 
i
 ++;

446 i‡(
i
 < 
¨gc
)

447 
∑th
 = 
¨gv
[
i
];

449 
	`ußge
(
NULL
);

451 i‡(
¨gv
[
i
][0] == '-')

457 
	`ußge
(
¨gv
[
i
]);

465 
Àn
 = ()
	`°æí
(
¨gv
[
i
]);

466 i‡(
Àn
 > 4 && !
	`°rcmp
(
¨gv
[
i
] +Üen - 4, ".xml"))

472 i‡(
xmlfûe
)

473 
	`ußge
(
NULL
);

475 
xmlfûe
 = 
¨gv
[
i
];

477 i‡(!
doc
)

479 i‡((
Â
 = 
	`f›í
(
¨gv
[
i
], "r")Ë!
NULL
)

485 
doc
 = 
	`mxmlLﬂdFûe
(
NULL
, 
Â
, 
lﬂd_cb
);

487 
	`f˛o£
(
Â
);

489 i‡(!
doc
)

491 
mxmldoc
 = 
NULL
;

493 
	`Ârötf
(
°dîr
,

495 "\"%s\"!\n", 
¨gv
[
i
]);

497 i‡((
mxmldoc
 = 
	`mxmlFödEÀmít
(
doc
, doc, "mxmldoc", 
NULL
,

498 
NULL
, 
MXML_DESCEND
)) == NULL)

500 
	`Ârötf
(
°dîr
,

502 "<mxmldoc>Çode!!\n", 
¨gv
[
i
]);

504 
	`mxmlDñëe
(
doc
);

505 
doc
 = 
NULL
;

510 
doc
 = 
NULL
;

511 
mxmldoc
 = 
NULL
;

514 i‡(!
doc
)

515 
doc
 = 
	`√w_documíèti⁄
(&
mxmldoc
);

524 
upd©e
 = 1;

526 i‡(!
doc
)

527 
doc
 = 
	`√w_documíèti⁄
(&
mxmldoc
);

529 i‡((
Â
 = 
	`f›í
(
¨gv
[
i
], "r")Ë=
NULL
)

531 
	`Ârötf
(
°dîr
, "mxmldoc: UnableÅo open source file \"%s\": %s\n",

532 
¨gv
[
i
], 
	`°ªº‹
(
î∫o
));

533 
	`mxmlDñëe
(
doc
);

536 i‡(
	`sˇn_fûe
(
¨gv
[
i
], 
Â
, 
mxmldoc
))

538 
	`f˛o£
(
Â
);

539 
	`mxmlDñëe
(
doc
);

543 
	`f˛o£
(
Â
);

547 i‡(
upd©e
 && 
xmlfûe
)

553 i‡((
Â
 = 
	`f›í
(
xmlfûe
, "w")Ë!
NULL
)

559 
	`mxmlSëWøpM¨gö
(0);

561 i‡(
	`mxmlSaveFûe
(
doc
, 
Â
, 
ws_cb
))

563 
	`Ârötf
(
°dîr
,

565 "%s!\n", 
xmlfûe
, 
	`°ªº‹
(
î∫o
));

566 
	`f˛o£
(
Â
);

567 
	`mxmlDñëe
(
doc
);

571 
	`f˛o£
(
Â
);

575 
	`Ârötf
(
°dîr
,

577 "%s!\n", 
xmlfûe
, 
	`°ªº‹
(
î∫o
));

578 
	`mxmlDñëe
(
doc
);

583 
mode
)

585 
OUTPUT_HTML
 :

590 
	`wrôe_html
(
£˘i⁄
, 
tôÀ
 ?ÅôÀ : "Documíèti⁄", 
foŸîfûe
,

591 
hódîfûe
, 
öåofûe
, 
cssfûe
, 
‰amefûe
, 
doc£t
,

592 
docvîsi⁄
, 
„ed«me
, 
„eduæ
, 
mxmldoc
);

595 
OUTPUT_MAN
 :

600 
	`wrôe_m™
(
«me
, 
£˘i⁄
, 
tôÀ
, 
foŸîfûe
, 
hódîfûe
, 
öåofûe
,

601 
mxmldoc
);

604 
OUTPUT_TOKENS
 :

605 
	`Âuts
("<?xml version=\"1.0\"Éncoding=\"UTF-8\"?>\n"

606 "<Tokí†vîsi⁄=\"1.0\">\n", 
°dout
);

608 
	`wrôe_tokís
(
°dout
, 
mxmldoc
, 
∑th
);

610 
	`Âuts
("</Tokís>\n", 
°dout
);

618 
	`mxmlDñëe
(
doc
);

621 
	}
}

628 
mxml_node_t
 *

629 
	$add_v¨übÀ
(
mxml_node_t
 *
∑ª¡
,

630 c⁄° *
«me
,

631 
mxml_node_t
 *
ty≥
)

633 
mxml_node_t
 *
v¨übÀ
,

634 *
node
,

635 *
√xt
;

636 
buf„r
[16384],

637 *
buÂå
;

640 #ifde‡
DEBUG


641 
	`Ârötf
(
°dîr
, "add_variable(parent=%p,Çame=\"%s\",Åype=%p)\n",

642 
∑ª¡
, 
«me
, 
ty≥
);

649 i‡(!
ty≥
 || !ty≥->
chûd
)

650  (
NULL
);

656 
v¨übÀ
 = 
	`mxmlNewEÀmít
(
∑ª¡
, 
«me
);

662 
node
 = 
ty≥
->
chûd
;Çode;Çodênode->
√xt
)

663 i‡(!
	`°rcmp
(
node
->
vÆue
.
ãxt
.
°rög
, "="))

666 i‡(
node
)

672 
buÂå
 = 
buf„r
; 
node
; buÂå +
	`°æí
(bufptr))

674 i‡(
node
->
vÆue
.
ãxt
.
whôe•a˚
 && 
buÂå
 > 
buf„r
)

675 *
buÂå
++ = ' ';

677 
	`°r˝y
(
buÂå
, 
node
->
vÆue
.
ãxt
.
°rög
);

679 
√xt
 = 
node
->next;

680 
	`mxmlDñëe
(
node
);

681 
node
 = 
√xt
;

684 
	`mxmlEÀmítSëAâr
(
v¨übÀ
, "deÁu…", 
buf„r
);

691 i‡(
ty≥
->
œ°_chûd
->
vÆue
.
ãxt
.
°rög
[0] == ')')

697 
node
 = 
ty≥
->
chûd
;Çode;Çodênode->
√xt
)

698 i‡(
node
->
vÆue
.
ãxt
.
°rög
[0] == '(')

701 
buÂå
 = 
buf„r
; 
node
; buÂå +
	`°æí
(bufptr))

703 i‡(
node
->
vÆue
.
ãxt
.
whôe•a˚
 && 
buÂå
 > 
buf„r
)

704 *
buÂå
++ = ' ';

706 
	`°r˝y
(
buÂå
, 
node
->
vÆue
.
ãxt
.
°rög
);

708 
√xt
 = 
node
->next;

709 
	`mxmlDñëe
(
node
);

710 
node
 = 
√xt
;

719 
	`°r˝y
(
buf„r
, 
ty≥
->
œ°_chûd
->
vÆue
.
ãxt
.
°rög
);

720 
	`mxmlDñëe
(
ty≥
->
œ°_chûd
);

727 
	`mxmlEÀmítSëAâr
(
v¨übÀ
, "«me", 
buf„r
);

733 
	`mxmlAdd
(
v¨übÀ
, 
MXML_ADD_AFTER
, 
MXML_ADD_TO_PARENT
, 
ty≥
);

739  (
v¨übÀ
);

740 
	}
}

747 
mxml_node_t
 *

748 
	$föd_public
(
mxml_node_t
 *
node
,

749 
mxml_node_t
 *
t›
,

750 c⁄° *
«me
)

752 
mxml_node_t
 *
des¸ùti⁄
,

753 *
commít
;

756 
node
 = 
	`mxmlFödEÀmít
“ode, 
t›
, 
«me
, 
NULL
, NULL,

757 
node
 =
t›
 ? 
MXML_DESCEND_FIRST
 :

758 
MXML_NO_DESCEND
);

759 
node
;

760 
node
 = 
	`mxmlFödEÀmít
“ode, 
t›
, 
«me
, 
NULL
, NULL, 
MXML_NO_DESCEND
))

766 
des¸ùti⁄
 = 
	`mxmlFödEÀmít
(
node
,Çode, "des¸ùti⁄", 
NULL
, NULL,

767 
MXML_DESCEND_FIRST
);

773 i‡(!
des¸ùti⁄
)

780 
commít
 = 
des¸ùti⁄
->
chûd
; commít; commíàcommít->
√xt
)

781 i‡((
commít
->
ty≥
 =
MXML_TEXT
 &&

782 
	`°r°r
(
commít
->
vÆue
.
ãxt
.
°rög
, "@private@")) ||

783 (
commít
->
ty≥
 =
MXML_OPAQUE
 &&

784 
	`°r°r
(
commít
->
vÆue
.
›aque
, "@private@")))

787 i‡(!
commít
)

793  (
node
);

801  (
NULL
);

802 
	}
}

810 
	$gë_commít_öfo
(

811 
mxml_node_t
 *
des¸ùti⁄
)

813 
ãxt
[10240],

814 
sö˚
[255],

815 *
±r
;

816 
öfo
[1024];

819 i‡(!
des¸ùti⁄
)

822 
	`gë_ãxt
(
des¸ùti⁄
, 
ãxt
, (text));

824 
±r
 = 
	`°rchr
(
ãxt
, '@');Ötr;Ötr = strchr(ptr + 1, '@'))

826 i‡(!
	`°∫cmp
(
±r
, "@deprecated@", 12))

828 i‡(!
	`°∫cmp
(
±r
, "@since ", 7))

830 
	`°∫˝y
(
sö˚
, 
±r
 + 7, (since) - 1);

831 
sö˚
[(since) - 1] = '\0';

833 i‡((
±r
 = 
	`°rchr
(
sö˚
, '@')Ë!
NULL
)

834 *
±r
 = '\0';

836 
	`¢¥ötf
(
öfo
, (öfo), "<•™ cœss=\"öfo\">&nb•;%s&nb•;</•™>", 
sö˚
);

837  (
öfo
);

842 
	}
}

850 
	$gë_ãxt
(
mxml_node_t
 *
node
,

851 *
buf„r
,

852 
buÊí
)

854 *
±r
,

855 *
íd
;

856 
Àn
;

857 
mxml_node_t
 *
cuºít
;

860 
±r
 = 
buf„r
;

861 
íd
 = 
buf„r
 + 
buÊí
 - 1;

863 
cuºít
 = 
node
->
chûd
; cuºíà&& 
±r
 < 
íd
; cuºíàcuºít->
√xt
)

865 i‡(
cuºít
->
ty≥
 =
MXML_TEXT
)

867 i‡(
cuºít
->
vÆue
.
ãxt
.
whôe•a˚
)

868 *
±r
++ = ' ';

870 
Àn
 = ()
	`°æí
(
cuºít
->
vÆue
.
ãxt
.
°rög
);

871 i‡(
Àn
 > ()(
íd
 - 
±r
))

872 
Àn
 = ()(
íd
 - 
±r
);

874 
	`mem˝y
(
±r
, 
cuºít
->
vÆue
.
ãxt
.
°rög
, 
Àn
);

875 
±r
 +
Àn
;

877 i‡(
cuºít
->
ty≥
 =
MXML_OPAQUE
)

879 
Àn
 = ()
	`°æí
(
cuºít
->
vÆue
.
›aque
);

880 i‡(
Àn
 > ()(
íd
 - 
±r
))

881 
Àn
 = ()(
íd
 - 
±r
);

883 
	`mem˝y
(
±r
, 
cuºít
->
vÆue
.
›aque
, 
Àn
);

884 
±r
 +
Àn
;

888 *
±r
 = '\0';

890  (
buf„r
);

891 
	}
}

898 
mxml_ty≥_t


899 
	$lﬂd_cb
(
mxml_node_t
 *
node
)

901 i‡(!
	`°rcmp
(
node
->
vÆue
.
ñemít
.
«me
, "description"))

902  (
MXML_OPAQUE
);

904  (
MXML_TEXT
);

905 
	}
}

912 
mxml_node_t
 *

913 
	$√w_documíèti⁄
(
mxml_node_t
 **
mxmldoc
)

915 
mxml_node_t
 *
doc
;

922 
doc
 = 
	`mxmlNewXML
(
NULL
);

924 *
mxmldoc
 = 
	`mxmlNewEÀmít
(
doc
, "mxmldoc");

926 
	`mxmlEÀmítSëAâr
(*
mxmldoc
, "xmlns", "http://www.easysw.com");

927 
	`mxmlEÀmítSëAâr
(*
mxmldoc
, "xmlns:xsi",

929 
	`mxmlEÀmítSëAâr
(*
mxmldoc
, "xsi:schemaLocation",

932  (
doc
);

933 
	}
}

941 
	$ªmove_dúe˘‹y
(c⁄° *
∑th
)

943 #ifde‡
WIN32


947 
DIR
 *
dú
;

948 
dúít
 *
dít
;

949 
fûíame
[1024];

950 
°©
 
fûeöfo
;

953 i‡((
dú
 = 
	`›ídú
(
∑th
)Ë=
NULL
)

955 
	`Ârötf
(
°dîr
, "mxmldoc: U«bÀÅÿ›í dúe˘‹y \"%s\": %s\n", 
∑th
,

956 
	`°ªº‹
(
î∫o
));

960 (
dít
 = 
	`ªaddú
(
dú
)Ë!
NULL
)

966 i‡(!
	`°rcmp
(
dít
->
d_«me
, ".") || !strcmp(dent->d_name, ".."))

973 
	`¢¥ötf
(
fûíame
, (fûíame), "%s/%s", 
∑th
, 
dít
->
d_«me
);

975 i‡(
	`°©
(
fûíame
, &
fûeöfo
))

977 
	`Ârötf
(
°dîr
, "mxmldoc: U«bÀÅÿ°© \"%s\": %s\n", 
fûíame
,

978 
	`°ªº‹
(
î∫o
));

979 
	`˛o£dú
(
dú
);

983 i‡(
	`S_ISDIR
(
fûeöfo
.
°_mode
))

985 i‡(!
	`ªmove_dúe˘‹y
(
fûíame
))

987 
	`˛o£dú
(
dú
);

991 i‡(
	`u∆ök
(
fûíame
))

993 
	`Ârötf
(
°dîr
, "mxmldoc: U«bÀÅÿªmovê\"%s\": %s\n", 
fûíame
,

994 
	`°ªº‹
(
î∫o
));

995 
	`˛o£dú
(
dú
);

1000 
	`˛o£dú
(
dú
);

1002 i‡(
	`rmdú
(
∑th
))

1004 
	`Ârötf
(
°dîr
, "mxmldoc: U«bÀÅÿªmovêdúe˘‹y \"%s\": %s\n", 
∑th
,

1005 
	`°ªº‹
(
î∫o
));

1011 
	}
}

1019 
	$ß„_°r˝y
(*
d°
,

1020 c⁄° *
§c
)

1022 *
§c
)

1023 *
d°
++ = *
§c
++;

1025 *
d°
 = '\0';

1026 
	}
}

1034 
	$sˇn_fûe
(c⁄° *
fûíame
,

1035 
FILE
 *
Â
,

1036 
mxml_node_t
 *
åì
)

1038 
°©e
,

1039 
bø˚s
,

1040 
∑ªns
;

1041 
ch
;

1042 
buf„r
[65536],

1043 *
buÂå
;

1044 c⁄° *
sc›e
;

1045 
mxml_node_t
 *
commít
,

1046 *
c⁄°™t
,

1047 *
íumî©i⁄
,

1048 *
fun˘i⁄
,

1049 *
f°ru˘˛ass
,

1050 *
°ru˘˛ass
,

1051 *
ty≥de‚ode
,

1052 *
v¨übÀ
,

1053 *
ªtu∫vÆue
,

1054 *
ty≥
,

1055 *
des¸ùti⁄
,

1056 *
node
,

1057 *
√xt
;

1058 #i‡
DEBUG
 > 1

1059 
mxml_node_t
 *
ãmp
;

1060 
ﬁd°©e
,

1061 
ﬁdch
;

1062 c⁄° *
°©es
[] =

1075 #ifde‡
DEBUG


1076 
	`Ârötf
(
°dîr
, "sˇn_fûe(fûíame=\"%s\", fp=%p,Åªe=%p)\n", 
fûíame
,

1077 
Â
, 
åì
);

1084 
°©e
 = 
STATE_NONE
;

1085 
bø˚s
 = 0;

1086 
∑ªns
 = 0;

1087 
buÂå
 = 
buf„r
;

1089 
commít
 = 
	`mxmlNewEÀmít
(
MXML_NO_PARENT
, "temp");

1090 
c⁄°™t
 = 
NULL
;

1091 
íumî©i⁄
 = 
NULL
;

1092 
fun˘i⁄
 = 
NULL
;

1093 
v¨übÀ
 = 
NULL
;

1094 
ªtu∫vÆue
 = 
NULL
;

1095 
ty≥
 = 
NULL
;

1096 
des¸ùti⁄
 = 
NULL
;

1097 
ty≥de‚ode
 = 
NULL
;

1098 
°ru˘˛ass
 = 
NULL
;

1099 
f°ru˘˛ass
 = 
NULL
;

1101 i‡(!
	`°rcmp
(
åì
->
vÆue
.
ñemít
.
«me
, "class"))

1102 
sc›e
 = "private";

1104 
sc›e
 = 
NULL
;

1110 (
ch
 = 
	`gëc
(
Â
)Ë!
EOF
)

1112 #i‡
DEBUG
 > 1

1113 
ﬁd°©e
 = 
°©e
;

1114 
ﬁdch
 = 
ch
;

1117 
°©e
)

1119 
STATE_NONE
 :

1120 
ch
)

1123 
ch
 = 
	`gëc
(
Â
);

1124 
buÂå
 = 
buf„r
;

1126 i‡(
ch
 == '*')

1127 
°©e
 = 
STATE_C_COMMENT
;

1128 i‡(
ch
 == '/')

1129 
°©e
 = 
STATE_CXX_COMMENT
;

1132 
	`ungëc
(
ch
, 
Â
);

1134 i‡(
ty≥
)

1136 #ifde‡
DEBUG


1137 
	`Âuts
("Idítifõr: <<<< / >>>\n", 
°dîr
);

1139 
ch
 = 
ty≥
->
œ°_chûd
->
vÆue
.
ãxt
.
°rög
[0];

1140 
	`mxmlNewText
(
ty≥
, 
	`iß um
(
ch
) || ch == '_', "/");

1146 #ifde‡
DEBUG


1147 
	`Âuts
(" #¥ïro˚ss‹...\n", 
°dîr
);

1149 
°©e
 = 
STATE_PREPROCESSOR
;

1153 
°©e
 = 
STATE_CHARACTER
;

1154 
buÂå
 = 
buf„r
;

1155 *
buÂå
++ = 
ch
;

1159 
°©e
 = 
STATE_STRING
;

1160 
buÂå
 = 
buf„r
;

1161 *
buÂå
++ = 
ch
;

1165 #ifde‡
DEBUG


1166 
	`Ârötf
(
°dîr
, " open brace, function=%p,Åype=%p...\n",

1167 
fun˘i⁄
, 
ty≥
);

1168 i‡(
ty≥
)

1169 
	`Ârötf
(
°dîr
, "Åype->child=\"%s\"...\n",

1170 
ty≥
->
chûd
->
vÆue
.
ãxt
.
°rög
);

1173 i‡(
fun˘i⁄
)

1175 i‡(
f°ru˘˛ass
)

1177 
	`s‹t_node
(
f°ru˘˛ass
, 
fun˘i⁄
);

1178 
f°ru˘˛ass
 = 
NULL
;

1181 
	`s‹t_node
(
åì
, 
fun˘i⁄
);

1183 
fun˘i⁄
 = 
NULL
;

1185 i‡(
ty≥
 &&Åy≥->
chûd
 &&

1186 ((!
	`°rcmp
(
ty≥
->
chûd
->
vÆue
.
ãxt
.
°rög
, "typedef") &&

1187 
ty≥
->
chûd
->
√xt
 &&

1188 (!
	`°rcmp
(
ty≥
->
chûd
->
√xt
->
vÆue
.
ãxt
.
°rög
, "struct") ||

1189 !
	`°rcmp
(
ty≥
->
chûd
->
√xt
->
vÆue
.
ãxt
.
°rög
, "union") ||

1190 !
	`°rcmp
(
ty≥
->
chûd
->
√xt
->
vÆue
.
ãxt
.
°rög
, "class"))) ||

1191 !
	`°rcmp
(
ty≥
->
chûd
->
vÆue
.
ãxt
.
°rög
, "union") ||

1192 !
	`°rcmp
(
ty≥
->
chûd
->
vÆue
.
ãxt
.
°rög
, "struct") ||

1193 !
	`°rcmp
(
ty≥
->
chûd
->
vÆue
.
ãxt
.
°rög
, "class")))

1199 i‡(!
	`°rcmp
(
ty≥
->
chûd
->
vÆue
.
ãxt
.
°rög
, "typedef"))

1201 #ifde‡
DEBUG


1202 
	`Âuts
(" sèπögÅy≥def...\n", 
°dîr
);

1205 
ty≥de‚ode
 = 
	`mxmlNewEÀmít
(
MXML_NO_PARENT
, "typedef");

1206 
	`mxmlDñëe
(
ty≥
->
chûd
);

1209 
ty≥de‚ode
 = 
NULL
;

1211 
°ru˘˛ass
 = 
	`mxmlNewEÀmít
(
MXML_NO_PARENT
,

1212 
ty≥
->
chûd
->
vÆue
.
ãxt
.
°rög
);

1214 #ifde‡
DEBUG


1215 
	`Ârötf
(
°dîr
, "%c%s: <<<< %s >>>\n",

1216 
	`touµî
(
ty≥
->
chûd
->
vÆue
.
ãxt
.
°rög
[0]),

1217 
ty≥
->
chûd
->
vÆue
.
ãxt
.
°rög
 + 1,

1218 
ty≥
->
chûd
->
√xt
 ?

1219 
ty≥
->
chûd
->
√xt
->
vÆue
.
ãxt
.
°rög
 : "(noname)");

1221 
	`Âuts
("Åy≥ =", 
°dîr
);

1222 
node
 = 
ty≥
->
chûd
;Çode;Çodênode->
√xt
)

1223 
	`Ârötf
(
°dîr
, " \"%s\"", 
node
->
vÆue
.
ãxt
.
°rög
);

1224 
	`putc
('\n', 
°dîr
);

1226 
	`Ârötf
(
°dîr
, " sc›ê%s\n", 
sc›e
 ? scope : "(null)");

1229 i‡(
ty≥
->
chûd
->
√xt
)

1231 
	`mxmlEÀmítSëAâr
(
°ru˘˛ass
, "name",

1232 
ty≥
->
chûd
->
√xt
->
vÆue
.
ãxt
.
°rög
);

1233 
	`s‹t_node
(
åì
, 
°ru˘˛ass
);

1236 i‡(
ty≥de‚ode
 && 
ty≥
->
chûd
)

1237 
ty≥
->
chûd
->
vÆue
.
ãxt
.
whôe•a˚
 = 0;

1238 i‡(
°ru˘˛ass
 && 
ty≥
->
chûd
 &&

1239 
ty≥
->
chûd
->
√xt
 &&Åype->child->next->next)

1241 
buÂå
 = 
buf„r
, 
node
 = 
ty≥
->
chûd
->
√xt
->next;

1242 
node
;

1243 
buÂå
 +
	`°æí
(bufptr))

1245 i‡(
node
->
vÆue
.
ãxt
.
whôe•a˚
 && 
buÂå
 > 
buf„r
)

1246 *
buÂå
++ = ' ';

1248 
	`°r˝y
(
buÂå
, 
node
->
vÆue
.
ãxt
.
°rög
);

1250 
√xt
 = 
node
->next;

1251 
	`mxmlDñëe
(
node
);

1252 
node
 = 
√xt
;

1255 
	`mxmlEÀmítSëAâr
(
°ru˘˛ass
, "∑ª¡", 
buf„r
);

1257 
	`mxmlDñëe
(
ty≥
);

1258 
ty≥
 = 
NULL
;

1262 
	`mxmlDñëe
(
ty≥
);

1263 
ty≥
 = 
NULL
;

1266 i‡(
ty≥de‚ode
 && 
commít
->
œ°_chûd
)

1272 
	`mxmlNewText
(
commít
, 0,

1273 
commít
->
œ°_chûd
->
vÆue
.
ãxt
.
°rög
);

1274 
des¸ùti⁄
 = 
	`mxmlNewEÀmít
(
ty≥de‚ode
, "description");

1275 #ifde‡
DEBUG


1276 
	`Ârötf
(
°dîr
,

1278 
commít
->
œ°_chûd
, commít->
chûd
);

1280 
	`upd©e_commít
(
ty≥de‚ode
, 
commít
->
œ°_chûd
);

1281 
	`mxmlAdd
(
des¸ùti⁄
, 
MXML_ADD_AFTER
, 
MXML_ADD_TO_PARENT
,

1282 
commít
->
œ°_chûd
);

1285 
des¸ùti⁄
 = 
	`mxmlNewEÀmít
(
°ru˘˛ass
, "description");

1286 #ifde‡
DEBUG


1287 
	`Ârötf
(
°dîr
, "ádding comment %p/%pÅo %s...\n",

1288 
commít
->
œ°_chûd
, commít->
chûd
,

1289 
°ru˘˛ass
->
vÆue
.
ñemít
.
«me
);

1291 
	`upd©e_commít
(
°ru˘˛ass
, 
commít
->
œ°_chûd
);

1292 
	`mxmlAdd
(
des¸ùti⁄
, 
MXML_ADD_AFTER
, 
MXML_ADD_TO_PARENT
,

1293 
commít
->
œ°_chûd
);

1295 i‡(
	`sˇn_fûe
(
fûíame
, 
Â
, 
°ru˘˛ass
))

1297 
	`mxmlDñëe
(
commít
);

1301 #ifde‡
DEBUG


1302 
	`Âuts
("ÉndedÅy≥def...\n", 
°dîr
);

1304 
°ru˘˛ass
 = 
NULL
;

1307 i‡(
ty≥
 &&Åy≥->
chûd
 &&Åy≥->chûd->
√xt
 &&

1308 (!
	`°rcmp
(
ty≥
->
chûd
->
vÆue
.
ãxt
.
°rög
, "enum") ||

1309 (!
	`°rcmp
(
ty≥
->
chûd
->
vÆue
.
ãxt
.
°rög
, "typedef") &&

1310 !
	`°rcmp
(
ty≥
->
chûd
->
√xt
->
vÆue
.
ãxt
.
°rög
, "enum"))))

1316 i‡(!
	`°rcmp
(
ty≥
->
chûd
->
vÆue
.
ãxt
.
°rög
, "typedef"))

1318 #ifde‡
DEBUG


1319 
	`Âuts
(" sèπögÅy≥def...\n", 
°dîr
);

1322 
ty≥de‚ode
 = 
	`mxmlNewEÀmít
(
MXML_NO_PARENT
, "typedef");

1323 
	`mxmlDñëe
(
ty≥
->
chûd
);

1326 
ty≥de‚ode
 = 
NULL
;

1328 
íumî©i⁄
 = 
	`mxmlNewEÀmít
(
MXML_NO_PARENT
, "enumeration");

1330 #ifde‡
DEBUG


1331 
	`Ârötf
(
°dîr
, "Enumeration: <<<< %s >>>\n",

1332 
ty≥
->
chûd
->
√xt
 ?

1333 
ty≥
->
chûd
->
√xt
->
vÆue
.
ãxt
.
°rög
 : "(noname)");

1336 i‡(
ty≥
->
chûd
->
√xt
)

1338 
	`mxmlEÀmítSëAâr
(
íumî©i⁄
, "name",

1339 
ty≥
->
chûd
->
√xt
->
vÆue
.
ãxt
.
°rög
);

1340 
	`s‹t_node
(
åì
, 
íumî©i⁄
);

1343 i‡(
ty≥de‚ode
 && 
ty≥
->
chûd
)

1344 
ty≥
->
chûd
->
vÆue
.
ãxt
.
whôe•a˚
 = 0;

1347 
	`mxmlDñëe
(
ty≥
);

1348 
ty≥
 = 
NULL
;

1351 i‡(
ty≥de‚ode
 && 
commít
->
œ°_chûd
)

1357 
	`mxmlNewText
(
commít
, 0,

1358 
commít
->
œ°_chûd
->
vÆue
.
ãxt
.
°rög
);

1359 
des¸ùti⁄
 = 
	`mxmlNewEÀmít
(
ty≥de‚ode
, "description");

1360 #ifde‡
DEBUG


1361 
	`Ârötf
(
°dîr
,

1363 
commít
->
œ°_chûd
, commít->
chûd
);

1365 
	`upd©e_commít
(
ty≥de‚ode
, 
commít
->
œ°_chûd
);

1366 
	`mxmlAdd
(
des¸ùti⁄
, 
MXML_ADD_AFTER
, 
MXML_ADD_TO_PARENT
,

1367 
commít
->
œ°_chûd
);

1370 
des¸ùti⁄
 = 
	`mxmlNewEÀmít
(
íumî©i⁄
, "description");

1371 #ifde‡
DEBUG


1372 
	`Ârötf
(
°dîr
, "ádding comment %p/%pÅoÉnumeration...\n",

1373 
commít
->
œ°_chûd
, commít->
chûd
);

1375 
	`upd©e_commít
(
íumî©i⁄
, 
commít
->
œ°_chûd
);

1376 
	`mxmlAdd
(
des¸ùti⁄
, 
MXML_ADD_AFTER
, 
MXML_ADD_TO_PARENT
,

1377 
commít
->
œ°_chûd
);

1379 i‡(
ty≥
 &&Åy≥->
chûd
 &&

1380 !
	`°rcmp
(
ty≥
->
chûd
->
vÆue
.
ãxt
.
°rög
, "extern"))

1382 i‡(
	`sˇn_fûe
(
fûíame
, 
Â
, 
åì
))

1384 
	`mxmlDñëe
(
commít
);

1388 i‡(
ty≥
)

1390 
	`mxmlDñëe
(
ty≥
);

1391 
ty≥
 = 
NULL
;

1394 
bø˚s
 ++;

1395 
fun˘i⁄
 = 
NULL
;

1396 
v¨übÀ
 = 
NULL
;

1400 #ifde‡
DEBUG


1401 
	`Âuts
(" clo£ bø˚...\n", 
°dîr
);

1404 i‡(
°ru˘˛ass
)

1405 
sc›e
 = 
NULL
;

1407 i‡(!
ty≥de‚ode
)

1408 
íumî©i⁄
 = 
NULL
;

1410 
c⁄°™t
 = 
NULL
;

1411 
°ru˘˛ass
 = 
NULL
;

1413 i‡(
bø˚s
 > 0)

1414 
bø˚s
 --;

1417 
	`mxmlDñëe
(
commít
);

1423 i‡(
ty≥
)

1425 #ifde‡
DEBUG


1426 
	`Âuts
("Idítifõr: <<<< ( >>>\n", 
°dîr
);

1428 
	`mxmlNewText
(
ty≥
, 0, "(");

1431 
∑ªns
 ++;

1435 i‡(
ty≥
 && 
∑ªns
)

1437 #ifde‡
DEBUG


1438 
	`Âuts
("Idítifõr: <<<< ) >>>\n", 
°dîr
);

1440 
	`mxmlNewText
(
ty≥
, 0, ")");

1443 i‡(
fun˘i⁄
 && 
ty≥
 && !
∑ªns
)

1449 i‡(
ty≥
->
chûd
 &&Åy≥->chûd->
√xt
)

1450 
v¨übÀ
 = 
	`add_v¨übÀ
(
fun˘i⁄
, "¨gumít", 
ty≥
);

1452 
	`mxmlDñëe
(
ty≥
);

1454 
ty≥
 = 
NULL
;

1457 i‡(
∑ªns
 > 0)

1458 
∑ªns
 --;

1462 #ifde‡
DEBUG


1463 
	`Âuts
("Idítifõr: <<<< ; >>>\n", 
°dîr
);

1464 
	`Ârötf
(
°dîr
, "Énumeration=%p, function=%p,Åype=%p,Åype->child=%p,Åypedefnode=%p\n",

1465 
íumî©i⁄
, 
fun˘i⁄
, 
ty≥
,Åy≥ ?Åy≥->
chûd
 : 
NULL
, 
ty≥de‚ode
);

1468 i‡(
fun˘i⁄
)

1470 i‡(!
	`°rcmp
(
åì
->
vÆue
.
ñemít
.
«me
, "class"))

1472 #ifde‡
DEBUG


1473 
	`Âuts
(" ADDING FUNCTION TO CLASS\n", 
°dîr
);

1475 
	`s‹t_node
(
åì
, 
fun˘i⁄
);

1478 
	`mxmlDñëe
(
fun˘i⁄
);

1480 
fun˘i⁄
 = 
NULL
;

1481 
v¨übÀ
 = 
NULL
;

1484 i‡(
ty≥
)

1490 i‡(
ty≥
->
chûd
 &&

1491 !
	`°rcmp
(
ty≥
->
chûd
->
vÆue
.
ãxt
.
°rög
, "typedef"))

1497 
ty≥de‚ode
 = 
	`mxmlNewEÀmít
(
MXML_NO_PARENT
, "typedef");

1499 
node
 = 
ty≥
->
chûd
->
√xt
;Çode;Çode =Çode->next)

1500 i‡(!
	`°rcmp
(
node
->
vÆue
.
ãxt
.
°rög
, "("))

1503 i‡(
node
)

1505 
node
 =Çode->
√xt
;Çode;Çode =Çode->next)

1506 i‡(
	`°rcmp
(
node
->
vÆue
.
ãxt
.
°rög
, "*"))

1510 i‡(!
node
)

1511 
node
 = 
ty≥
->
œ°_chûd
;

1513 #ifde‡
DEBUG


1514 
	`Ârötf
(
°dîr
, " ADDING TYPEDEF FOR %p(%s)...\n",

1515 
node
,Çode->
vÆue
.
ãxt
.
°rög
);

1518 
	`mxmlEÀmítSëAâr
(
ty≥de‚ode
, "name",

1519 
node
->
vÆue
.
ãxt
.
°rög
);

1520 
	`s‹t_node
(
åì
, 
ty≥de‚ode
);

1522 i‡(
ty≥
->
chûd
 !
node
)

1523 
	`mxmlDñëe
(
ty≥
->
chûd
);

1525 
	`mxmlDñëe
(
node
);

1527 i‡(
ty≥
->
chûd
)

1528 
ty≥
->
chûd
->
vÆue
.
ãxt
.
whôe•a˚
 = 0;

1530 
	`mxmlAdd
(
ty≥de‚ode
, 
MXML_ADD_AFTER
, 
MXML_ADD_TO_PARENT
,

1531 
ty≥
);

1532 
ty≥
 = 
NULL
;

1535 i‡(
ty≥de‚ode
 && 
íumî©i⁄
)

1541 
node
 = 
ty≥
->
chûd
;

1543 #ifde‡
DEBUG


1544 
	`Ârötf
(
°dîr
, " ADDING TYPEDEF FOR %p(%s)...\n",

1545 
node
,Çode->
vÆue
.
ãxt
.
°rög
);

1548 
	`mxmlEÀmítSëAâr
(
ty≥de‚ode
, "name",

1549 
node
->
vÆue
.
ãxt
.
°rög
);

1550 
	`s‹t_node
(
åì
, 
ty≥de‚ode
);

1551 
	`mxmlDñëe
(
ty≥
);

1553 
ty≥
 = 
	`mxmlNewEÀmít
(
ty≥de‚ode
, "type");

1554 
	`mxmlNewText
(
ty≥
, 0, "enum");

1555 
	`mxmlNewText
(
ty≥
, 1,

1556 
	`mxmlEÀmítGëAâr
(
íumî©i⁄
, "name"));

1557 
íumî©i⁄
 = 
NULL
;

1558 
ty≥
 = 
NULL
;

1562 
	`mxmlDñëe
(
ty≥
);

1563 
ty≥
 = 
NULL
;

1568 i‡(
ty≥
)

1570 #ifde‡
DEBUG


1571 
	`Âuts
("Idítifõr: <<<< : >>>\n", 
°dîr
);

1573 
	`mxmlNewText
(
ty≥
, 1, ":");

1578 i‡(
ty≥
)

1580 #ifde‡
DEBUG


1581 
	`Âuts
("Idítifõr: <<<< * >>>\n", 
°dîr
);

1583 
ch
 = 
ty≥
->
œ°_chûd
->
vÆue
.
ãxt
.
°rög
[0];

1584 
	`mxmlNewText
(
ty≥
, 
	`iß um
(
ch
) || ch == '_', "*");

1589 i‡(
ty≥
 && !
íumî©i⁄
)

1591 #ifde‡
DEBUG


1592 
	`Âuts
("Idítifõr: <<<< , >>>\n", 
°dîr
);

1594 
	`mxmlNewText
(
ty≥
, 0, ",");

1599 i‡(
ty≥
)

1601 #ifde‡
DEBUG


1602 
	`Âuts
("Idítifõr: <<<< & >>>\n", 
°dîr
);

1604 
	`mxmlNewText
(
ty≥
, 1, "&");

1609 i‡(
ty≥
)

1611 #ifde‡
DEBUG


1612 
	`Âuts
("Idítifõr: <<<< + >>>\n", 
°dîr
);

1614 
ch
 = 
ty≥
->
œ°_chûd
->
vÆue
.
ãxt
.
°rög
[0];

1615 
	`mxmlNewText
(
ty≥
, 
	`iß um
(
ch
) || ch == '_', "+");

1620 i‡(
ty≥
)

1622 #ifde‡
DEBUG


1623 
	`Âuts
("Idítifõr: <<<< - >>>\n", 
°dîr
);

1625 
ch
 = 
ty≥
->
œ°_chûd
->
vÆue
.
ãxt
.
°rög
[0];

1626 
	`mxmlNewText
(
ty≥
, 
	`iß um
(
ch
) || ch == '_', "-");

1631 i‡(
ty≥
)

1633 #ifde‡
DEBUG


1634 
	`Âuts
("Idítifõr: <<<< = >>>\n", 
°dîr
);

1636 
ch
 = 
ty≥
->
œ°_chûd
->
vÆue
.
ãxt
.
°rög
[0];

1637 
	`mxmlNewText
(
ty≥
, 
	`iß um
(
ch
) || ch == '_', "=");

1642 i‡(
	`iß um
(
ch
) || ch == '_' || ch == '.' || ch == ':' || ch == '~')

1644 
°©e
 = 
STATE_IDENTIFIER
;

1645 
buÂå
 = 
buf„r
;

1646 *
buÂå
++ = 
ch
;

1652 
STATE_PREPROCESSOR
 :

1653 i‡(
ch
 == '\n')

1654 
°©e
 = 
STATE_NONE
;

1655 i‡(
ch
 == '\\')

1656 
	`gëc
(
Â
);

1659 
STATE_C_COMMENT
 :

1660 
ch
)

1663 (
ch
 = 
	`gëc
(
Â
)Ë!
EOF
)

1664 i‡(
ch
 == '*')

1666 
ch
 = 
	`gëc
(
Â
);

1668 i‡(
ch
 == '/')

1670 *
buÂå
 = '\0';

1672 i‡(
commít
->
chûd
 !commít->
œ°_chûd
)

1674 #ifde‡
DEBUG


1675 
	`Ârötf
(
°dîr
, "Ñemoving comment %p(%20.20s),Üast comment %p(%20.20s)...\n",

1676 
commít
->
chûd
,

1677 
commít
->
chûd
 ? commít->chûd->
vÆue
.
ãxt
.
°rög
 : "",

1678 
commít
->
œ°_chûd
,

1679 
commít
->
œ°_chûd
 ? commít->œ°_chûd->
vÆue
.
ãxt
.
°rög
 : "");

1681 
	`mxmlDñëe
(
commít
->
chûd
);

1682 #ifde‡
DEBUG


1683 
	`Ârötf
(
°dîr
, "Çew comment %p,Üast comment %p...\n",

1684 
commít
->
chûd
, commít->
œ°_chûd
);

1688 #ifde‡
DEBUG


1689 
	`Ârötf
(
°dîr
,

1692 
v¨übÀ
, 
c⁄°™t
, 
ty≥de‚ode
,

1693 
åì
->
vÆue
.
ñemít
.
«me
);

1696 i‡(
v¨übÀ
)

1698 i‡(
	`°r°r
(
buf„r
, "@private@"))

1704 
	`mxmlDñëe
(
v¨übÀ
);

1708 
des¸ùti⁄
 = 
	`mxmlNewEÀmít
(
v¨übÀ
, "description");

1709 #ifde‡
DEBUG


1710 
	`Ârötf
(
°dîr
,

1712 
commít
->
œ°_chûd
, commít->
chûd
);

1714 
	`mxmlNewText
(
commít
, 0, 
buf„r
);

1715 
	`upd©e_commít
(
v¨übÀ
,

1716 
	`mxmlNewText
(
des¸ùti⁄
, 0, 
buf„r
));

1719 
v¨übÀ
 = 
NULL
;

1721 i‡(
c⁄°™t
)

1723 i‡(
	`°r°r
(
buf„r
, "@private@"))

1729 
	`mxmlDñëe
(
c⁄°™t
);

1733 
des¸ùti⁄
 = 
	`mxmlNewEÀmít
(
c⁄°™t
, "description");

1734 #ifde‡
DEBUG


1735 
	`Ârötf
(
°dîr
,

1737 
commít
->
œ°_chûd
, commít->
chûd
);

1739 
	`mxmlNewText
(
commít
, 0, 
buf„r
);

1740 
	`upd©e_commít
(
c⁄°™t
,

1741 
	`mxmlNewText
(
des¸ùti⁄
, 0, 
buf„r
));

1744 
c⁄°™t
 = 
NULL
;

1746 i‡(
ty≥de‚ode
)

1748 i‡(
	`°r°r
(
buf„r
, "@private@"))

1754 
	`mxmlDñëe
(
ty≥de‚ode
);

1756 i‡(
°ru˘˛ass
)

1758 
	`mxmlDñëe
(
°ru˘˛ass
);

1759 
°ru˘˛ass
 = 
NULL
;

1762 i‡(
íumî©i⁄
)

1764 
	`mxmlDñëe
(
íumî©i⁄
);

1765 
íumî©i⁄
 = 
NULL
;

1770 
des¸ùti⁄
 = 
	`mxmlNewEÀmít
(
ty≥de‚ode
, "description");

1771 #ifde‡
DEBUG


1772 
	`Ârötf
(
°dîr
,

1774 
commít
->
œ°_chûd
, commít->
chûd
,

1775 
	`mxmlEÀmítGëAâr
(
ty≥de‚ode
, "name"));

1777 
	`mxmlNewText
(
commít
, 0, 
buf„r
);

1778 
	`upd©e_commít
(
ty≥de‚ode
,

1779 
	`mxmlNewText
(
des¸ùti⁄
, 0, 
buf„r
));

1781 i‡(
°ru˘˛ass
)

1783 
des¸ùti⁄
 = 
	`mxmlNewEÀmít
(
°ru˘˛ass
, "description");

1784 
	`upd©e_commít
(
°ru˘˛ass
,

1785 
	`mxmlNewText
(
des¸ùti⁄
, 0, 
buf„r
));

1787 i‡(
íumî©i⁄
)

1789 
des¸ùti⁄
 = 
	`mxmlNewEÀmít
(
íumî©i⁄
, "description");

1790 
	`upd©e_commít
(
íumî©i⁄
,

1791 
	`mxmlNewText
(
des¸ùti⁄
, 0, 
buf„r
));

1795 
ty≥de‚ode
 = 
NULL
;

1797 i‡(
	`°rcmp
(
åì
->
vÆue
.
ñemít
.
«me
, "mxmldoc") &&

1798 !
	`mxmlFödEÀmít
(
åì
,Åree, "description",

1799 
NULL
, NULL, 
MXML_DESCEND_FIRST
))

1801 
des¸ùti⁄
 = 
	`mxmlNewEÀmít
(
åì
, "description");

1802 #ifde‡
DEBUG


1803 
	`Ârötf
(
°dîr
, "ádding comment %p/%pÅoÖarent...\n",

1804 
commít
->
œ°_chûd
, commít->
chûd
);

1806 
	`mxmlNewText
(
commít
, 0, 
buf„r
);

1807 
	`upd©e_commít
(
åì
,

1808 
	`mxmlNewText
(
des¸ùti⁄
, 0, 
buf„r
));

1812 #ifde‡
DEBUG


1813 
	`Ârötf
(
°dîr
, " beforeádding comment, child=%p,Üast_child=%p\n",

1814 
commít
->
chûd
, commít->
œ°_chûd
);

1816 
	`mxmlNewText
(
commít
, 0, 
buf„r
);

1817 #ifde‡
DEBUG


1818 
	`Ârötf
(
°dîr
, "áfterádding comment, child=%p,Üast_child=%p\n",

1819 
commít
->
chûd
, commít->
œ°_chûd
);

1822 #ifde‡
DEBUG


1823 
	`Ârötf
(
°dîr
, "C commít: <<<< %†>>>\n", 
buf„r
);

1826 
°©e
 = 
STATE_NONE
;

1830 
	`ungëc
(
ch
, 
Â
);

1832 i‡(
ch
 ='\n' && 
buÂå
 > 
buf„r
 &&

1833 
buÂå
 < (
buf„r
 + (buffer) - 1))

1834 *
buÂå
++ = 
ch
;

1835 i‡(!
	`is•a˚
(
ch
))

1838 i‡(
ch
 !
EOF
)

1839 
	`ungëc
(
ch
, 
Â
);

1841 i‡(
buÂå
 > 
buf„r
 && bufptr < (buffer + (buffer) - 1))

1842 *
buÂå
++ = '\n';

1846 i‡(
ch
 ='/' && 
buÂå
 > 
buf„r
 && bufptr[-1] == '*')

1848 
buÂå
 > 
buf„r
 &&

1849 (
buÂå
[-1] ='*' || 
	`is•a˚
(bufptr[-1] & 255)))

1850 
buÂå
 --;

1851 *
buÂå
 = '\0';

1853 i‡(
commít
->
chûd
 !commít->
œ°_chûd
)

1855 #ifde‡
DEBUG


1856 
	`Ârötf
(
°dîr
, "Ñemoving comment %p(%20.20s),Üast comment %p(%20.20s)...\n",

1857 
commít
->
chûd
,

1858 
commít
->
chûd
 ? commít->chûd->
vÆue
.
ãxt
.
°rög
 : "",

1859 
commít
->
œ°_chûd
,

1860 
commít
->
œ°_chûd
 ? commít->œ°_chûd->
vÆue
.
ãxt
.
°rög
 : "");

1862 
	`mxmlDñëe
(
commít
->
chûd
);

1863 #ifde‡
DEBUG


1864 
	`Ârötf
(
°dîr
, "Çew comment %p,Üast comment %p...\n",

1865 
commít
->
chûd
, commít->
œ°_chûd
);

1869 #ifde‡
DEBUG


1870 
	`Ârötf
(
°dîr
,

1873 
v¨übÀ
, 
c⁄°™t
, 
ty≥de‚ode
,

1874 
åì
->
vÆue
.
ñemít
.
«me
);

1877 i‡(
v¨übÀ
)

1879 i‡(
	`°r°r
(
buf„r
, "@private@"))

1885 
	`mxmlDñëe
(
v¨übÀ
);

1889 
des¸ùti⁄
 = 
	`mxmlNewEÀmít
(
v¨übÀ
, "description");

1890 #ifde‡
DEBUG


1891 
	`Ârötf
(
°dîr
, "ádding comment %p/%pÅo variable...\n",

1892 
commít
->
œ°_chûd
, commít->
chûd
);

1894 
	`mxmlNewText
(
commít
, 0, 
buf„r
);

1895 
	`upd©e_commít
(
v¨übÀ
,

1896 
	`mxmlNewText
(
des¸ùti⁄
, 0, 
buf„r
));

1899 
v¨übÀ
 = 
NULL
;

1901 i‡(
c⁄°™t
)

1903 i‡(
	`°r°r
(
buf„r
, "@private@"))

1909 
	`mxmlDñëe
(
c⁄°™t
);

1913 
des¸ùti⁄
 = 
	`mxmlNewEÀmít
(
c⁄°™t
, "description");

1914 #ifde‡
DEBUG


1915 
	`Ârötf
(
°dîr
, "ádding comment %p/%pÅo constant...\n",

1916 
commít
->
œ°_chûd
, commít->
chûd
);

1918 
	`mxmlNewText
(
commít
, 0, 
buf„r
);

1919 
	`upd©e_commít
(
c⁄°™t
,

1920 
	`mxmlNewText
(
des¸ùti⁄
, 0, 
buf„r
));

1923 
c⁄°™t
 = 
NULL
;

1925 i‡(
ty≥de‚ode
)

1927 i‡(
	`°r°r
(
buf„r
, "@private@"))

1933 
	`mxmlDñëe
(
ty≥de‚ode
);

1935 i‡(
°ru˘˛ass
)

1937 
	`mxmlDñëe
(
°ru˘˛ass
);

1938 
°ru˘˛ass
 = 
NULL
;

1941 i‡(
íumî©i⁄
)

1943 
	`mxmlDñëe
(
íumî©i⁄
);

1944 
íumî©i⁄
 = 
NULL
;

1949 
des¸ùti⁄
 = 
	`mxmlNewEÀmít
(
ty≥de‚ode
, "description");

1950 #ifde‡
DEBUG


1951 
	`Ârötf
(
°dîr
,

1953 
commít
->
œ°_chûd
, commít->
chûd
,

1954 
	`mxmlEÀmítGëAâr
(
ty≥de‚ode
, "name"));

1956 
	`mxmlNewText
(
commít
, 0, 
buf„r
);

1957 
	`upd©e_commít
(
ty≥de‚ode
,

1958 
	`mxmlNewText
(
des¸ùti⁄
, 0, 
buf„r
));

1960 i‡(
°ru˘˛ass
)

1962 
des¸ùti⁄
 = 
	`mxmlNewEÀmít
(
°ru˘˛ass
, "description");

1963 
	`upd©e_commít
(
°ru˘˛ass
,

1964 
	`mxmlNewText
(
des¸ùti⁄
, 0, 
buf„r
));

1966 i‡(
íumî©i⁄
)

1968 
des¸ùti⁄
 = 
	`mxmlNewEÀmít
(
íumî©i⁄
, "description");

1969 
	`upd©e_commít
(
íumî©i⁄
,

1970 
	`mxmlNewText
(
des¸ùti⁄
, 0, 
buf„r
));

1974 
ty≥de‚ode
 = 
NULL
;

1976 i‡(
	`°rcmp
(
åì
->
vÆue
.
ñemít
.
«me
, "mxmldoc") &&

1977 !
	`mxmlFödEÀmít
(
åì
,Åree, "description",

1978 
NULL
, NULL, 
MXML_DESCEND_FIRST
))

1980 
des¸ùti⁄
 = 
	`mxmlNewEÀmít
(
åì
, "description");

1981 #ifde‡
DEBUG


1982 
	`Ârötf
(
°dîr
, "ádding comment %p/%pÅoÖarent...\n",

1983 
commít
->
œ°_chûd
, commít->
chûd
);

1985 
	`mxmlNewText
(
commít
, 0, 
buf„r
);

1986 
	`upd©e_commít
(
åì
,

1987 
	`mxmlNewText
(
des¸ùti⁄
, 0, 
buf„r
));

1990 
	`mxmlNewText
(
commít
, 0, 
buf„r
);

1992 #ifde‡
DEBUG


1993 
	`Ârötf
(
°dîr
, "C commít: <<<< %†>>>\n", 
buf„r
);

1996 
°©e
 = 
STATE_NONE
;

2001 i‡(
ch
 =' ' && 
buÂå
 =
buf„r
)

2004 i‡(
buÂå
 < (
buf„r
 + (buffer) - 1))

2005 *
buÂå
++ = 
ch
;

2010 
STATE_CXX_COMMENT
 :

2011 i‡(
ch
 == '\n')

2013 
°©e
 = 
STATE_NONE
;

2014 *
buÂå
 = '\0';

2016 i‡(
commít
->
chûd
 !commít->
œ°_chûd
)

2018 #ifde‡
DEBUG


2019 
	`Ârötf
(
°dîr
, "Ñemoving comment %p(%20.20s),Üast comment %p(%20.20s)...\n",

2020 
commít
->
chûd
,

2021 
commít
->
chûd
 ? commít->chûd->
vÆue
.
ãxt
.
°rög
 : "",

2022 
commít
->
œ°_chûd
,

2023 
commít
->
œ°_chûd
 ? commít->œ°_chûd->
vÆue
.
ãxt
.
°rög
 : "");

2025 
	`mxmlDñëe
(
commít
->
chûd
);

2026 #ifde‡
DEBUG


2027 
	`Ârötf
(
°dîr
, "Çew comment %p,Üast comment %p...\n",

2028 
commít
->
chûd
, commít->
œ°_chûd
);

2032 i‡(
v¨übÀ
)

2034 i‡(
	`°r°r
(
buf„r
, "@private@"))

2040 
	`mxmlDñëe
(
v¨übÀ
);

2044 
des¸ùti⁄
 = 
	`mxmlNewEÀmít
(
v¨übÀ
, "description");

2045 #ifde‡
DEBUG


2046 
	`Ârötf
(
°dîr
, "ádding comment %p/%pÅo variable...\n",

2047 
commít
->
œ°_chûd
, commít->
chûd
);

2049 
	`mxmlNewText
(
commít
, 0, 
buf„r
);

2050 
	`upd©e_commít
(
v¨übÀ
,

2051 
	`mxmlNewText
(
des¸ùti⁄
, 0, 
buf„r
));

2054 
v¨übÀ
 = 
NULL
;

2056 i‡(
c⁄°™t
)

2058 i‡(
	`°r°r
(
buf„r
, "@private@"))

2064 
	`mxmlDñëe
(
c⁄°™t
);

2068 
des¸ùti⁄
 = 
	`mxmlNewEÀmít
(
c⁄°™t
, "description");

2069 #ifde‡
DEBUG


2070 
	`Ârötf
(
°dîr
, "ádding comment %p/%pÅo constant...\n",

2071 
commít
->
œ°_chûd
, commít->
chûd
);

2073 
	`mxmlNewText
(
commít
, 0, 
buf„r
);

2074 
	`upd©e_commít
(
c⁄°™t
,

2075 
	`mxmlNewText
(
des¸ùti⁄
, 0, 
buf„r
));

2078 
c⁄°™t
 = 
NULL
;

2080 i‡(
ty≥de‚ode
)

2082 i‡(
	`°r°r
(
buf„r
, "@private@"))

2088 
	`mxmlDñëe
(
ty≥de‚ode
);

2089 
ty≥de‚ode
 = 
NULL
;

2091 i‡(
°ru˘˛ass
)

2093 
	`mxmlDñëe
(
°ru˘˛ass
);

2094 
°ru˘˛ass
 = 
NULL
;

2097 i‡(
íumî©i⁄
)

2099 
	`mxmlDñëe
(
íumî©i⁄
);

2100 
íumî©i⁄
 = 
NULL
;

2105 
des¸ùti⁄
 = 
	`mxmlNewEÀmít
(
ty≥de‚ode
, "description");

2106 #ifde‡
DEBUG


2107 
	`Ârötf
(
°dîr
, "ádding comment %p/%pÅoÅypedef %s...\n",

2108 
commít
->
œ°_chûd
, commít->
chûd
,

2109 
	`mxmlEÀmítGëAâr
(
ty≥de‚ode
, "name"));

2111 
	`mxmlNewText
(
commít
, 0, 
buf„r
);

2112 
	`upd©e_commít
(
ty≥de‚ode
,

2113 
	`mxmlNewText
(
des¸ùti⁄
, 0, 
buf„r
));

2115 i‡(
°ru˘˛ass
)

2117 
des¸ùti⁄
 = 
	`mxmlNewEÀmít
(
°ru˘˛ass
, "description");

2118 
	`upd©e_commít
(
°ru˘˛ass
,

2119 
	`mxmlNewText
(
des¸ùti⁄
, 0, 
buf„r
));

2121 i‡(
íumî©i⁄
)

2123 
des¸ùti⁄
 = 
	`mxmlNewEÀmít
(
íumî©i⁄
, "description");

2124 
	`upd©e_commít
(
íumî©i⁄
,

2125 
	`mxmlNewText
(
des¸ùti⁄
, 0, 
buf„r
));

2129 i‡(
	`°rcmp
(
åì
->
vÆue
.
ñemít
.
«me
, "mxmldoc") &&

2130 !
	`mxmlFödEÀmít
(
åì
,Åree, "description",

2131 
NULL
, NULL, 
MXML_DESCEND_FIRST
))

2133 
des¸ùti⁄
 = 
	`mxmlNewEÀmít
(
åì
, "description");

2134 #ifde‡
DEBUG


2135 
	`Ârötf
(
°dîr
, "ádding comment %p/%pÅoÖarent...\n",

2136 
commít
->
œ°_chûd
, commít->
chûd
);

2138 
	`mxmlNewText
(
commít
, 0, 
buf„r
);

2139 
	`upd©e_commít
(
åì
,

2140 
	`mxmlNewText
(
des¸ùti⁄
, 0, 
buf„r
));

2143 
	`mxmlNewText
(
commít
, 0, 
buf„r
);

2145 #ifde‡
DEBUG


2146 
	`Ârötf
(
°dîr
, "C++ commít: <<<< %†>>>\n", 
buf„r
);

2149 i‡(
ch
 =' ' && 
buÂå
 =
buf„r
)

2151 i‡(
buÂå
 < (
buf„r
 + (buffer) - 1))

2152 *
buÂå
++ = 
ch
;

2155 
STATE_STRING
 :

2156 *
buÂå
++ = 
ch
;

2158 i‡(
ch
 == '\\')

2159 *
buÂå
++ = 
	`gëc
(
Â
);

2160 i‡(
ch
 == '\"')

2162 *
buÂå
 = '\0';

2164 i‡(
ty≥
)

2165 
	`mxmlNewText
(
ty≥
,Åy≥->
chûd
 !
NULL
, 
buf„r
);

2167 
°©e
 = 
STATE_NONE
;

2171 
STATE_CHARACTER
 :

2172 *
buÂå
++ = 
ch
;

2174 i‡(
ch
 == '\\')

2175 *
buÂå
++ = 
	`gëc
(
Â
);

2176 i‡(
ch
 == '\'')

2178 *
buÂå
 = '\0';

2180 i‡(
ty≥
)

2181 
	`mxmlNewText
(
ty≥
,Åy≥->
chûd
 !
NULL
, 
buf„r
);

2183 
°©e
 = 
STATE_NONE
;

2187 
STATE_IDENTIFIER
 :

2188 i‡(
	`iß um
(
ch
) || ch == '_' || ch == '[' || ch == ']' ||

2189 (
ch
 =',' && (
∑ªns
 > 1 || (
ty≥
 && !
íumî©i⁄
 && !
fun˘i⁄
))) ||

2190 
ch
 == ':' || ch == '.' || ch == '~')

2192 i‡(
buÂå
 < (
buf„r
 + (buffer) - 1))

2193 *
buÂå
++ = 
ch
;

2197 
	`ungëc
(
ch
, 
Â
);

2198 *
buÂå
 = '\0';

2199 
°©e
 = 
STATE_NONE
;

2201 #ifde‡
DEBUG


2202 
	`Ârötf
(
°dîr
, " braces=%d,Åype=%p,Åype->child=%p, buffer=\"%s\"\n",

2203 
bø˚s
, 
ty≥
,Åy≥ ?Åy≥->
chûd
 : 
NULL
, 
buf„r
);

2206 i‡(!
bø˚s
)

2208 i‡(!
ty≥
 || !ty≥->
chûd
)

2210 i‡(!
	`°rcmp
(
åì
->
vÆue
.
ñemít
.
«me
, "class"))

2212 i‡(!
	`°rcmp
(
buf„r
, "public") ||

2213 !
	`°rcmp
(
buf„r
, "public:"))

2215 
sc›e
 = "public";

2216 #ifde‡
DEBUG


2217 
	`Âuts
(" sc›êpublic\n", 
°dîr
);

2221 i‡(!
	`°rcmp
(
buf„r
, "private") ||

2222 !
	`°rcmp
(
buf„r
, "private:"))

2224 
sc›e
 = "private";

2225 #ifde‡
DEBUG


2226 
	`Âuts
(" sc›ê¥iv©e\n", 
°dîr
);

2230 i‡(!
	`°rcmp
(
buf„r
, "protected") ||

2231 !
	`°rcmp
(
buf„r
, "protected:"))

2233 
sc›e
 = "protected";

2234 #ifde‡
DEBUG


2235 
	`Âuts
(" sc›ê¥Ÿe˘ed\n", 
°dîr
);

2242 i‡(!
ty≥
)

2243 
ty≥
 = 
	`mxmlNewEÀmít
(
MXML_NO_PARENT
, "type");

2245 #ifde‡
DEBUG


2246 
	`Ârötf
(
°dîr
, " function=%p (%s),Åype->child=%p, ch='%c',Öarens=%d\n",

2247 
fun˘i⁄
,

2248 
fun˘i⁄
 ? 
	`mxmlEÀmítGëAâr
(function, "name") : "null",

2249 
ty≥
->
chûd
, 
ch
, 
∑ªns
);

2252 i‡(!
fun˘i⁄
 && 
ch
 == '(')

2254 i‡(
ty≥
->
chûd
 &&

2255 !
	`°rcmp
(
ty≥
->
chûd
->
vÆue
.
ãxt
.
°rög
, "extern"))

2261 
	`mxmlDñëe
(
ty≥
);

2262 
ty≥
 = 
NULL
;

2266 i‡(
ty≥
->
chûd
 &&

2267 !
	`°rcmp
(
ty≥
->
chûd
->
vÆue
.
ãxt
.
°rög
, "static") &&

2268 !
	`°rcmp
(
åì
->
vÆue
.
ñemít
.
«me
, "mxmldoc"))

2274 
	`mxmlDñëe
(
ty≥
);

2275 
ty≥
 = 
NULL
;

2279 
fun˘i⁄
 = 
	`mxmlNewEÀmít
(
MXML_NO_PARENT
, "function");

2280 i‡((
buÂå
 = 
	`°rchr
(
buf„r
, ':')Ë!
NULL
 && bufptr[1] == ':')

2282 *
buÂå
 = '\0';

2283 
buÂå
 += 2;

2285 i‡((
f°ru˘˛ass
 =

2286 
	`mxmlFödEÀmít
(
åì
,Åªe, "˛ass", "«me", 
buf„r
,

2287 
MXML_DESCEND_FIRST
)Ë=
NULL
)

2288 
f°ru˘˛ass
 =

2289 
	`mxmlFödEÀmít
(
åì
,Åªe, "°ru˘", "«me", 
buf„r
,

2290 
MXML_DESCEND_FIRST
);

2293 
buÂå
 = 
buf„r
;

2295 
	`mxmlEÀmítSëAâr
(
fun˘i⁄
, "«me", 
buÂå
);

2297 i‡(
sc›e
)

2298 
	`mxmlEÀmítSëAâr
(
fun˘i⁄
, "sc›e", 
sc›e
);

2300 #ifde‡
DEBUG


2301 
	`Ârötf
(
°dîr
, "fun˘i⁄: %s\n", 
buf„r
);

2302 
	`Ârötf
(
°dîr
, " sc›ê%s\n", 
sc›e
 ? scope : "(null)");

2303 
	`Ârötf
(
°dîr
, " commíà%p\n", 
commít
);

2304 
	`Ârötf
(
°dîr
, " child = (%p) %s\n",

2305 
commít
->
chûd
,

2306 
commít
->
chûd
 ?

2307 
commít
->
chûd
->
vÆue
.
ãxt
.
°rög
 : "(null)");

2308 
	`Ârötf
(
°dîr
, "Üast_child = (%p) %s\n",

2309 
commít
->
œ°_chûd
,

2310 
commít
->
œ°_chûd
 ?

2311 
commít
->
œ°_chûd
->
vÆue
.
ãxt
.
°rög
 : "(null)");

2314 i‡(
ty≥
->
œ°_chûd
 &&

2315 
	`°rcmp
(
ty≥
->
œ°_chûd
->
vÆue
.
ãxt
.
°rög
, "void"))

2317 
ªtu∫vÆue
 = 
	`mxmlNewEÀmít
(
fun˘i⁄
, "returnvalue");

2319 
	`mxmlAdd
(
ªtu∫vÆue
, 
MXML_ADD_AFTER
, 
MXML_ADD_TO_PARENT
, 
ty≥
);

2321 
des¸ùti⁄
 = 
	`mxmlNewEÀmít
(
ªtu∫vÆue
, "description");

2322 #ifde‡
DEBUG


2323 
	`Ârötf
(
°dîr
, "ádding comment %p/%pÅoÑeturnvalue...\n",

2324 
commít
->
œ°_chûd
, commít->
chûd
);

2326 
	`upd©e_commít
(
ªtu∫vÆue
, 
commít
->
œ°_chûd
);

2327 
	`mxmlAdd
(
des¸ùti⁄
, 
MXML_ADD_AFTER
, 
MXML_ADD_TO_PARENT
,

2328 
commít
->
œ°_chûd
);

2331 
	`mxmlDñëe
(
ty≥
);

2333 
des¸ùti⁄
 = 
	`mxmlNewEÀmít
(
fun˘i⁄
, "description");

2334 #ifde‡
DEBUG


2335 
	`Ârötf
(
°dîr
, "ádding comment %p/%pÅo function...\n",

2336 
commít
->
œ°_chûd
, commít->
chûd
);

2338 
	`upd©e_commít
(
fun˘i⁄
, 
commít
->
œ°_chûd
);

2339 
	`mxmlAdd
(
des¸ùti⁄
, 
MXML_ADD_AFTER
, 
MXML_ADD_TO_PARENT
,

2340 
commít
->
œ°_chûd
);

2342 
ty≥
 = 
NULL
;

2344 i‡(
fun˘i⁄
 && ((
ch
 =')' && 
∑ªns
 == 1) || ch == ','))

2350 i‡(
	`°rcmp
(
buf„r
, "void"))

2352 
	`mxmlNewText
(
ty≥
,Åy≥->
chûd
 !
NULL
 &&

2353 
ty≥
->
œ°_chûd
->
vÆue
.
ãxt
.
°rög
[0] != '(' &&

2354 
ty≥
->
œ°_chûd
->
vÆue
.
ãxt
.
°rög
[0] != '*',

2355 
buf„r
);

2357 #ifde‡
DEBUG


2358 
	`Ârötf
(
°dîr
, "Argumít: <<<< %†>>>\n", 
buf„r
);

2361 
v¨übÀ
 = 
	`add_v¨übÀ
(
fun˘i⁄
, "¨gumít", 
ty≥
);

2364 
	`mxmlDñëe
(
ty≥
);

2366 
ty≥
 = 
NULL
;

2368 i‡(
ty≥
->
chûd
 && !
fun˘i⁄
 && (
ch
 == ';' || ch == ','))

2370 #ifde‡
DEBUG


2371 
	`Ârötf
(
°dîr
, " got semicolon,Åypedefnode=%p, structclass=%p\n",

2372 
ty≥de‚ode
, 
°ru˘˛ass
);

2375 i‡(
ty≥de‚ode
 || 
°ru˘˛ass
)

2377 #ifde‡
DEBUG


2378 
	`Ârötf
(
°dîr
, "Ty≥def/°ru˘/˛ass: <<<< %†>>>>\n", 
buf„r
);

2381 i‡(
ty≥de‚ode
)

2383 
	`mxmlEÀmítSëAâr
(
ty≥de‚ode
, "«me", 
buf„r
);

2385 
	`s‹t_node
(
åì
, 
ty≥de‚ode
);

2388 i‡(
°ru˘˛ass
 && !
	`mxmlEÀmítGëAâr
(structclass, "name"))

2390 #ifde‡
DEBUG


2391 
	`Ârötf
(
°dîr
, "setting struct/classÇameÅo %s!\n",

2392 
ty≥
->
œ°_chûd
->
vÆue
.
ãxt
.
°rög
);

2394 
	`mxmlEÀmítSëAâr
(
°ru˘˛ass
, "«me", 
buf„r
);

2396 
	`s‹t_node
(
åì
, 
°ru˘˛ass
);

2397 
°ru˘˛ass
 = 
NULL
;

2400 i‡(
ty≥de‚ode
)

2401 
	`mxmlAdd
(
ty≥de‚ode
, 
MXML_ADD_BEFORE
, 
MXML_ADD_TO_PARENT
,

2402 
ty≥
);

2404 
	`mxmlDñëe
(
ty≥
);

2406 
ty≥
 = 
NULL
;

2407 
ty≥de‚ode
 = 
NULL
;

2409 i‡(
ty≥
->
chûd
 &&

2410 !
	`°rcmp
(
ty≥
->
chûd
->
vÆue
.
ãxt
.
°rög
, "typedef"))

2416 #ifde‡
DEBUG


2417 
	`Ârötf
(
°dîr
, "Ty≥def: <<<< %†>>>\n", 
buf„r
);

2420 
ty≥de‚ode
 = 
	`mxmlNewEÀmít
(
MXML_NO_PARENT
, "typedef");

2421 
	`mxmlEÀmítSëAâr
(
ty≥de‚ode
, "«me", 
buf„r
);

2422 
	`mxmlDñëe
(
ty≥
->
chûd
);

2424 
	`s‹t_node
(
åì
, 
ty≥de‚ode
);

2426 i‡(
ty≥
->
chûd
)

2427 
ty≥
->
chûd
->
vÆue
.
ãxt
.
whôe•a˚
 = 0;

2429 
	`mxmlAdd
(
ty≥de‚ode
, 
MXML_ADD_AFTER
, 
MXML_ADD_TO_PARENT
, 
ty≥
);

2430 
ty≥
 = 
NULL
;

2432 i‡(!
∑ªns
)

2438 i‡(
ty≥
->
chûd
 &&

2439 !
	`°rcmp
(
ty≥
->
chûd
->
vÆue
.
ãxt
.
°rög
, "static") &&

2440 !
	`°rcmp
(
åì
->
vÆue
.
ñemít
.
«me
, "mxmldoc"))

2446 
	`mxmlDñëe
(
ty≥
);

2447 
ty≥
 = 
NULL
;

2451 
	`mxmlNewText
(
ty≥
,Åy≥->
chûd
 !
NULL
 &&

2452 
ty≥
->
œ°_chûd
->
vÆue
.
ãxt
.
°rög
[0] != '(' &&

2453 
ty≥
->
œ°_chûd
->
vÆue
.
ãxt
.
°rög
[0] != '*',

2454 
buf„r
);

2456 #ifde‡
DEBUG


2457 
	`Ârötf
(
°dîr
, "V¨übÀ: <<<< %†>>>>\n", 
buf„r
);

2458 
	`Ârötf
(
°dîr
, " sc›ê%s\n", 
sc›e
 ? scope : "(null)");

2461 
v¨übÀ
 = 
	`add_v¨übÀ
(
MXML_NO_PARENT
, "v¨übÀ", 
ty≥
);

2462 
ty≥
 = 
NULL
;

2464 
	`s‹t_node
(
åì
, 
v¨übÀ
);

2466 i‡(
sc›e
)

2467 
	`mxmlEÀmítSëAâr
(
v¨übÀ
, "sc›e", 
sc›e
);

2472 #ifde‡
DEBUG


2473 
	`Ârötf
(
°dîr
, "Idítifõr: <<<< %†>>>>\n", 
buf„r
);

2476 
	`mxmlNewText
(
ty≥
,Åy≥->
chûd
 !
NULL
 &&

2477 
ty≥
->
œ°_chûd
->
vÆue
.
ãxt
.
°rög
[0] != '(' &&

2478 
ty≥
->
œ°_chûd
->
vÆue
.
ãxt
.
°rög
[0] != '*',

2479 
buf„r
);

2482 i‡(
íumî©i⁄
 && !
	`isdigô
(
buf„r
[0] & 255))

2484 #ifde‡
DEBUG


2485 
	`Ârötf
(
°dîr
, "C⁄°™t: <<<< %†>>>\n", 
buf„r
);

2488 
c⁄°™t
 = 
	`mxmlNewEÀmít
(
MXML_NO_PARENT
, "constant");

2489 
	`mxmlEÀmítSëAâr
(
c⁄°™t
, "«me", 
buf„r
);

2490 
	`s‹t_node
(
íumî©i⁄
, 
c⁄°™t
);

2492 i‡(
ty≥
)

2494 
	`mxmlDñëe
(
ty≥
);

2495 
ty≥
 = 
NULL
;

2501 #i‡
DEBUG
 > 1

2502 i‡(
°©e
 !
ﬁd°©e
)

2504 
	`Ârötf
(
°dîr
, " changed states from %sÅo %s onÑeceipt of character '%c'...\n",

2505 
°©es
[
ﬁd°©e
], sèãs[
°©e
], 
ﬁdch
);

2506 
	`Ârötf
(
°dîr
, " v¨übÀ = %p\n", 
v¨übÀ
);

2507 i‡(
ty≥
)

2509 
	`Âuts
("Åy≥ =", 
°dîr
);

2510 
ãmp
 = 
ty≥
->
chûd
;Åemp;Åem∞ãmp->
√xt
)

2511 
	`Ârötf
(
°dîr
, " \"%s\"", 
ãmp
->
vÆue
.
ãxt
.
°rög
);

2512 
	`Âuts
("\n", 
°dîr
);

2518 
	`mxmlDñëe
(
commít
);

2525 
	}
}

2533 
	$s‹t_node
(
mxml_node_t
 *
åì
,

2534 
mxml_node_t
 *
node
)

2536 
mxml_node_t
 *
ãmp
;

2537 c⁄° *
ãm≤ame
,

2538 *
nodíame
,

2539 *
sc›e
;

2542 #i‡
DEBUG
 > 1

2543 
	`Ârötf
(
°dîr
, " s‹t_node—ªe=%p,Çode=%p)\n", 
åì
, 
node
);

2550 i‡(!
åì
 || !
node
 ||Çode->
∑ª¡
 ==Åree)

2557 i‡((
nodíame
 = 
	`mxmlEÀmítGëAâr
(
node
, "«me")Ë=
NULL
)

2560 i‡(
nodíame
[0] == '_')

2563 #i‡
DEBUG
 > 1

2564 
	`Ârötf
(
°dîr
, "Çodíame=%∞(\"%s\")\n", 
nodíame
,Çodename);

2571 i‡((
ãmp
 = 
	`mxmlFödEÀmít
(
åì
,Åªe, 
node
->
vÆue
.
ñemít
.
«me
,

2572 "«me", 
nodíame
, 
MXML_DESCEND_FIRST
)Ë!
NULL
)

2578 i‡((
sc›e
 = 
	`mxmlEÀmítGëAâr
(
ãmp
, "sc›e")Ë!
NULL
 &&

2579 
	`mxmlEÀmítGëAâr
(
node
, "sc›e"Ë=
NULL
)

2581 #ifde‡
DEBUG


2582 
	`Ârötf
(
°dîr
, " c›yög sc›ê%†f‹ %s\n", 
sc›e
, 
nodíame
);

2585 
	`mxmlEÀmítSëAâr
(
node
, "sc›e", 
sc›e
);

2588 
	`mxmlDñëe
(
ãmp
);

2595 
ãmp
 = 
åì
->
chûd
;Åemp;Åem∞ãmp->
√xt
)

2597 #i‡
DEBUG
 > 1

2598 
	`Ârötf
(
°dîr
, "Åemp=%p\n", 
ãmp
);

2601 i‡((
ãm≤ame
 = 
	`mxmlEÀmítGëAâr
(
ãmp
, "«me")Ë=
NULL
)

2604 #i‡
DEBUG
 > 1

2605 
	`Ârötf
(
°dîr
, "Åem≤ame=%∞(\"%s\")\n", 
ãm≤ame
,Åempname);

2608 i‡(
	`°rcmp
(
nodíame
, 
ãm≤ame
) < 0)

2612 i‡(
ãmp
)

2613 
	`mxmlAdd
(
åì
, 
MXML_ADD_BEFORE
, 
ãmp
, 
node
);

2615 
	`mxmlAdd
(
åì
, 
MXML_ADD_AFTER
, 
MXML_ADD_TO_PARENT
, 
node
);

2616 
	}
}

2624 
	$upd©e_commít
(
mxml_node_t
 *
∑ª¡
,

2625 
mxml_node_t
 *
commít
)

2627 *
±r
;

2630 #ifde‡
DEBUG


2631 
	`Ârötf
(
°dîr
, "update_comment(parent=%p, comment=%p)\n",

2632 
∑ª¡
, 
commít
);

2639 i‡(!
∑ª¡
 || !
commít
)

2646 
±r
 = 
	`°r°r
(
commít
->
vÆue
.
ãxt
.
°rög
, "\\/");

2647 
±r
;

2648 
±r
 = 
	`°r°r
(ptr, "\\/"))

2649 
	`ß„_°r˝y
(
±r
,Ötr + 1);

2655 
±r
 = 
commít
->
vÆue
.
ãxt
.
°rög
;

2657 i‡(*
±r
 == '\'')

2663 
±r
 ++; *ptr && *ptr != '\'';Ötr ++);

2665 i‡(*
±r
 == '\'')

2667 
±r
 ++;

2668 
	`is•a˚
(*
±r
 & 255))

2669 
±r
 ++;

2671 i‡(*
±r
 == '-')

2672 
±r
 ++;

2674 
	`is•a˚
(*
±r
 & 255))

2675 
±r
 ++;

2677 
	`ß„_°r˝y
(
commít
->
vÆue
.
ãxt
.
°rög
, 
±r
);

2680 i‡(!
	`°∫cmp
(
±r
, "I ", 2) || !strncmp(ptr, "O ", 2) ||

2681 !
	`°∫cmp
(
±r
, "IO ", 3))

2688 
±r
 = 
	`°rchr
(ptr, ' ');

2689 *
±r
++ = '\0';

2691 i‡(!
	`°rcmp
(
∑ª¡
->
vÆue
.
ñemít
.
«me
, "argument"))

2692 
	`mxmlEÀmítSëAâr
(
∑ª¡
, "dúe˘i⁄", 
commít
->
vÆue
.
ãxt
.
°rög
);

2694 
	`is•a˚
(*
±r
 & 255))

2695 
±r
 ++;

2697 i‡(*
±r
 == '-')

2698 
±r
 ++;

2700 
	`is•a˚
(*
±r
 & 255))

2701 
±r
 ++;

2703 
	`ß„_°r˝y
(
commít
->
vÆue
.
ãxt
.
°rög
, 
±r
);

2710 
±r
 = 
commít
->
vÆue
.
ãxt
.
°rög
; *ptr == '*';Ötr ++);

2711 ; 
	`is•a˚
(*
±r
 & 255);Ötr ++);

2712 i‡(
±r
 > 
commít
->
vÆue
.
ãxt
.
°rög
)

2713 
	`ß„_°r˝y
(
commít
->
vÆue
.
ãxt
.
°rög
, 
±r
);

2715 
±r
 = 
commít
->
vÆue
.
ãxt
.
°rög
 + 
	`°æí
(comment->value.text.string) - 1;

2716 
±r
 > 
commít
->
vÆue
.
ãxt
.
°rög
 && *ptr == '*';

2717 
±r
 --)

2718 *
±r
 = '\0';

2719 ; 
±r
 > 
commít
->
vÆue
.
ãxt
.
°rög
 && 
	`is•a˚
(*ptr & 255);Ötr --)

2720 *
±r
 = '\0';

2722 #ifde‡
DEBUG


2723 
	`Ârötf
(
°dîr
, " upd©ed commíà%s\n", 
commít
->
vÆue
.
ãxt
.
°rög
);

2725 
	}
}

2733 
	$ußge
(c⁄° *
›ti⁄
)

2735 i‡(
›ti⁄
)

2736 
	`¥ötf
("mxmldoc: Bad o±i⁄ \"%s\"!\n\n", 
›ti⁄
);

2738 
	`puts
("Usage: mxmldoc [options] [filename.xml] [source files] >filename.html");

2739 
	`puts
("Options:");

2740 
	`puts
(" --css filename.css Set CSS stylesheet file");

2741 
	`puts
(" --docset bundleid.docset Generate documentation set");

2742 
	`puts
(" --docversion version Set documentation version");

2743 
	`puts
(" --feednameÇame Set documentation set feedÇame");

2744 
	`puts
(" --feedurl url Set documentation set feed URL");

2745 
	`puts
(" --footer footerfile Set footer file");

2746 
	`puts
(" --framed basename Generate framed HTMLÅo basename*.html");

2747 
	`puts
(" --header headerfile Set header file");

2748 
	`puts
(" --intro introfile Set introduction file");

2749 
	`puts
(" --manÇame Generate manÖage");

2750 
	`puts
(" --no-output DoÇo generate documentation file");

2751 
	`puts
(" --section section Set sectionÇame");

2752 
	`puts
(" --titleÅitle Set documentationÅitle");

2753 
	`puts
(" --tokensÖath Generate Xcode docset Tokens.xml file");

2754 
	`puts
(" --version Show mxmldoc/Mini-XML version");

2756 
	`exô
(1);

2757 
	}
}

2765 
	$wrôe_des¸ùti⁄
(

2766 
FILE
 *
out
,

2767 
mxml_node_t
 *
des¸ùti⁄
,

2768 c⁄° *
ñemít
,

2769 
summ¨y
)

2771 
ãxt
[10240],

2772 *
°¨t
,

2773 *
±r
;

2774 
cﬁ
;

2777 i‡(!
des¸ùti⁄
)

2780 
	`gë_ãxt
(
des¸ùti⁄
, 
ãxt
, (text));

2782 
±r
 = 
	`°r°r
(
ãxt
, "\n\n");

2784 i‡(
summ¨y
)

2786 i‡(
±r
)

2787 *
±r
 = '\0';

2789 
±r
 = 
ãxt
;

2791 i‡(!
±r
 || !ptr[2])

2794 
±r
 += 2;

2796 i‡(
ñemít
 && *element)

2797 
	`Ârötf
(
out
, "<%†˛ass=\"%s\">", 
ñemít
,

2798 
summ¨y
 ? "description" : "discussion");

2799 i‡(!
summ¨y
)

2800 
	`Âuts
(".PP\n", 
out
);

2802 
cﬁ
 = 0; *
±r
;Ötr ++)

2804 i‡(*
±r
 == '@' &&

2805 (!
	`°∫cmp
(
±r
 + 1, "deprecated@", 11) ||

2806 !
	`°∫cmp
(
±r
 + 1, "since ", 6)))

2808 
±r
 ++;

2809 *
±r
 && *ptr != '@')

2810 
±r
 ++;

2812 i‡(!*
±r
)

2815 i‡(!
	`°∫cmp
(
±r
, "@code ", 6))

2817 
±r
 +6; 
	`is•a˚
(*ptr & 255);Ötr ++);

2819 
°¨t
 = 
±r
,Ötr ++; *ptr && *ptr != '@';Ötr ++);

2821 i‡(*
±r
)

2822 *
±r
 = '\0';

2824 
±r
 --;

2826 i‡(
ñemít
 && *element)

2827 
	`Ârötf
(
out
, "<code>%s</code>", 
°¨t
);

2828 i‡(
ñemít
)

2829 
	`Âuts
(
°¨t
, 
out
);

2831 
	`Ârötf
(
out
, "\\fB%s\\fR", 
°¨t
);

2833 i‡(!
	`°∫cmp
(
±r
, "@link ", 6))

2835 
±r
 +6; 
	`is•a˚
(*ptr & 255);Ötr ++);

2837 
°¨t
 = 
±r
,Ötr ++; *ptr && *ptr != '@';Ötr ++);

2839 i‡(*
±r
)

2840 *
±r
 = '\0';

2842 
±r
 --;

2844 i‡(
ñemít
 && *element)

2845 
	`Ârötf
(
out
, "<®hªf=\"#%s\"><code>%s</code></a>", 
°¨t
, start);

2846 i‡(
ñemít
)

2847 
	`Âuts
(
°¨t
, 
out
);

2849 
	`Ârötf
(
out
, "\\fI%s\\fR", 
°¨t
);

2851 i‡(
ñemít
)

2853 i‡(*
±r
 == '&')

2854 
	`Âuts
("&amp;", 
out
);

2855 i‡(*
±r
 == '<')

2856 
	`Âuts
("&…;", 
out
);

2857 i‡(*
±r
 == '>')

2858 
	`Âuts
("&gt;", 
out
);

2859 i‡(*
±r
 == '\"')

2860 
	`Âuts
("&quŸ;", 
out
);

2861 i‡(*
±r
 & 128)

2867 
ch
;

2870 
ch
 = *
±r
 & 255;

2872 i‡((
ch
 & 0xe0) == 0xc0)

2874 
ch
 = ((ch & 0x1fË<< 6Ë| (
±r
[1] & 0x3f);

2875 
±r
 ++;

2877 i‡((
ch
 & 0xf0) == 0xe0)

2879 
ch
 = ((((ch * 0x0fË<< 6Ë| (
±r
[1] & 0x3f)) << 6) | (ptr[2] & 0x3f);

2880 
±r
 += 2;

2883 i‡(
ch
 == 0xa0)

2889 
	`Âuts
("&nb•;", 
out
);

2892 
	`Ârötf
(
out
, "&#x%x;", 
ch
);

2894 i‡(*
±r
 == '\n' &&Ötr[1] == '\n' &&Ötr[2] &&Ötr[2] != '@')

2896 
	`Âuts
("<br>\n<br>\n", 
out
);

2897 
±r
 ++;

2900 
	`putc
(*
±r
, 
out
);

2902 i‡(*
±r
 == '\n' &&Ötr[1] == '\n' &&Ötr[2] &&Ötr[2] != '@')

2904 
	`Âuts
("\n.PP\n", 
out
);

2905 
±r
 ++;

2909 i‡(*
±r
 ='\\' || (*±∏='.' && 
cﬁ
 == 0))

2910 
	`putc
('\\', 
out
);

2912 
	`putc
(*
±r
, 
out
);

2914 i‡(*
±r
 == '\n')

2915 
cﬁ
 = 0;

2917 
cﬁ
 ++;

2921 i‡(
ñemít
 && *element)

2922 
	`Ârötf
(
out
, "</%s>\n", 
ñemít
);

2923 i‡(!
ñemít
)

2924 
	`putc
('\n', 
out
);

2925 
	}
}

2933 
	$wrôe_ñemít
(
FILE
 *
out
,

2934 
mxml_node_t
 *
doc
,

2935 
mxml_node_t
 *
ñemít
,

2936 
mode
)

2938 
mxml_node_t
 *
node
;

2941 i‡(!
ñemít
)

2944 
node
 = 
ñemít
->
chûd
;

2945 
node
;

2946 
node
 = 
	`mxmlWÆkNext
“ode, 
ñemít
, 
MXML_NO_DESCEND
))

2947 i‡(
node
->
ty≥
 =
MXML_TEXT
)

2949 i‡(
node
->
vÆue
.
ãxt
.
whôe•a˚
)

2950 
	`putc
(' ', 
out
);

2952 i‡(
mode
 =
OUTPUT_HTML
 &&

2953 (
	`mxmlFödEÀmít
(
doc
, doc, "˛ass", "«me", 
node
->
vÆue
.
ãxt
.
°rög
,

2954 
MXML_DESCEND
) ||

2955 
	`mxmlFödEÀmít
(
doc
, doc, "enumeration", "name",

2956 
node
->
vÆue
.
ãxt
.
°rög
, 
MXML_DESCEND
) ||

2957 
	`mxmlFödEÀmít
(
doc
, doc, "°ru˘", "«me", 
node
->
vÆue
.
ãxt
.
°rög
,

2958 
MXML_DESCEND
) ||

2959 
	`mxmlFödEÀmít
(
doc
, doc, "ty≥def", "«me", 
node
->
vÆue
.
ãxt
.
°rög
,

2960 
MXML_DESCEND
) ||

2961 
	`mxmlFödEÀmít
(
doc
, doc, "uni⁄", "«me", 
node
->
vÆue
.
ãxt
.
°rög
,

2962 
MXML_DESCEND
)))

2964 
	`Âuts
("<®hªf=\"#", 
out
);

2965 
	`wrôe_°rög
(
out
, 
node
->
vÆue
.
ãxt
.
°rög
, 
mode
);

2966 
	`Âuts
("\">", 
out
);

2967 
	`wrôe_°rög
(
out
, 
node
->
vÆue
.
ãxt
.
°rög
, 
mode
);

2968 
	`Âuts
("</a>", 
out
);

2971 
	`wrôe_°rög
(
out
, 
node
->
vÆue
.
ãxt
.
°rög
, 
mode
);

2974 i‡(!
	`°rcmp
(
ñemít
->
vÆue
.ñemít.
«me
, "type") &&

2975 
ñemít
->
œ°_chûd
->
vÆue
.
ãxt
.
°rög
[0] != '*')

2976 
	`putc
(' ', 
out
);

2977 
	}
}

2985 
	$wrôe_fûe
(
FILE
 *
out
,

2986 c⁄° *
fûe
)

2988 
FILE
 *
Â
;

2989 
löe
[8192];

2992 i‡((
Â
 = 
	`f›í
(
fûe
, "r")Ë=
NULL
)

2994 
	`Ârötf
(
°dîr
, "mxmldoc: U«bÀÅÿ›í \"%s\": %s\n", 
fûe
,

2995 
	`°ªº‹
(
î∫o
));

2999 
	`fgës
(
löe
, ÷öe), 
Â
))

3000 
	`Âuts
(
löe
, 
out
);

3002 
	`f˛o£
(
Â
);

3003 
	}
}

3011 
	$wrôe_fun˘i⁄
(
FILE
 *
out
,

3012 
mxml_node_t
 *
doc
,

3013 
mxml_node_t
 *
fun˘i⁄
,

3014 
Àvñ
)

3016 
mxml_node_t
 *
¨g
,

3017 *
adesc
,

3018 *
des¸ùti⁄
,

3019 *
ty≥
,

3020 *
node
;

3021 c⁄° *
«me
,

3022 *
defvÆ
;

3023 
¥efix
;

3024 *
£p
;

3027 
«me
 = 
	`mxmlEÀmítGëAâr
(
fun˘i⁄
, "name");

3028 
des¸ùti⁄
 = 
	`mxmlFödEÀmít
(
fun˘i⁄
, fun˘i⁄, "des¸ùti⁄", 
NULL
,

3029 
NULL
, 
MXML_DESCEND_FIRST
);

3031 
	`Ârötf
(
out
, "<h%d class=\"%s\">%s<aÇame=\"%s\">%s</a></h%d>\n",

3032 
Àvñ
,Üevel == 3 ? "function" : "method",

3033 
	`gë_commít_öfo
(
des¸ùti⁄
), 
«me
,Çame, 
Àvñ
);

3035 i‡(
des¸ùti⁄
)

3036 
	`wrôe_des¸ùti⁄
(
out
, 
des¸ùti⁄
, "p", 1);

3038 
	`Âuts
("<∞˛ass=\"code\">\n", 
out
);

3040 
¨g
 = 
	`mxmlFödEÀmít
(
fun˘i⁄
, fun˘i⁄, "ªtu∫vÆue", 
NULL
,

3041 
NULL
, 
MXML_DESCEND_FIRST
);

3043 i‡(
¨g
)

3044 
	`wrôe_ñemít
(
out
, 
doc
, 
	`mxmlFödEÀmít
(
¨g
,árg, "ty≥", 
NULL
,

3045 
NULL
, 
MXML_DESCEND_FIRST
),

3046 
OUTPUT_HTML
);

3048 
	`Âuts
("void ", 
out
);

3050 
	`Ârötf
(
out
, "%†", 
«me
);

3051 
¨g
 = 
	`mxmlFödEÀmít
(
fun˘i⁄
, fun˘i⁄, "¨gumít", 
NULL
, NULL,

3052 
MXML_DESCEND_FIRST
), 
¥efix
 = '(';

3053 
¨g
;

3054 
¨g
 = 
	`mxmlFödEÀmít
◊rg, 
fun˘i⁄
, "¨gumít", 
NULL
, NULL,

3055 
MXML_NO_DESCEND
), 
¥efix
 = ',')

3057 
ty≥
 = 
	`mxmlFödEÀmít
(
¨g
,árg, "ty≥", 
NULL
, NULL,

3058 
MXML_DESCEND_FIRST
);

3060 
	`Ârötf
(
out
, "%c<br>\n&nb•;&nb•;&nb•;&nb•;", 
¥efix
);

3061 i‡(
ty≥
->
chûd
)

3062 
	`wrôe_ñemít
(
out
, 
doc
, 
ty≥
, 
OUTPUT_HTML
);

3064 
	`Âuts
(
	`mxmlEÀmítGëAâr
(
¨g
, "«me"), 
out
);

3065 i‡((
defvÆ
 = 
	`mxmlEÀmítGëAâr
(
¨g
, "deÁu…")Ë!
NULL
)

3066 
	`Ârötf
(
out
, " %s", 
defvÆ
);

3069 i‡(
¥efix
 == '(')

3070 
	`Âuts
("(void);</p>\n", 
out
);

3073 
	`Ârötf
(
out
,

3076 "<dl>\n", 
Àvñ
 + 1,Üevel + 1);

3078 
¨g
 = 
	`mxmlFödEÀmít
(
fun˘i⁄
, fun˘i⁄, "¨gumít", 
NULL
, NULL,

3079 
MXML_DESCEND_FIRST
);

3080 
¨g
;

3081 
¨g
 = 
	`mxmlFödEÀmít
◊rg, 
fun˘i⁄
, "¨gumít", 
NULL
, NULL,

3082 
MXML_NO_DESCEND
))

3084 
	`Ârötf
(
out
, "<dt>%s</dt>\n", 
	`mxmlEÀmítGëAâr
(
¨g
, "name"));

3086 
adesc
 = 
	`mxmlFödEÀmít
(
¨g
,árg, "des¸ùti⁄", 
NULL
, NULL,

3087 
MXML_DESCEND_FIRST
);

3089 
	`wrôe_des¸ùti⁄
(
out
, 
adesc
, "dd", 1);

3090 
	`wrôe_des¸ùti⁄
(
out
, 
adesc
, "dd", 0);

3093 
	`Âuts
("</dl>\n", 
out
);

3096 
¨g
 = 
	`mxmlFödEÀmít
(
fun˘i⁄
, fun˘i⁄, "ªtu∫vÆue", 
NULL
,

3097 
NULL
, 
MXML_DESCEND_FIRST
);

3099 i‡(
¨g
)

3101 
	`Ârötf
(
out
, "<h%d cœss=\"ªtu∫vÆue\">Rëu∫ VÆue</h%d>\n", 
Àvñ
 + 1,

3102 
Àvñ
 + 1);

3104 
adesc
 = 
	`mxmlFödEÀmít
(
¨g
,árg, "des¸ùti⁄", 
NULL
, NULL,

3105 
MXML_DESCEND_FIRST
);

3107 
	`wrôe_des¸ùti⁄
(
out
, 
adesc
, "p", 1);

3108 
	`wrôe_des¸ùti⁄
(
out
, 
adesc
, "p", 0);

3111 i‡(
des¸ùti⁄
)

3113 
node
 = 
des¸ùti⁄
->
chûd
;Çode;Çodênode->
√xt
)

3114 i‡(
node
->
vÆue
.
ãxt
.
°rög
 &&

3115 (
£p
 = 
	`°r°r
(
node
->
vÆue
.
ãxt
.
°rög
, "\n\n")Ë!
NULL
)

3117 
£p
 += 2;

3118 i‡(*
£p
 && 
	`°∫cmp
(sep, "@since ", 7) &&

3119 
	`°∫cmp
(
£p
, "@deprecated@", 12))

3123 i‡(
node
)

3125 
	`Ârötf
(
out
, "<h%d cœss=\"discussi⁄\">Discussi⁄</h%d>\n", 
Àvñ
 + 1,

3126 
Àvñ
 + 1);

3127 
	`wrôe_des¸ùti⁄
(
out
, 
des¸ùti⁄
, "p", 0);

3130 
	}
}

3138 
	$wrôe_html
(c⁄° *
£˘i⁄
,

3139 c⁄° *
tôÀ
,

3140 c⁄° *
foŸîfûe
,

3141 c⁄° *
hódîfûe
,

3142 c⁄° *
öåofûe
,

3143 c⁄° *
cssfûe
,

3144 c⁄° *
‰amefûe
,

3145 c⁄° *
doc£t
,

3146 c⁄° *
docvîsi⁄
,

3147 c⁄° *
„ed«me
,

3148 c⁄° *
„eduæ
,

3149 
mxml_node_t
 *
doc
)

3151 
FILE
 *
out
;

3152 
mxml_node_t
 *
fun˘i⁄
,

3153 *
scut
,

3154 *
¨g
,

3155 *
des¸ùti⁄
,

3156 *
ty≥
;

3157 c⁄° *
«me
,

3158 *
defvÆ
,

3159 *
ba£«me
;

3160 
fûíame
[1024];

3163 i‡(
‰amefûe
)

3169 i‡((
ba£«me
 = 
	`°ºchr
(
‰amefûe
, '/')Ë!
NULL
)

3170 
ba£«me
 ++;

3172 
ba£«me
 = 
‰amefûe
;

3174 i‡(
	`°r°r
(
ba£«me
, ".html"))

3175 
	`Âuts
("mxmldoc: Frame baseÇame shouldÇot contain .htmlÉxtension!\n",

3176 
°dîr
);

3182 
	`¢¥ötf
(
fûíame
, (fûíame), "%s.html", 
‰amefûe
);

3184 i‡((
out
 = 
	`f›í
(
fûíame
, "w")Ë=
NULL
)

3186 
	`Ârötf
(
°dîr
, "mxmldoc: U«bÀÅÿ¸óã \"%s\": %s\n", 
fûíame
,

3187 
	`°ªº‹
(
î∫o
));

3191 
	`Âuts
("<!DOCTYPE html PUBLIC \"-//W3C//DTD HTML 4.01 Frameset//EN\" "

3195 "\t<tôÀ>", 
out
);

3196 
	`wrôe_°rög
(
out
, 
tôÀ
, 
OUTPUT_HTML
);

3197 
	`Âuts
("</tôÀ>\n", 
out
);

3199 i‡(
£˘i⁄
)

3200 
	`Ârötf
(
out
, "\t<më®«me=\"keyw‹ds\" c⁄ã¡=\"%s\">\n", 
£˘i⁄
);

3202 
	`Âuts
("\t<meta http-equiv=\"Content-Type\" "

3204 "\t<më®«me=\"¸ót‹\" c⁄ã¡=\"" 
MXML_VERSION
 "\">\n"

3205 "</hód>\n", 
out
);

3207 
	`Âuts
("<‰ame£àcﬁs=\"250,*\">\n", 
out
);

3208 
	`Ârötf
(
out
, "<‰amê§c=\"%s-toc.html\">\n", 
ba£«me
);

3209 
	`Ârötf
(
out
, "<‰amê«me=\"body\" src=\"%s-body.html\">\n", 
ba£«me
);

3210 
	`Âuts
("</frameset>\n"

3212 "<h1>", 
out
);

3213 
	`wrôe_°rög
(
out
, 
tôÀ
, 
OUTPUT_HTML
);

3214 
	`Ârötf
(
out
,

3219 "</ul>\n", 
ba£«me
, basename);

3220 
	`Âuts
("</noframes>\n"

3221 "</html>\n", 
out
);

3222 
	`f˛o£
(
out
);

3228 
	`¢¥ötf
(
fûíame
, (fûíame), "%s-toc.html", 
‰amefûe
);

3230 i‡((
out
 = 
	`f›í
(
fûíame
, "w")Ë=
NULL
)

3232 
	`Ârötf
(
°dîr
, "mxmldoc: U«bÀÅÿ¸óã \"%s\": %s\n", 
fûíame
,

3233 
	`°ªº‹
(
î∫o
));

3237 
	`wrôe_html_hód
(
out
, 
£˘i⁄
, 
tôÀ
, 
cssfûe
);

3239 
	`¢¥ötf
(
fûíame
, (fûíame), "%s-body.html", 
ba£«me
);

3241 
	`Âuts
("<div cœss=\"c⁄ã¡s\">\n", 
out
);

3242 
	`Ârötf
(
out
, "<h1 class=\"title\"><a href=\"%s\"Åarget=\"body\">",

3243 
fûíame
);

3244 
	`wrôe_°rög
(
out
, 
tôÀ
, 
OUTPUT_HTML
);

3245 
	`Âuts
("</a></h1>\n", 
out
);

3247 
	`wrôe_toc
(
out
, 
doc
, 
öåofûe
, 
fûíame
, 0);

3249 
	`Âuts
("</div>\n"

3251 "</html>\n", 
out
);

3252 
	`f˛o£
(
out
);

3258 
	`¢¥ötf
(
fûíame
, (fûíame), "%s-body.html", 
‰amefûe
);

3260 i‡((
out
 = 
	`f›í
(
fûíame
, "w")Ë=
NULL
)

3262 
	`Ârötf
(
°dîr
, "mxmldoc: U«bÀÅÿ¸óã \"%s\": %s\n", 
fûíame
,

3263 
	`°ªº‹
(
î∫o
));

3267 i‡(
doc£t
)

3274 #ifde‡
__APPLE__


3275 c⁄° *
id
;

3278 i‡(!
	`ac˚ss
(
doc£t
, 0Ë&& !
	`ªmove_dúe˘‹y
(docset))

3285 i‡(
	`mkdú
(
doc£t
, 0755))

3287 
	`Ârötf
(
°dîr
, "mxmldoc: U«bÀÅÿ¸óã \"%s\": %s\n", 
doc£t
,

3288 
	`°ªº‹
(
î∫o
));

3292 
	`¢¥ötf
(
fûíame
, (fûíame), "%s/C⁄ã¡s", 
doc£t
);

3293 i‡(
	`mkdú
(
fûíame
, 0755))

3295 
	`Ârötf
(
°dîr
, "mxmldoc: U«bÀÅÿ¸óã \"%s\": %s\n", 
fûíame
,

3296 
	`°ªº‹
(
î∫o
));

3300 
	`¢¥ötf
(
fûíame
, (fûíame), "%s/C⁄ã¡s/Resour˚s", 
doc£t
);

3301 i‡(
	`mkdú
(
fûíame
, 0755))

3303 
	`Ârötf
(
°dîr
, "mxmldoc: U«bÀÅÿ¸óã \"%s\": %s\n", 
fûíame
,

3304 
	`°ªº‹
(
î∫o
));

3308 
	`¢¥ötf
(
fûíame
, (filename), "%s/Contents/Resources/Documentation",

3309 
doc£t
);

3310 i‡(
	`mkdú
(
fûíame
, 0755))

3312 
	`Ârötf
(
°dîr
, "mxmldoc: U«bÀÅÿ¸óã \"%s\": %s\n", 
fûíame
,

3313 
	`°ªº‹
(
î∫o
));

3321 i‡((
id
 = 
	`°ºchr
(
doc£t
, '/')Ë!
NULL
)

3322 
id
 ++;

3324 
id
 = 
doc£t
;

3326 
	`¢¥ötf
(
fûíame
, (fûíame), "%s/C⁄ã¡s/Info.∂i°", 
doc£t
);

3327 i‡((
out
 = 
	`f›í
(
fûíame
, "w")Ë=
NULL
)

3329 
	`Ârötf
(
°dîr
, "mxmldoc: U«bÀÅÿ¸óã \"%s\": %s\n", 
fûíame
,

3330 
	`°ªº‹
(
î∫o
));

3334 
	`Âuts
("<?xml version=\"1.0\"Éncoding=\"UTF-8\"?>\n"

3339 "\t<°rög>", 
out
);

3340 
	`wrôe_°rög
(
out
, 
id
, 
OUTPUT_HTML
);

3341 
	`Âuts
("</string>\n"

3343 "\t<°rög>", 
out
);

3344 
	`wrôe_°rög
(
out
, 
tôÀ
, 
OUTPUT_HTML
);

3345 
	`Âuts
("</string>\n"

3347 "\t<°rög>", 
out
);

3348 
	`wrôe_°rög
(
out
, 
docvîsi⁄
 ? docvîsi⁄ : "0.0", 
OUTPUT_HTML
);

3349 
	`Âuts
("</string>\n"

3351 "\t<°rög>", 
out
);

3352 
	`wrôe_°rög
(
out
, 
docvîsi⁄
 ? docvîsi⁄ : "0.0", 
OUTPUT_HTML
);

3353 
	`Âuts
("</°rög>\n", 
out
);

3355 i‡(
„ed«me
)

3357 
	`Âuts
("\t<key>DocSetFeedName</key>\n"

3358 "\t<°rög>", 
out
);

3359 
	`wrôe_°rög
(
out
, 
„ed«me
 ? fìd«mê: 
tôÀ
, 
OUTPUT_HTML
);

3360 
	`Âuts
("</°rög>\n", 
out
);

3363 i‡(
„eduæ
)

3365 
	`Âuts
("\t<key>DocSetFeedURL</key>\n"

3366 "\t<°rög>", 
out
);

3367 
	`wrôe_°rög
(
out
, 
„eduæ
, 
OUTPUT_HTML
);

3368 
	`Âuts
("</°rög>\n", 
out
);

3371 
	`Âuts
("</dict>\n"

3372 "</∂i°>\n", 
out
);

3374 
	`f˛o£
(
out
);

3380 
	`¢¥ötf
(
fûíame
, (filename), "%s/Contents/Resources/Nodes.xml",

3381 
doc£t
);

3382 i‡((
out
 = 
	`f›í
(
fûíame
, "w")Ë=
NULL
)

3384 
	`Ârötf
(
°dîr
, "mxmldoc: U«bÀÅÿ¸óã \"%s\": %s\n", 
fûíame
,

3385 
	`°ªº‹
(
î∫o
));

3389 
	`Âuts
("<?xml version=\"1.0\"Éncoding=\"UTF-8\"?>\n"

3393 "<Name>", 
out
);

3394 
	`wrôe_°rög
(
out
, 
tôÀ
, 
OUTPUT_HTML
);

3395 
	`Âuts
("</Name>\n"

3397 "<Subnodes>\n", 
out
);

3399 
	`wrôe_toc
(
out
, 
doc
, 
öåofûe
, 
NULL
, 1);

3401 
	`Âuts
("</Subnodes>\n"

3404 "</DocSëNodes>\n", 
out
);

3406 
	`f˛o£
(
out
);

3412 
	`¢¥ötf
(
fûíame
, (filename), "%s/Contents/Resources/Tokens.xml",

3413 
doc£t
);

3414 i‡((
out
 = 
	`f›í
(
fûíame
, "w")Ë=
NULL
)

3416 
	`Ârötf
(
°dîr
, "mxmldoc: U«bÀÅÿ¸óã \"%s\": %s\n", 
fûíame
,

3417 
	`°ªº‹
(
î∫o
));

3421 
	`Âuts
("<?xml version=\"1.0\"Éncoding=\"UTF-8\"?>\n"

3422 "<Tokí†vîsi⁄=\"1.0\">\n", 
out
);

3424 
	`wrôe_tokís
(
out
, 
doc
, "index.html");

3426 
	`Âuts
("</Tokís>\n", 
out
);

3428 
	`f˛o£
(
out
);

3434 
	`¢¥ötf
(
fûíame
, (filename),

3436 
doc£t
);

3437 i‡((
out
 = 
	`f›í
(
fûíame
, "w")Ë=
NULL
)

3439 
	`Ârötf
(
°dîr
, "mxmldoc: U«bÀÅÿ¸óã \"%s\": %s\n", 
fûíame
,

3440 
	`°ªº‹
(
î∫o
));

3445 
	`Âuts
("mxmldoc: Xcode documentation sets can only be created on "

3446 "Ma¯OS X.\n", 
°dîr
);

3451 
out
 = 
°dout
;

3457 
	`wrôe_html_hód
(
out
, 
£˘i⁄
, 
tôÀ
, 
cssfûe
);

3459 
	`Âuts
("<div cœss='body'>\n", 
out
);

3465 i‡(
hódîfûe
)

3471 
	`wrôe_fûe
(
out
, 
hódîfûe
);

3479 
	`Âuts
("<h1 cœss=\"tôÀ\">", 
out
);

3480 
	`wrôe_°rög
(
out
, 
tôÀ
, 
OUTPUT_HTML
);

3481 
	`Âuts
("</h1>\n", 
out
);

3488 i‡(!
‰amefûe
)

3489 
	`wrôe_toc
(
out
, 
doc
, 
öåofûe
, 
NULL
, 0);

3495 i‡(
öåofûe
)

3496 
	`wrôe_fûe
(
out
, 
öåofûe
);

3502 i‡((
scut
 = 
	`föd_public
(
doc
, doc, "˛ass")Ë!
NULL
)

3504 
	`Âuts
("<h2 cœss=\"tôÀ\"><®«me=\"CLASSES\">Cœs£s</a></h2>\n", 
out
);

3506 
scut
)

3508 
	`wrôe_scu
(
out
, 
doc
, 
scut
);

3510 
scut
 = 
	`föd_public
(scut, 
doc
, "class");

3518 i‡((
fun˘i⁄
 = 
	`föd_public
(
doc
, doc, "fun˘i⁄")Ë!
NULL
)

3520 
	`Âuts
("<h2 cœss=\"tôÀ\"><®«me=\"FUNCTIONS\">Fun˘i⁄s</a></h2>\n", 
out
);

3522 
fun˘i⁄
)

3524 
	`wrôe_fun˘i⁄
(
out
, 
doc
, 
fun˘i⁄
, 3);

3526 
fun˘i⁄
 = 
	`föd_public
(fun˘i⁄, 
doc
, "function");

3534 i‡((
scut
 = 
	`föd_public
(
doc
, doc, "ty≥def")Ë!
NULL
)

3536 
	`Âuts
("<h2 cœss=\"tôÀ\"><®«me=\"TYPES\">D©®Ty≥s</a></h2>\n", 
out
);

3538 
scut
)

3540 
«me
 = 
	`mxmlEÀmítGëAâr
(
scut
, "name");

3541 
des¸ùti⁄
 = 
	`mxmlFödEÀmít
(
scut
, scut, "des¸ùti⁄", 
NULL
,

3542 
NULL
, 
MXML_DESCEND_FIRST
);

3543 
	`Ârötf
(
out
, "<h3 class=\"typedef\">%s<aÇame=\"%s\">%s</a></h3>\n",

3544 
	`gë_commít_öfo
(
des¸ùti⁄
), 
«me
,Çame);

3546 i‡(
des¸ùti⁄
)

3547 
	`wrôe_des¸ùti⁄
(
out
, 
des¸ùti⁄
, "p", 1);

3549 
	`Âuts
("<p class=\"code\">\n"

3550 "ty≥de‡", 
out
);

3552 
ty≥
 = 
	`mxmlFödEÀmít
(
scut
, scut, "ty≥", 
NULL
, NULL,

3553 
MXML_DESCEND_FIRST
);

3555 
ty≥
 =Åy≥->
chûd
;Åy≥;Åy≥ =Åy≥->
√xt
)

3556 i‡(!
	`°rcmp
(
ty≥
->
vÆue
.
ãxt
.
°rög
, "("))

3560 i‡(
ty≥
->
vÆue
.
ãxt
.
whôe•a˚
)

3561 
	`putc
(' ', 
out
);

3563 i‡(
	`mxmlFödEÀmít
(
doc
, doc, "class", "name",

3564 
ty≥
->
vÆue
.
ãxt
.
°rög
, 
MXML_DESCEND
) ||

3565 
	`mxmlFödEÀmít
(
doc
, doc, "enumeration", "name",

3566 
ty≥
->
vÆue
.
ãxt
.
°rög
, 
MXML_DESCEND
) ||

3567 
	`mxmlFödEÀmít
(
doc
, doc, "struct", "name",

3568 
ty≥
->
vÆue
.
ãxt
.
°rög
, 
MXML_DESCEND
) ||

3569 
	`mxmlFödEÀmít
(
doc
, doc, "typedef", "name",

3570 
ty≥
->
vÆue
.
ãxt
.
°rög
, 
MXML_DESCEND
) ||

3571 
	`mxmlFödEÀmít
(
doc
, doc, "union", "name",

3572 
ty≥
->
vÆue
.
ãxt
.
°rög
, 
MXML_DESCEND
))

3574 
	`Âuts
("<®hªf=\"#", 
out
);

3575 
	`wrôe_°rög
(
out
, 
ty≥
->
vÆue
.
ãxt
.
°rög
, 
OUTPUT_HTML
);

3576 
	`Âuts
("\">", 
out
);

3577 
	`wrôe_°rög
(
out
, 
ty≥
->
vÆue
.
ãxt
.
°rög
, 
OUTPUT_HTML
);

3578 
	`Âuts
("</a>", 
out
);

3581 
	`wrôe_°rög
(
out
, 
ty≥
->
vÆue
.
ãxt
.
°rög
, 
OUTPUT_HTML
);

3584 i‡(
ty≥
)

3590 i‡(
ty≥
->
¥ev
 &&Åy≥->¥ev->
vÆue
.
ãxt
.
°rög
[0] != '*')

3591 
	`putc
(' ', 
out
);

3593 
	`Ârötf
(
out
, "(*%s", 
«me
);

3595 
ty≥
 =Åy≥->
√xt
->next;Åype;Åype =Åype->next)

3597 i‡(
ty≥
->
vÆue
.
ãxt
.
whôe•a˚
)

3598 
	`putc
(' ', 
out
);

3600 i‡(
	`mxmlFödEÀmít
(
doc
, doc, "class", "name",

3601 
ty≥
->
vÆue
.
ãxt
.
°rög
, 
MXML_DESCEND
) ||

3602 
	`mxmlFödEÀmít
(
doc
, doc, "enumeration", "name",

3603 
ty≥
->
vÆue
.
ãxt
.
°rög
, 
MXML_DESCEND
) ||

3604 
	`mxmlFödEÀmít
(
doc
, doc, "struct", "name",

3605 
ty≥
->
vÆue
.
ãxt
.
°rög
, 
MXML_DESCEND
) ||

3606 
	`mxmlFödEÀmít
(
doc
, doc, "typedef", "name",

3607 
ty≥
->
vÆue
.
ãxt
.
°rög
, 
MXML_DESCEND
) ||

3608 
	`mxmlFödEÀmít
(
doc
, doc, "union", "name",

3609 
ty≥
->
vÆue
.
ãxt
.
°rög
, 
MXML_DESCEND
))

3611 
	`Âuts
("<®hªf=\"#", 
out
);

3612 
	`wrôe_°rög
(
out
, 
ty≥
->
vÆue
.
ãxt
.
°rög
, 
OUTPUT_HTML
);

3613 
	`Âuts
("\">", 
out
);

3614 
	`wrôe_°rög
(
out
, 
ty≥
->
vÆue
.
ãxt
.
°rög
, 
OUTPUT_HTML
);

3615 
	`Âuts
("</a>", 
out
);

3618 
	`wrôe_°rög
(
out
, 
ty≥
->
vÆue
.
ãxt
.
°rög
, 
OUTPUT_HTML
);

3621 
	`Âuts
(";\n", 
out
);

3625 
ty≥
 = 
	`mxmlFödEÀmít
(
scut
, scut, "ty≥", 
NULL
, NULL,

3626 
MXML_DESCEND_FIRST
);

3627 i‡(
ty≥
->
œ°_chûd
->
vÆue
.
ãxt
.
°rög
[0] != '*')

3628 
	`putc
(' ', 
out
);

3630 
	`Ârötf
(
out
, "%s;\n", 
«me
);

3633 
	`Âuts
("</p>\n", 
out
);

3635 
scut
 = 
	`föd_public
(scut, 
doc
, "typedef");

3643 i‡((
scut
 = 
	`föd_public
(
doc
, doc, "°ru˘")Ë!
NULL
)

3645 
	`Âuts
("<h2 class=\"title\"><aÇame=\"STRUCTURES\">Structures</a></h2>\n",

3646 
out
);

3648 
scut
)

3650 
	`wrôe_scu
(
out
, 
doc
, 
scut
);

3652 
scut
 = 
	`föd_public
(scut, 
doc
, "struct");

3660 i‡((
scut
 = 
	`föd_public
(
doc
, doc, "uni⁄")Ë!
NULL
)

3662 
	`Âuts
("<h2 cœss=\"tôÀ\"><®«me=\"UNIONS\">Uni⁄s</a></h2>\n", 
out
);

3664 
scut
)

3666 
	`wrôe_scu
(
out
, 
doc
, 
scut
);

3668 
scut
 = 
	`föd_public
(scut, 
doc
, "union");

3676 i‡((
¨g
 = 
	`föd_public
(
doc
, doc, "v¨übÀ")Ë!
NULL
)

3678 
	`Âuts
("<h2 class=\"title\"><aÇame=\"VARIABLES\">Variables</a></h2>\n",

3679 
out
);

3681 
¨g
)

3683 
«me
 = 
	`mxmlEÀmítGëAâr
(
¨g
, "name");

3684 
des¸ùti⁄
 = 
	`mxmlFödEÀmít
(
¨g
,árg, "des¸ùti⁄", 
NULL
,

3685 
NULL
, 
MXML_DESCEND_FIRST
);

3686 
	`Ârötf
(
out
, "<h3 class=\"variable\">%s<aÇame=\"%s\">%s</a></h3>\n",

3687 
	`gë_commít_öfo
(
des¸ùti⁄
), 
«me
,Çame);

3689 i‡(
des¸ùti⁄
)

3690 
	`wrôe_des¸ùti⁄
(
out
, 
des¸ùti⁄
, "p", 1);

3692 
	`Âuts
("<∞˛ass=\"code\">", 
out
);

3694 
	`wrôe_ñemít
(
out
, 
doc
, 
	`mxmlFödEÀmít
(
¨g
,árg, "ty≥", 
NULL
,

3695 
NULL
, 
MXML_DESCEND_FIRST
),

3696 
OUTPUT_HTML
);

3697 
	`Âuts
(
	`mxmlEÀmítGëAâr
(
¨g
, "«me"), 
out
);

3698 i‡((
defvÆ
 = 
	`mxmlEÀmítGëAâr
(
¨g
, "deÁu…")Ë!
NULL
)

3699 
	`Ârötf
(
out
, " %s", 
defvÆ
);

3700 
	`Âuts
(";</p>\n", 
out
);

3702 
¨g
 = 
	`föd_public
◊rg, 
doc
, "variable");

3710 i‡((
scut
 = 
	`föd_public
(
doc
, doc, "íumî©i⁄")Ë!
NULL
)

3712 
	`Âuts
("<h2 class=\"title\"><aÇame=\"ENUMERATIONS\">Constants</a></h2>\n",

3713 
out
);

3715 
scut
)

3717 
«me
 = 
	`mxmlEÀmítGëAâr
(
scut
, "name");

3718 
des¸ùti⁄
 = 
	`mxmlFödEÀmít
(
scut
, scut, "des¸ùti⁄", 
NULL
,

3719 
NULL
, 
MXML_DESCEND_FIRST
);

3720 
	`Ârötf
(
out
, "<h3 class=\"enumeration\">%s<aÇame=\"%s\">%s</a></h3>\n",

3721 
	`gë_commít_öfo
(
des¸ùti⁄
), 
«me
,Çame);

3723 i‡(
des¸ùti⁄
)

3724 
	`wrôe_des¸ùti⁄
(
out
, 
des¸ùti⁄
, "p", 1);

3726 
	`Âuts
("<h4 class=\"constants\">Constants</h4>\n"

3727 "<dl>\n", 
out
);

3729 
¨g
 = 
	`mxmlFödEÀmít
(
scut
, scut, "c⁄°™t", 
NULL
, NULL,

3730 
MXML_DESCEND_FIRST
);

3731 
¨g
;

3732 
¨g
 = 
	`mxmlFödEÀmít
◊rg, 
scut
, "c⁄°™t", 
NULL
, NULL,

3733 
MXML_NO_DESCEND
))

3735 
des¸ùti⁄
 = 
	`mxmlFödEÀmít
(
¨g
,árg, "des¸ùti⁄", 
NULL
,

3736 
NULL
, 
MXML_DESCEND_FIRST
);

3737 
	`Ârötf
(
out
, "<dt>%s %s</dt>\n",

3738 
	`mxmlEÀmítGëAâr
(
¨g
, "«me"), 
	`gë_commít_öfo
(
des¸ùti⁄
));

3740 
	`wrôe_des¸ùti⁄
(
out
, 
des¸ùti⁄
, "dd", 1);

3741 
	`wrôe_des¸ùti⁄
(
out
, 
des¸ùti⁄
, "dd", 0);

3744 
	`Âuts
("</dl>\n", 
out
);

3746 
scut
 = 
	`föd_public
(scut, 
doc
, "enumeration");

3754 i‡(
foŸîfûe
)

3760 
	`wrôe_fûe
(
out
, 
foŸîfûe
);

3763 
	`Âuts
("</div>\n"

3765 "</html>\n", 
out
);

3771 i‡(
out
 !
°dout
)

3772 
	`f˛o£
(
out
);

3774 #ifde‡
__APPLE__


3779 i‡(
doc£t
)

3781 c⁄° *
¨gs
[4];

3782 
pid_t
 
pid
;

3783 
°©us
;

3786 
¨gs
[0] = "/Developer/usr/bin/docsetutil";

3787 
¨gs
[1] = "index";

3788 
¨gs
[2] = 
doc£t
;

3789 
¨gs
[3] = 
NULL
;

3791 i‡(
	`posix_•awn
(&
pid
, 
¨gs
[0], 
NULL
, NULL, (**Ôrgs, 
ívú⁄
))

3793 
	`Ârötf
(
°dîr
, "mxmldoc: UnableÅo index documentation set \"%s\": %s\n",

3794 
doc£t
, 
	`°ªº‹
(
î∫o
));

3798 
	`waô
(&
°©us
Ë!
pid
);

3800 i‡(
°©us
)

3802 i‡(
	`WIFEXITED
(
°©us
))

3803 
	`Ârötf
(
°dîr
, "mxmldoc: docsetutilÉxited with status %d\n",

3804 
	`WEXITSTATUS
(
°©us
));

3806 
	`Ârötf
(
°dîr
, "mxmldoc: docsetutil crashed with signal %d\n",

3807 
	`WTERMSIG
(
°©us
));

3815 
	`¢¥ötf
(
fûíame
, (filename), "%s/Contents/Resources/Nodes.xml",

3816 
doc£t
);

3817 
	`u∆ök
(
fûíame
);

3819 
	`¢¥ötf
(
fûíame
, (filename), "%s/Contents/Resources/Tokens.xml",

3820 
doc£t
);

3821 
	`u∆ök
(
fûíame
);

3826 
	}
}

3834 
	$wrôe_html_hód
(
FILE
 *
out
,

3835 c⁄° *
£˘i⁄
,

3836 c⁄° *
tôÀ
,

3837 c⁄° *
cssfûe
)

3839 
	`Âuts
("<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01 Transitional//EN\" "

3841 "<html>\n", 
out
);

3843 i‡(
£˘i⁄
)

3844 
	`Ârötf
(
out
, "<!-- SECTION: %†-->\n", 
£˘i⁄
);

3846 
	`Âuts
("<head>\n"

3847 "\t<tôÀ>", 
out
);

3848 
	`wrôe_°rög
(
out
, 
tôÀ
, 
OUTPUT_HTML
);

3849 
	`Âuts
("\t</tôÀ>\n", 
out
);

3851 i‡(
£˘i⁄
)

3852 
	`Ârötf
(
out
, "\t<më®«me=\"keyw‹ds\" c⁄ã¡=\"%s\">\n", 
£˘i⁄
);

3854 
	`Âuts
("\t<meta http-equiv=\"Content-Type\" "

3856 "\t<më®«me=\"¸ót‹\" c⁄ã¡=\"" 
MXML_VERSION
 "\">\n"

3857 "<°yÀÅy≥=\"ãxt/css\"><!--\n", 
out
);

3859 i‡(
cssfûe
)

3865 
	`wrôe_fûe
(
out
, 
cssfûe
);

3873 
	`Âuts
("body,Ö, h1, h2, h3, h4 {\n"

4002 "}\n", 
out
);

4005 
	`Âuts
("--></style>\n"

4007 "<body>\n", 
out
);

4008 
	}
}

4016 
	$wrôe_m™
(c⁄° *
m™_«me
,

4017 c⁄° *
£˘i⁄
,

4018 c⁄° *
tôÀ
,

4019 c⁄° *
foŸîfûe
,

4020 c⁄° *
hódîfûe
,

4021 c⁄° *
öåofûe
,

4022 
mxml_node_t
 *
doc
)

4024 
i
;

4025 
mxml_node_t
 *
fun˘i⁄
,

4026 *
scut
,

4027 *
¨g
,

4028 *
des¸ùti⁄
,

4029 *
ty≥
;

4030 c⁄° *
«me
,

4031 *
˙ame
,

4032 *
defvÆ
,

4033 *
∑ª¡
;

4034 
ösc›e
;

4035 
¥efix
;

4036 
time_t
 
cuπime
;

4037 
tm
 *
curd©e
;

4038 
buf„r
[1024];

4039 c⁄° * c⁄° 
sc›es
[] =

4051 
cuπime
 = 
	`time
(
NULL
);

4052 
curd©e
 = 
	`loˇ…ime
(&
cuπime
);

4053 
	`°r·ime
(
buf„r
, (buf„r), "%x", 
curd©e
);

4055 
	`¥ötf
(".TH %†%†\"%s\" \"%s\" \"%s\"\n", 
m™_«me
, 
£˘i⁄
 ? section : "3",

4056 
tôÀ
 ?ÅôÀ : "", 
buf„r
,Åitle ?Åitle : "");

4062 i‡(
hódîfûe
)

4068 
	`wrôe_fûe
(
°dout
, 
hódîfûe
);

4076 
	`puts
(".SH NAME");

4077 
	`¥ötf
("%†\\- %s\n", 
m™_«me
, 
tôÀ
 ?Åitle : man_name);

4084 i‡(
öåofûe
)

4085 
	`wrôe_fûe
(
°dout
, 
öåofûe
);

4091 i‡(
	`föd_public
(
doc
, doc, "class"))

4093 
	`puts
(".SH CLASSES");

4095 
scut
 = 
	`föd_public
(
doc
, doc, "class");

4096 
scut
;

4097 
scut
 = 
	`föd_public
(scut, 
doc
, "class"))

4099 
˙ame
 = 
	`mxmlEÀmítGëAâr
(
scut
, "name");

4100 
des¸ùti⁄
 = 
	`mxmlFödEÀmít
(
scut
, scut, "des¸ùti⁄", 
NULL
,

4101 
NULL
, 
MXML_DESCEND_FIRST
);

4102 
	`¥ötf
(".SS %s\n", 
˙ame
);

4104 
	`wrôe_des¸ùti⁄
(
°dout
, 
des¸ùti⁄
, 
NULL
, 1);

4106 
	`¥ötf
(".PP\n"

4108 "˛as†%s", 
˙ame
);

4109 i‡((
∑ª¡
 = 
	`mxmlEÀmítGëAâr
(
scut
, "∑ª¡")Ë!
NULL
)

4110 
	`¥ötf
(" %s", 
∑ª¡
);

4111 
	`puts
("\n{");

4113 
i
 = 0; i < 3; i ++)

4115 
ösc›e
 = 0;

4117 
¨g
 = 
	`mxmlFödEÀmít
(
scut
, scut, "v¨übÀ", "sc›e", 
sc›es
[
i
],

4118 
MXML_DESCEND_FIRST
);

4119 
¨g
;

4120 
¨g
 = 
	`mxmlFödEÀmít
◊rg, 
scut
, "v¨übÀ", "sc›e", 
sc›es
[
i
],

4121 
MXML_NO_DESCEND
))

4123 i‡(!
ösc›e
)

4125 
ösc›e
 = 1;

4126 
	`¥ötf
(" %s:\n", 
sc›es
[
i
]);

4129 
	`¥ötf
(" ");

4130 
	`wrôe_ñemít
(
°dout
, 
doc
, 
	`mxmlFödEÀmít
(
¨g
,árg, "ty≥", 
NULL
,

4131 
NULL
, 
MXML_DESCEND_FIRST
),

4132 
OUTPUT_MAN
);

4133 
	`¥ötf
("%s;\n", 
	`mxmlEÀmítGëAâr
(
¨g
, "name"));

4136 
fun˘i⁄
 = 
	`mxmlFödEÀmít
(
scut
, scut, "function", "scope",

4137 
sc›es
[
i
], 
MXML_DESCEND_FIRST
);

4138 
fun˘i⁄
;

4139 
fun˘i⁄
 = 
	`mxmlFödEÀmít
(fun˘i⁄, 
scut
, "function", "scope",

4140 
sc›es
[
i
], 
MXML_NO_DESCEND
))

4142 i‡(!
ösc›e
)

4144 
ösc›e
 = 1;

4145 
	`¥ötf
(" %s:\n", 
sc›es
[
i
]);

4148 
«me
 = 
	`mxmlEÀmítGëAâr
(
fun˘i⁄
, "name");

4150 
	`¥ötf
(" ");

4152 
¨g
 = 
	`mxmlFödEÀmít
(
fun˘i⁄
, fun˘i⁄, "ªtu∫vÆue", 
NULL
,

4153 
NULL
, 
MXML_DESCEND_FIRST
);

4155 i‡(
¨g
)

4156 
	`wrôe_ñemít
(
°dout
, 
doc
, 
	`mxmlFödEÀmít
(
¨g
,árg, "ty≥", 
NULL
,

4157 
NULL
, 
MXML_DESCEND_FIRST
),

4158 
OUTPUT_MAN
);

4159 i‡(
	`°rcmp
(
˙ame
, 
«me
) && strcmp(cname,Çame + 1))

4160 
	`Âuts
("void ", 
°dout
);

4162 
	`¥ötf
("%s", 
«me
);

4164 
¨g
 = 
	`mxmlFödEÀmít
(
fun˘i⁄
, fun˘i⁄, "¨gumít", 
NULL
, NULL,

4165 
MXML_DESCEND_FIRST
), 
¥efix
 = '(';

4166 
¨g
;

4167 
¨g
 = 
	`mxmlFödEÀmít
◊rg, 
fun˘i⁄
, "¨gumít", 
NULL
, NULL,

4168 
MXML_NO_DESCEND
), 
¥efix
 = ',')

4170 
ty≥
 = 
	`mxmlFödEÀmít
(
¨g
,árg, "ty≥", 
NULL
, NULL,

4171 
MXML_DESCEND_FIRST
);

4173 
	`putch¨
(
¥efix
);

4174 i‡(
¥efix
 == ',')

4175 
	`putch¨
(' ');

4177 i‡(
ty≥
->
chûd
)

4178 
	`wrôe_ñemít
(
°dout
, 
doc
, 
ty≥
, 
OUTPUT_MAN
);

4179 
	`Âuts
(
	`mxmlEÀmítGëAâr
(
¨g
, "«me"), 
°dout
);

4180 i‡((
defvÆ
 = 
	`mxmlEÀmítGëAâr
(
¨g
, "deÁu…")Ë!
NULL
)

4181 
	`¥ötf
(" %s", 
defvÆ
);

4184 i‡(
¥efix
 == '(')

4185 
	`puts
("(void);");

4187 
	`puts
(");");

4191 
	`puts
("};\n"

4194 
	`wrôe_des¸ùti⁄
(
°dout
, 
des¸ùti⁄
, 
NULL
, 0);

4202 i‡(
	`föd_public
(
doc
, doc, "enumeration"))

4204 
	`puts
(".SH ENUMERATIONS");

4206 
scut
 = 
	`föd_public
(
doc
, doc, "enumeration");

4207 
scut
;

4208 
scut
 = 
	`föd_public
(scut, 
doc
, "enumeration"))

4210 
«me
 = 
	`mxmlEÀmítGëAâr
(
scut
, "name");

4211 
des¸ùti⁄
 = 
	`mxmlFödEÀmít
(
scut
, scut, "des¸ùti⁄", 
NULL
,

4212 
NULL
, 
MXML_DESCEND_FIRST
);

4213 
	`¥ötf
(".SS %s\n", 
«me
);

4215 
	`wrôe_des¸ùti⁄
(
°dout
, 
des¸ùti⁄
, 
NULL
, 1);

4216 
	`wrôe_des¸ùti⁄
(
°dout
, 
des¸ùti⁄
, 
NULL
, 0);

4218 
¨g
 = 
	`mxmlFödEÀmít
(
scut
, scut, "c⁄°™t", 
NULL
, NULL,

4219 
MXML_DESCEND_FIRST
);

4220 
¨g
;

4221 
¨g
 = 
	`mxmlFödEÀmít
◊rg, 
scut
, "c⁄°™t", 
NULL
, NULL,

4222 
MXML_NO_DESCEND
))

4224 
des¸ùti⁄
 = 
	`mxmlFödEÀmít
(
¨g
,árg, "des¸ùti⁄", 
NULL
,

4225 
NULL
, 
MXML_DESCEND_FIRST
);

4226 
	`¥ötf
(".TP 5\n%s\n.br\n", 
	`mxmlEÀmítGëAâr
(
¨g
, "name"));

4227 
	`wrôe_des¸ùti⁄
(
°dout
, 
des¸ùti⁄
, 
NULL
, 1);

4236 i‡(
	`föd_public
(
doc
, doc, "function"))

4238 
	`puts
(".SH FUNCTIONS");

4240 
fun˘i⁄
 = 
	`föd_public
(
doc
, doc, "function");

4241 
fun˘i⁄
;

4242 
fun˘i⁄
 = 
	`föd_public
(fun˘i⁄, 
doc
, "function"))

4244 
«me
 = 
	`mxmlEÀmítGëAâr
(
fun˘i⁄
, "name");

4245 
des¸ùti⁄
 = 
	`mxmlFödEÀmít
(
fun˘i⁄
, fun˘i⁄, "des¸ùti⁄", 
NULL
,

4246 
NULL
, 
MXML_DESCEND_FIRST
);

4247 
	`¥ötf
(".SS %s\n", 
«me
);

4249 
	`wrôe_des¸ùti⁄
(
°dout
, 
des¸ùti⁄
, 
NULL
, 1);

4251 
	`puts
(".PP\n"

4254 
¨g
 = 
	`mxmlFödEÀmít
(
fun˘i⁄
, fun˘i⁄, "ªtu∫vÆue", 
NULL
,

4255 
NULL
, 
MXML_DESCEND_FIRST
);

4257 i‡(
¨g
)

4258 
	`wrôe_ñemít
(
°dout
, 
doc
, 
	`mxmlFödEÀmít
(
¨g
,árg, "ty≥", 
NULL
,

4259 
NULL
, 
MXML_DESCEND_FIRST
),

4260 
OUTPUT_MAN
);

4262 
	`Âuts
("void", 
°dout
);

4264 
	`¥ötf
(" %†", 
«me
);

4265 
¨g
 = 
	`mxmlFödEÀmít
(
fun˘i⁄
, fun˘i⁄, "¨gumít", 
NULL
, NULL,

4266 
MXML_DESCEND_FIRST
), 
¥efix
 = '(';

4267 
¨g
;

4268 
¨g
 = 
	`mxmlFödEÀmít
◊rg, 
fun˘i⁄
, "¨gumít", 
NULL
, NULL,

4269 
MXML_NO_DESCEND
), 
¥efix
 = ',')

4271 
ty≥
 = 
	`mxmlFödEÀmít
(
¨g
,árg, "ty≥", 
NULL
, NULL,

4272 
MXML_DESCEND_FIRST
);

4274 
	`¥ötf
("%c\¿ ", 
¥efix
);

4275 i‡(
ty≥
->
chûd
)

4276 
	`wrôe_ñemít
(
°dout
, 
doc
, 
ty≥
, 
OUTPUT_MAN
);

4277 
	`Âuts
(
	`mxmlEÀmítGëAâr
(
¨g
, "«me"), 
°dout
);

4278 i‡((
defvÆ
 = 
	`mxmlEÀmítGëAâr
(
¨g
, "deÁu…")Ë!
NULL
)

4279 
	`¥ötf
(" %s", 
defvÆ
);

4282 i‡(
¥efix
 == '(')

4283 
	`puts
("(void);");

4285 
	`puts
("\n);");

4287 
	`puts
(".fi");

4289 
	`wrôe_des¸ùti⁄
(
°dout
, 
des¸ùti⁄
, 
NULL
, 0);

4297 i‡(
	`föd_public
(
doc
, doc, "struct"))

4299 
	`puts
(".SH STRUCTURES");

4301 
scut
 = 
	`föd_public
(
doc
, doc, "struct");

4302 
scut
;

4303 
scut
 = 
	`föd_public
(scut, 
doc
, "struct"))

4305 
˙ame
 = 
	`mxmlEÀmítGëAâr
(
scut
, "name");

4306 
des¸ùti⁄
 = 
	`mxmlFödEÀmít
(
scut
, scut, "des¸ùti⁄", 
NULL
,

4307 
NULL
, 
MXML_DESCEND_FIRST
);

4308 
	`¥ötf
(".SS %s\n", 
˙ame
);

4310 
	`wrôe_des¸ùti⁄
(
°dout
, 
des¸ùti⁄
, 
NULL
, 1);

4312 
	`¥ötf
(".PP\n"

4314 "°ru˘ %s\n{\n", 
˙ame
);

4315 
¨g
 = 
	`mxmlFödEÀmít
(
scut
, scut, "v¨übÀ", 
NULL
, NULL,

4316 
MXML_DESCEND_FIRST
);

4317 
¨g
;

4318 
¨g
 = 
	`mxmlFödEÀmít
◊rg, 
scut
, "v¨übÀ", 
NULL
, NULL,

4319 
MXML_NO_DESCEND
))

4321 
	`¥ötf
(" ");

4322 
	`wrôe_ñemít
(
°dout
, 
doc
, 
	`mxmlFödEÀmít
(
¨g
,árg, "ty≥", 
NULL
,

4323 
NULL
, 
MXML_DESCEND_FIRST
),

4324 
OUTPUT_MAN
);

4325 
	`¥ötf
("%s;\n", 
	`mxmlEÀmítGëAâr
(
¨g
, "name"));

4328 
fun˘i⁄
 = 
	`mxmlFödEÀmít
(
scut
, scut, "fun˘i⁄", 
NULL
, NULL,

4329 
MXML_DESCEND_FIRST
);

4330 
fun˘i⁄
;

4331 
fun˘i⁄
 = 
	`mxmlFödEÀmít
(fun˘i⁄, 
scut
, "fun˘i⁄", 
NULL
, NULL,

4332 
MXML_NO_DESCEND
))

4334 
«me
 = 
	`mxmlEÀmítGëAâr
(
fun˘i⁄
, "name");

4336 
	`¥ötf
(" ");

4338 
¨g
 = 
	`mxmlFödEÀmít
(
fun˘i⁄
, fun˘i⁄, "ªtu∫vÆue", 
NULL
,

4339 
NULL
, 
MXML_DESCEND_FIRST
);

4341 i‡(
¨g
)

4342 
	`wrôe_ñemít
(
°dout
, 
doc
, 
	`mxmlFödEÀmít
(
¨g
,árg, "ty≥", 
NULL
,

4343 
NULL
, 
MXML_DESCEND_FIRST
),

4344 
OUTPUT_MAN
);

4345 i‡(
	`°rcmp
(
˙ame
, 
«me
) && strcmp(cname,Çame + 1))

4346 
	`Âuts
("void ", 
°dout
);

4348 
	`Âuts
(
«me
, 
°dout
);

4350 
¨g
 = 
	`mxmlFödEÀmít
(
fun˘i⁄
, fun˘i⁄, "¨gumít", 
NULL
, NULL,

4351 
MXML_DESCEND_FIRST
), 
¥efix
 = '(';

4352 
¨g
;

4353 
¨g
 = 
	`mxmlFödEÀmít
◊rg, 
fun˘i⁄
, "¨gumít", 
NULL
, NULL,

4354 
MXML_NO_DESCEND
), 
¥efix
 = ',')

4356 
ty≥
 = 
	`mxmlFödEÀmít
(
¨g
,árg, "ty≥", 
NULL
, NULL,

4357 
MXML_DESCEND_FIRST
);

4359 
	`putch¨
(
¥efix
);

4360 i‡(
¥efix
 == ',')

4361 
	`putch¨
(' ');

4363 i‡(
ty≥
->
chûd
)

4364 
	`wrôe_ñemít
(
°dout
, 
doc
, 
ty≥
, 
OUTPUT_MAN
);

4365 
	`Âuts
(
	`mxmlEÀmítGëAâr
(
¨g
, "«me"), 
°dout
);

4366 i‡((
defvÆ
 = 
	`mxmlEÀmítGëAâr
(
¨g
, "deÁu…")Ë!
NULL
)

4367 
	`¥ötf
(" %s", 
defvÆ
);

4370 i‡(
¥efix
 == '(')

4371 
	`puts
("(void);");

4373 
	`puts
(");");

4376 
	`puts
("};\n"

4379 
	`wrôe_des¸ùti⁄
(
°dout
, 
des¸ùti⁄
, 
NULL
, 0);

4387 i‡(
	`föd_public
(
doc
, doc, "typedef"))

4389 
	`puts
(".SH TYPES");

4391 
scut
 = 
	`föd_public
(
doc
, doc, "typedef");

4392 
scut
;

4393 
scut
 = 
	`föd_public
(scut, 
doc
, "typedef"))

4395 
«me
 = 
	`mxmlEÀmítGëAâr
(
scut
, "name");

4396 
des¸ùti⁄
 = 
	`mxmlFödEÀmít
(
scut
, scut, "des¸ùti⁄", 
NULL
,

4397 
NULL
, 
MXML_DESCEND_FIRST
);

4398 
	`¥ötf
(".SS %s\n", 
«me
);

4400 
	`wrôe_des¸ùti⁄
(
°dout
, 
des¸ùti⁄
, 
NULL
, 1);

4402 
	`Âuts
(".PP\n"

4404 "ty≥de‡", 
°dout
);

4406 
ty≥
 = 
	`mxmlFödEÀmít
(
scut
, scut, "ty≥", 
NULL
, NULL,

4407 
MXML_DESCEND_FIRST
);

4409 
ty≥
 =Åy≥->
chûd
;Åy≥;Åy≥ =Åy≥->
√xt
)

4410 i‡(!
	`°rcmp
(
ty≥
->
vÆue
.
ãxt
.
°rög
, "("))

4414 i‡(
ty≥
->
vÆue
.
ãxt
.
whôe•a˚
)

4415 
	`putch¨
(' ');

4417 
	`wrôe_°rög
(
°dout
, 
ty≥
->
vÆue
.
ãxt
.
°rög
, 
OUTPUT_MAN
);

4420 i‡(
ty≥
)

4426 
	`¥ötf
(" (*%s", 
«me
);

4428 
ty≥
 =Åy≥->
√xt
->next;Åype;Åype =Åype->next)

4430 i‡(
ty≥
->
vÆue
.
ãxt
.
whôe•a˚
)

4431 
	`putch¨
(' ');

4433 
	`wrôe_°rög
(
°dout
, 
ty≥
->
vÆue
.
ãxt
.
°rög
, 
OUTPUT_MAN
);

4436 
	`puts
(";");

4439 
	`¥ötf
(" %s;\n", 
«me
);

4441 
	`puts
(".fi");

4443 
	`wrôe_des¸ùti⁄
(
°dout
, 
des¸ùti⁄
, 
NULL
, 0);

4451 i‡(
	`föd_public
(
doc
, doc, "union"))

4453 
	`puts
(".SH UNIONS");

4455 
scut
 = 
	`föd_public
(
doc
, doc, "union");

4456 
scut
;

4457 
scut
 = 
	`föd_public
(scut, 
doc
, "union"))

4459 
«me
 = 
	`mxmlEÀmítGëAâr
(
scut
, "name");

4460 
des¸ùti⁄
 = 
	`mxmlFödEÀmít
(
scut
, scut, "des¸ùti⁄", 
NULL
,

4461 
NULL
, 
MXML_DESCEND_FIRST
);

4462 
	`¥ötf
(".SS %s\n", 
«me
);

4464 
	`wrôe_des¸ùti⁄
(
°dout
, 
des¸ùti⁄
, 
NULL
, 1);

4466 
	`¥ötf
(".PP\n"

4468 "uni⁄ %s\n{\n", 
«me
);

4469 
¨g
 = 
	`mxmlFödEÀmít
(
scut
, scut, "v¨übÀ", 
NULL
, NULL,

4470 
MXML_DESCEND_FIRST
);

4471 
¨g
;

4472 
¨g
 = 
	`mxmlFödEÀmít
◊rg, 
scut
, "v¨übÀ", 
NULL
, NULL,

4473 
MXML_NO_DESCEND
))

4475 
	`¥ötf
(" ");

4476 
	`wrôe_ñemít
(
°dout
, 
doc
, 
	`mxmlFödEÀmít
(
¨g
,árg, "ty≥", 
NULL
,

4477 
NULL
, 
MXML_DESCEND_FIRST
),

4478 
OUTPUT_MAN
);

4479 
	`¥ötf
("%s;\n", 
	`mxmlEÀmítGëAâr
(
¨g
, "name"));

4482 
	`puts
("};\n"

4485 
	`wrôe_des¸ùti⁄
(
°dout
, 
des¸ùti⁄
, 
NULL
, 0);

4493 i‡(
	`föd_public
(
doc
, doc, "variable"))

4495 
	`puts
(".SH VARIABLES");

4497 
¨g
 = 
	`föd_public
(
doc
, doc, "variable");

4498 
¨g
;

4499 
¨g
 = 
	`föd_public
◊rg, 
doc
, "variable"))

4501 
«me
 = 
	`mxmlEÀmítGëAâr
(
¨g
, "name");

4502 
des¸ùti⁄
 = 
	`mxmlFödEÀmít
(
¨g
,árg, "des¸ùti⁄", 
NULL
,

4503 
NULL
, 
MXML_DESCEND_FIRST
);

4504 
	`¥ötf
(".SS %s\n", 
«me
);

4506 
	`wrôe_des¸ùti⁄
(
°dout
, 
des¸ùti⁄
, 
NULL
, 1);

4508 
	`puts
(".PP\n"

4511 
	`wrôe_ñemít
(
°dout
, 
doc
, 
	`mxmlFödEÀmít
(
¨g
,árg, "ty≥", 
NULL
,

4512 
NULL
, 
MXML_DESCEND_FIRST
),

4513 
OUTPUT_MAN
);

4514 
	`Âuts
(
	`mxmlEÀmítGëAâr
(
¨g
, "«me"), 
°dout
);

4515 i‡((
defvÆ
 = 
	`mxmlEÀmítGëAâr
(
¨g
, "deÁu…")Ë!
NULL
)

4516 
	`¥ötf
(" %s", 
defvÆ
);

4517 
	`puts
(";\n"

4520 
	`wrôe_des¸ùti⁄
(
°dout
, 
des¸ùti⁄
, 
NULL
, 0);

4524 i‡(
foŸîfûe
)

4530 
	`wrôe_fûe
(
°dout
, 
foŸîfûe
);

4532 
	}
}

4540 
	$wrôe_scu
(
FILE
 *
out
,

4541 
mxml_node_t
 *
doc
,

4542 
mxml_node_t
 *
scut
)

4544 
i
;

4545 
mxml_node_t
 *
fun˘i⁄
,

4546 *
¨g
,

4547 *
des¸ùti⁄
,

4548 *
ty≥
;

4549 c⁄° *
«me
,

4550 *
˙ame
,

4551 *
defvÆ
,

4552 *
∑ª¡
,

4553 *
sc›e
;

4554 
ösc›e
,

4555 
maxsc›e
;

4556 
¥efix
;

4557 c⁄° * c⁄° 
sc›es
[] =

4565 
˙ame
 = 
	`mxmlEÀmítGëAâr
(
scut
, "name");

4566 
des¸ùti⁄
 = 
	`mxmlFödEÀmít
(
scut
, scut, "des¸ùti⁄", 
NULL
,

4567 
NULL
, 
MXML_DESCEND_FIRST
);

4569 
	`Ârötf
(
out
, "<h3 class=\"%s\">%s<aÇame=\"%s\">%s</a></h3>\n",

4570 
scut
->
vÆue
.
ñemít
.
«me
, 
	`gë_commít_öfo
(
des¸ùti⁄
), 
˙ame
,

4571 
˙ame
);

4573 i‡(
des¸ùti⁄
)

4574 
	`wrôe_des¸ùti⁄
(
out
, 
des¸ùti⁄
, "p", 1);

4576 
	`Ârötf
(
out
, "<∞˛ass=\"code\">%†%s", 
scut
->
vÆue
.
ñemít
.
«me
, 
˙ame
);

4577 i‡((
∑ª¡
 = 
	`mxmlEÀmítGëAâr
(
scut
, "∑ª¡")Ë!
NULL
)

4578 
	`Ârötf
(
out
, " %s", 
∑ª¡
);

4579 
	`Âuts
(" {<br>\n", 
out
);

4581 
maxsc›e
 = !
	`°rcmp
(
scut
->
vÆue
.
ñemít
.
«me
, "class") ? 3 : 1;

4583 
i
 = 0; i < 
maxsc›e
; i ++)

4585 
ösc›e
 = 
maxsc›e
 == 1;

4587 
¨g
 = 
	`mxmlFödEÀmít
(
scut
, scut, "v¨übÀ", 
NULL
, NULL,

4588 
MXML_DESCEND_FIRST
);

4589 
¨g
;

4590 
¨g
 = 
	`mxmlFödEÀmít
◊rg, 
scut
, "v¨übÀ", 
NULL
, NULL,

4591 
MXML_NO_DESCEND
))

4593 i‡(
maxsc›e
 > 1 &&

4594 ((
sc›e
 = 
	`mxmlEÀmítGëAâr
(
¨g
, "sc›e")Ë=
NULL
 ||

4595 
	`°rcmp
(
sc›e
, 
sc›es
[
i
])))

4598 i‡(!
ösc›e
)

4600 
ösc›e
 = 1;

4601 
	`Ârötf
(
out
, "&nb•;&nb•;%s:<br>\n", 
sc›es
[
i
]);

4604 
	`Âuts
("&nb•;&nb•;&nb•;&nb•;", 
out
);

4605 
	`wrôe_ñemít
(
out
, 
doc
, 
	`mxmlFödEÀmít
(
¨g
,árg, "ty≥", 
NULL
,

4606 
NULL
, 
MXML_DESCEND_FIRST
),

4607 
OUTPUT_HTML
);

4608 
	`Ârötf
(
out
, "%s;<br>\n", 
	`mxmlEÀmítGëAâr
(
¨g
, "name"));

4611 
fun˘i⁄
 = 
	`mxmlFödEÀmít
(
scut
, scut, "fun˘i⁄", 
NULL
, NULL,

4612 
MXML_DESCEND_FIRST
);

4613 
fun˘i⁄
;

4614 
fun˘i⁄
 = 
	`mxmlFödEÀmít
(fun˘i⁄, 
scut
, "fun˘i⁄", 
NULL
, NULL,

4615 
MXML_NO_DESCEND
))

4617 i‡(
maxsc›e
 > 1 &&

4618 ((
sc›e
 = 
	`mxmlEÀmítGëAâr
(
¨g
, "sc›e")Ë=
NULL
 ||

4619 
	`°rcmp
(
sc›e
, 
sc›es
[
i
])))

4622 i‡(!
ösc›e
)

4624 
ösc›e
 = 1;

4625 
	`Ârötf
(
out
, "&nb•;&nb•;%s:<br>\n", 
sc›es
[
i
]);

4628 
«me
 = 
	`mxmlEÀmítGëAâr
(
fun˘i⁄
, "name");

4630 
	`Âuts
("&nb•;&nb•;&nb•;&nb•;", 
out
);

4632 
¨g
 = 
	`mxmlFödEÀmít
(
fun˘i⁄
, fun˘i⁄, "ªtu∫vÆue", 
NULL
,

4633 
NULL
, 
MXML_DESCEND_FIRST
);

4635 i‡(
¨g
)

4636 
	`wrôe_ñemít
(
out
, 
doc
, 
	`mxmlFödEÀmít
(
¨g
,árg, "ty≥", 
NULL
,

4637 
NULL
, 
MXML_DESCEND_FIRST
),

4638 
OUTPUT_HTML
);

4639 i‡(
	`°rcmp
(
˙ame
, 
«me
) && strcmp(cname,Çame + 1))

4640 
	`Âuts
("void ", 
out
);

4642 
	`Ârötf
(
out
, "<®hªf=\"#%s.%s\">%s</a>", 
˙ame
, 
«me
,Çame);

4644 
¨g
 = 
	`mxmlFödEÀmít
(
fun˘i⁄
, fun˘i⁄, "¨gumít", 
NULL
, NULL,

4645 
MXML_DESCEND_FIRST
), 
¥efix
 = '(';

4646 
¨g
;

4647 
¨g
 = 
	`mxmlFödEÀmít
◊rg, 
fun˘i⁄
, "¨gumít", 
NULL
, NULL,

4648 
MXML_NO_DESCEND
), 
¥efix
 = ',')

4650 
ty≥
 = 
	`mxmlFödEÀmít
(
¨g
,árg, "ty≥", 
NULL
, NULL,

4651 
MXML_DESCEND_FIRST
);

4653 
	`putc
(
¥efix
, 
out
);

4654 i‡(
¥efix
 == ',')

4655 
	`putc
(' ', 
out
);

4657 i‡(
ty≥
->
chûd
)

4658 
	`wrôe_ñemít
(
out
, 
doc
, 
ty≥
, 
OUTPUT_HTML
);

4660 
	`Âuts
(
	`mxmlEÀmítGëAâr
(
¨g
, "«me"), 
out
);

4661 i‡((
defvÆ
 = 
	`mxmlEÀmítGëAâr
(
¨g
, "deÁu…")Ë!
NULL
)

4662 
	`Ârötf
(
out
, " %s", 
defvÆ
);

4665 i‡(
¥efix
 == '(')

4666 
	`Âuts
("(void);<br>\n", 
out
);

4668 
	`Âuts
(");<br>\n", 
out
);

4672 
	`Âuts
("};</p>\n"

4674 "<dl>\n", 
out
);

4676 
¨g
 = 
	`mxmlFödEÀmít
(
scut
, scut, "v¨übÀ", 
NULL
, NULL,

4677 
MXML_DESCEND_FIRST
);

4678 
¨g
;

4679 
¨g
 = 
	`mxmlFödEÀmít
◊rg, 
scut
, "v¨übÀ", 
NULL
, NULL,

4680 
MXML_NO_DESCEND
))

4682 
des¸ùti⁄
 = 
	`mxmlFödEÀmít
(
¨g
,árg, "des¸ùti⁄", 
NULL
,

4683 
NULL
, 
MXML_DESCEND_FIRST
);

4685 
	`Ârötf
(
out
, "<dt>%s %s</dt>\n",

4686 
	`mxmlEÀmítGëAâr
(
¨g
, "«me"), 
	`gë_commít_öfo
(
des¸ùti⁄
));

4688 
	`wrôe_des¸ùti⁄
(
out
, 
des¸ùti⁄
, "dd", 1);

4689 
	`wrôe_des¸ùti⁄
(
out
, 
des¸ùti⁄
, "dd", 0);

4692 
	`Âuts
("</dl>\n", 
out
);

4694 
fun˘i⁄
 = 
	`mxmlFödEÀmít
(
scut
, scut, "fun˘i⁄", 
NULL
, NULL,

4695 
MXML_DESCEND_FIRST
);

4696 
fun˘i⁄
;

4697 
fun˘i⁄
 = 
	`mxmlFödEÀmít
(fun˘i⁄, 
scut
, "fun˘i⁄", 
NULL
, NULL,

4698 
MXML_NO_DESCEND
))

4700 
	`wrôe_fun˘i⁄
(
out
, 
doc
, 
fun˘i⁄
, 4);

4702 
	}
}

4710 
	$wrôe_°rög
(
FILE
 *
out
,

4711 c⁄° *
s
,

4712 
mode
)

4714 
mode
)

4716 
OUTPUT_HTML
 :

4717 
OUTPUT_XML
 :

4718 *
s
)

4720 i‡(*
s
 == '&')

4721 
	`Âuts
("&amp;", 
out
);

4722 i‡(*
s
 == '<')

4723 
	`Âuts
("&…;", 
out
);

4724 i‡(*
s
 == '>')

4725 
	`Âuts
("&gt;", 
out
);

4726 i‡(*
s
 == '\"')

4727 
	`Âuts
("&quŸ;", 
out
);

4728 i‡(*
s
 & 128)

4734 
ch
;

4737 
ch
 = *
s
 & 255;

4739 i‡((
ch
 & 0xe0) == 0xc0)

4741 
ch
 = ((ch & 0x1fË<< 6Ë| (
s
[1] & 0x3f);

4742 
s
 ++;

4744 i‡((
ch
 & 0xf0) == 0xe0)

4746 
ch
 = ((((ch * 0x0fË<< 6Ë| (
s
[1] & 0x3f)) << 6) | (s[2] & 0x3f);

4747 
s
 += 2;

4750 i‡(
ch
 == 0xa0)

4756 
	`Âuts
("&nb•;", 
out
);

4759 
	`Ârötf
(
out
, "&#x%x;", 
ch
);

4762 
	`putc
(*
s
, 
out
);

4764 
s
 ++;

4768 
OUTPUT_MAN
 :

4769 *
s
)

4771 i‡(*
s
 == '\\' || *s == '-')

4772 
	`putc
('\\', 
out
);

4774 
	`putc
(*
s
++, 
out
);

4778 
	}
}

4786 
	$wrôe_toc
(
FILE
 *
out
,

4787 
mxml_node_t
 *
doc
,

4788 c⁄° *
öåofûe
,

4789 c⁄° *
èrgë
,

4790 
xml
)

4792 
FILE
 *
Â
;

4793 
mxml_node_t
 *
fun˘i⁄
,

4794 *
scut
,

4795 *
¨g
,

4796 *
des¸ùti⁄
;

4797 c⁄° *
«me
,

4798 *
èrgë©å
;

4799 
xmlid
 = 1;

4807 i‡(
èrgë
)

4808 
èrgë©å
 = "Åarget=\"body\"";

4810 
èrgë©å
 = "";

4817 i‡(!
xml
)

4818 
	`Âuts
("<h2 class=\"title\">Contents</h2>\n"

4819 "<u»˛ass=\"c⁄ã¡s\">\n", 
out
);

4821 i‡(
öåofûe
 && (
Â
 = 
	`f›í
(öåofûe, "r")Ë!
NULL
)

4823 
löe
[8192],

4824 *
±r
,

4825 *
íd
,

4826 *
™ch‹
,

4827 
quŸe
,

4828 
Àvñ
 = '2',

4829 
√wÀvñ
;

4830 
öñemít
;

4833 
	`fgës
(
löe
, ÷öe), 
Â
))

4839 i‡((
±r
 = 
	`°r°r
(
löe
, "<h")Ë=
NULL
 &&

4840 (
±r
 = 
	`°r°r
(
löe
, "<H")Ë=
NULL
)

4843 i‡(
±r
[2] != '2' &&Ötr[2] != '3')

4846 
√wÀvñ
 = 
±r
[2];

4852 !
	`°r°r
(
löe
, "</h") && !strstr(line, "</H"))

4854 
íd
 = 
löe
 + 
	`°æí
(line);

4856 i‡(
íd
 =(
löe
 + (line) - 1) ||

4857 !
	`fgës
(
íd
, ()((
löe
Ë- (íd -Üöe)), 
Â
))

4865 
±r
 = 
löe
; *ptr;Ötr ++)

4866 i‡(
	`is•a˚
(*
±r
 & 255))

4867 *
±r
 = ' ';

4873 
±r
 = 
	`°rchr
(
löe
, '<');Ötr;Ötr = strchr(ptr + 1, '<'))

4874 i‡(!
	`°∫cmp
(
±r
, "<A NAME=", 8) || !strncmp(ptr, "<aÇame=", 8))

4877 i‡(!
±r
)

4880 
±r
 += 8;

4881 
öñemít
 = 1;

4883 i‡(*
±r
 == '\'' || *ptr == '\"')

4889 
quŸe
 = *
±r
++;

4890 
™ch‹
 = 
±r
;

4892 *
±r
 && *±∏!
quŸe
)

4893 
±r
 ++;

4895 i‡(!*
±r
)

4898 *
±r
++ = '\0';

4906 
™ch‹
 = 
±r
;

4908 *
±r
 && *±∏!'>' && !
	`is•a˚
(*ptr & 255))

4909 
±r
 ++;

4911 i‡(!*
±r
)

4914 i‡(*
±r
 == '>')

4915 
öñemít
 = 0;

4917 *
±r
++ = '\0';

4924 i‡(
xml
)

4926 i‡(
√wÀvñ
 < 
Àvñ
)

4927 
	`Âuts
("</Node>\n"

4928 "</Subnodes></Node>\n", 
out
);

4929 i‡(
√wÀvñ
 > 
Àvñ
 &&Çewlevel == '3')

4930 
	`Âuts
("<Subnodes>\n", 
out
);

4931 i‡(
xmlid
 > 1)

4932 
	`Âuts
("</Node>\n", 
out
);

4934 
Àvñ
 = 
√wÀvñ
;

4936 
	`Ârötf
(
out
, "<Node id=\"%d\">\n"

4939 "<Name>", 
xmlid
 ++, 
™ch‹
);

4941 
quŸe
 = 0;

4943 *
±r
)

4945 i‡(
öñemít
)

4947 i‡(*
±r
 =
quŸe
)

4948 
quŸe
 = 0;

4949 i‡(*
±r
 == '>')

4950 
öñemít
 = 0;

4951 i‡(*
±r
 == '\'' || *ptr == '\"')

4952 
quŸe
 = *
±r
;

4954 i‡(*
±r
 == '<')

4956 i‡(!
	`°∫cmp
(
±r
, "</A>", 4) || !strncmp(ptr, "</a>", 4))

4959 
öñemít
 = 1;

4962 
	`putc
(*
±r
, 
out
);

4964 
±r
 ++;

4967 
	`Âuts
("</Name>\n", 
out
);

4971 i‡(
√wÀvñ
 < 
Àvñ
)

4972 
	`Âuts
("</li>\n"

4973 "</ul></li>\n", 
out
);

4974 i‡(
√wÀvñ
 > 
Àvñ
)

4975 
	`Âuts
("<u»˛ass=\"subc⁄ã¡s\">\n", 
out
);

4976 i‡(
xmlid
 > 1)

4977 
	`Âuts
("</li>\n", 
out
);

4979 
Àvñ
 = 
√wÀvñ
;

4980 
xmlid
 ++;

4982 
	`Ârötf
(
out
, "%s<li><®hªf=\"%s#%s\"%s>", 
Àvñ
 > '2' ? "\t" : "",

4983 
èrgë
 ?Å¨gë : "", 
™ch‹
, 
èrgë©å
);

4985 
quŸe
 = 0;

4987 *
±r
)

4989 i‡(
öñemít
)

4991 i‡(*
±r
 =
quŸe
)

4992 
quŸe
 = 0;

4993 i‡(*
±r
 == '>')

4994 
öñemít
 = 0;

4995 i‡(*
±r
 == '\'' || *ptr == '\"')

4996 
quŸe
 = *
±r
;

4998 i‡(*
±r
 == '<')

5000 i‡(!
	`°∫cmp
(
±r
, "</A>", 4) || !strncmp(ptr, "</a>", 4))

5003 
öñemít
 = 1;

5006 
	`putc
(*
±r
, 
out
);

5008 
±r
 ++;

5011 
	`Âuts
("</a>", 
out
);

5015 i‡(
Àvñ
 > '1')

5017 i‡(
xml
)

5019 
	`Âuts
("</Node>\n", 
out
);

5021 i‡(
Àvñ
 == '3')

5022 
	`Âuts
("</Subnodes></Node>\n", 
out
);

5026 
	`Âuts
("</li>\n", 
out
);

5028 i‡(
Àvñ
 == '3')

5029 
	`Âuts
("</ul></li>\n", 
out
);

5033 
	`f˛o£
(
Â
);

5040 i‡((
scut
 = 
	`föd_public
(
doc
, doc, "˛ass")Ë!
NULL
)

5042 i‡(
xml
)

5043 
	`Ârötf
(
out
, "<Node id=\"%d\">\n"

5047 "<Subnodes>\n", 
xmlid
 ++);

5049 
	`Ârötf
(
out
, "<li><a href=\"%s#CLASSES\"%s>Classes</a>"

5051 
èrgë
 ?Å¨gë : "", 
èrgë©å
);

5053 
scut
)

5055 
«me
 = 
	`mxmlEÀmítGëAâr
(
scut
, "name");

5056 
des¸ùti⁄
 = 
	`mxmlFödEÀmít
(
scut
, scut, "description",

5057 
NULL
, NULL, 
MXML_DESCEND_FIRST
);

5059 i‡(
xml
)

5061 
	`Ârötf
(
out
, "<Node id=\"%d\">\n"

5065 "</Node>\n", 
xmlid
 ++, 
«me
,Çame);

5069 
	`Ârötf
(
out
, "\t<li><a href=\"%s#%s\"%sÅitle=\"",

5070 
èrgë
 ?Å¨gë : "", 
«me
, 
èrgë©å
);

5071 
	`wrôe_des¸ùti⁄
(
out
, 
des¸ùti⁄
, "", 1);

5072 
	`Ârötf
(
out
, "\">%s</a></li>\n", 
«me
);

5075 
scut
 = 
	`föd_public
(scut, 
doc
, "class");

5078 i‡(
xml
)

5079 
	`Âuts
("</Subnodes></Node>\n", 
out
);

5081 
	`Âuts
("</ul></li>\n", 
out
);

5088 i‡((
fun˘i⁄
 = 
	`föd_public
(
doc
, doc, "fun˘i⁄")Ë!
NULL
)

5090 i‡(
xml
)

5091 
	`Ârötf
(
out
, "<Node id=\"%d\">\n"

5095 "<Subnodes>\n", 
xmlid
 ++);

5097 
	`Ârötf
(
out
, "<li><a href=\"%s#FUNCTIONS\"%s>Functions</a>"

5098 "<u»˛ass=\"code\">\n", 
èrgë
 ?Å¨gë : "", 
èrgë©å
);

5100 
fun˘i⁄
)

5102 
«me
 = 
	`mxmlEÀmítGëAâr
(
fun˘i⁄
, "name");

5103 
des¸ùti⁄
 = 
	`mxmlFödEÀmít
(
fun˘i⁄
, function, "description",

5104 
NULL
, NULL, 
MXML_DESCEND_FIRST
);

5106 i‡(
xml
)

5108 
	`Ârötf
(
out
, "<Node id=\"%d\">\n"

5112 "</Node>\n", 
xmlid
 ++, 
«me
,Çame);

5116 
	`Ârötf
(
out
, "\t<li><a href=\"%s#%s\"%sÅitle=\"",

5117 
èrgë
 ?Å¨gë : "", 
«me
, 
èrgë©å
);

5118 
	`wrôe_des¸ùti⁄
(
out
, 
des¸ùti⁄
, "", 1);

5119 
	`Ârötf
(
out
, "\">%s</a></li>\n", 
«me
);

5122 
fun˘i⁄
 = 
	`föd_public
(fun˘i⁄, 
doc
, "function");

5125 i‡(
xml
)

5126 
	`Âuts
("</Subnodes></Node>\n", 
out
);

5128 
	`Âuts
("</ul></li>\n", 
out
);

5135 i‡((
scut
 = 
	`föd_public
(
doc
, doc, "ty≥def")Ë!
NULL
)

5137 i‡(
xml
)

5138 
	`Ârötf
(
out
, "<Node id=\"%d\">\n"

5142 "<Subnodes>\n", 
xmlid
 ++);

5144 
	`Ârötf
(
out
, "<li><a href=\"%s#TYPES\"%s>Data Types</a>"

5145 "<u»˛ass=\"code\">\n", 
èrgë
 ?Å¨gë : "", 
èrgë©å
);

5147 
scut
)

5149 
«me
 = 
	`mxmlEÀmítGëAâr
(
scut
, "name");

5150 
des¸ùti⁄
 = 
	`mxmlFödEÀmít
(
scut
, scut, "description",

5151 
NULL
, NULL, 
MXML_DESCEND_FIRST
);

5153 i‡(
xml
)

5155 
	`Ârötf
(
out
, "<Node id=\"%d\">\n"

5159 "</Node>\n", 
xmlid
 ++, 
«me
,Çame);

5163 
	`Ârötf
(
out
, "\t<li><a href=\"%s#%s\"%sÅitle=\"",

5164 
èrgë
 ?Å¨gë : "", 
«me
, 
èrgë©å
);

5165 
	`wrôe_des¸ùti⁄
(
out
, 
des¸ùti⁄
, "", 1);

5166 
	`Ârötf
(
out
, "\">%s</a></li>\n", 
«me
);

5169 
scut
 = 
	`föd_public
(scut, 
doc
, "typedef");

5172 i‡(
xml
)

5173 
	`Âuts
("</Subnodes></Node>\n", 
out
);

5175 
	`Âuts
("</ul></li>\n", 
out
);

5182 i‡((
scut
 = 
	`föd_public
(
doc
, doc, "°ru˘")Ë!
NULL
)

5184 i‡(
xml
)

5185 
	`Ârötf
(
out
, "<Node id=\"%d\">\n"

5189 "<Subnodes>\n", 
xmlid
 ++);

5191 
	`Ârötf
(
out
, "<li><a href=\"%s#STRUCTURES\"%s>Structures</a>"

5192 "<u»˛ass=\"code\">\n", 
èrgë
 ?Å¨gë : "", 
èrgë©å
);

5194 
scut
)

5196 
«me
 = 
	`mxmlEÀmítGëAâr
(
scut
, "name");

5197 
des¸ùti⁄
 = 
	`mxmlFödEÀmít
(
scut
, scut, "description",

5198 
NULL
, NULL, 
MXML_DESCEND_FIRST
);

5200 i‡(
xml
)

5202 
	`Ârötf
(
out
, "<Node id=\"%d\">\n"

5206 "</Node>\n", 
xmlid
 ++, 
«me
,Çame);

5210 
	`Ârötf
(
out
, "\t<li><a href=\"%s#%s\"%sÅitle=\"",

5211 
èrgë
 ?Å¨gë : "", 
«me
, 
èrgë©å
);

5212 
	`wrôe_des¸ùti⁄
(
out
, 
des¸ùti⁄
, "", 1);

5213 
	`Ârötf
(
out
, "\">%s</a></li>\n", 
«me
);

5216 
scut
 = 
	`föd_public
(scut, 
doc
, "struct");

5219 i‡(
xml
)

5220 
	`Âuts
("</Subnodes></Node>\n", 
out
);

5222 
	`Âuts
("</ul></li>\n", 
out
);

5229 i‡((
scut
 = 
	`föd_public
(
doc
, doc, "uni⁄")Ë!
NULL
)

5231 i‡(
xml
)

5232 
	`Ârötf
(
out
, "<Node id=\"%d\">\n"

5236 "<Subnodes>\n", 
xmlid
 ++);

5238 
	`Ârötf
(
out
,

5240 
èrgë
 ?Å¨gë : "", 
èrgë©å
);

5242 
scut
)

5244 
«me
 = 
	`mxmlEÀmítGëAâr
(
scut
, "name");

5245 
des¸ùti⁄
 = 
	`mxmlFödEÀmít
(
scut
, scut, "description",

5246 
NULL
, NULL, 
MXML_DESCEND_FIRST
);

5248 i‡(
xml
)

5250 
	`Ârötf
(
out
, "<Node id=\"%d\">\n"

5254 "</Node>\n", 
xmlid
 ++, 
«me
,Çame);

5258 
	`Ârötf
(
out
, "\t<li><a href=\"%s#%s\"%sÅitle=\"",

5259 
èrgë
 ?Å¨gë : "", 
«me
, 
èrgë©å
);

5260 
	`wrôe_des¸ùti⁄
(
out
, 
des¸ùti⁄
, "", 1);

5261 
	`Ârötf
(
out
, "\">%s</a></li>\n", 
«me
);

5264 
scut
 = 
	`föd_public
(scut, 
doc
, "union");

5267 i‡(
xml
)

5268 
	`Âuts
("</Subnodes></Node>\n", 
out
);

5270 
	`Âuts
("</ul></li>\n", 
out
);

5277 i‡((
¨g
 = 
	`föd_public
(
doc
, doc, "v¨übÀ")Ë!
NULL
)

5279 i‡(
xml
)

5280 
	`Ârötf
(
out
, "<Node id=\"%d\">\n"

5284 "<Subnodes>\n", 
xmlid
 ++);

5286 
	`Ârötf
(
out
, "<li><a href=\"%s#VARIABLES\"%s>Variables</a>"

5287 "<u»˛ass=\"code\">\n", 
èrgë
 ?Å¨gë : "", 
èrgë©å
);

5289 
¨g
)

5291 
«me
 = 
	`mxmlEÀmítGëAâr
(
¨g
, "name");

5292 
des¸ùti⁄
 = 
	`mxmlFödEÀmít
(
¨g
,árg, "description",

5293 
NULL
, NULL, 
MXML_DESCEND_FIRST
);

5295 i‡(
xml
)

5297 
	`Ârötf
(
out
, "<Node id=\"%d\">\n"

5301 "</Node>\n", 
xmlid
 ++, 
«me
,Çame);

5305 
	`Ârötf
(
out
, "\t<li><a href=\"%s#%s\"%sÅitle=\"",

5306 
èrgë
 ?Å¨gë : "", 
«me
, 
èrgë©å
);

5307 
	`wrôe_des¸ùti⁄
(
out
, 
des¸ùti⁄
, "", 1);

5308 
	`Ârötf
(
out
, "\">%s</a></li>\n", 
«me
);

5311 
¨g
 = 
	`föd_public
◊rg, 
doc
, "variable");

5314 i‡(
xml
)

5315 
	`Âuts
("</Subnodes></Node>\n", 
out
);

5317 
	`Âuts
("</ul></li>\n", 
out
);

5324 i‡((
scut
 = 
	`föd_public
(
doc
, doc, "íumî©i⁄")Ë!
NULL
)

5326 i‡(
xml
)

5327 
	`Ârötf
(
out
, "<Node id=\"%d\">\n"

5331 "<Subnodes>\n", 
xmlid
 ++);

5333 
	`Ârötf
(
out
, "<li><a href=\"%s#ENUMERATIONS\"%s>Constants</a>"

5334 "<u»˛ass=\"code\">\n", 
èrgë
 ?Å¨gë : "", 
èrgë©å
);

5336 
scut
)

5338 
«me
 = 
	`mxmlEÀmítGëAâr
(
scut
, "name");

5339 
des¸ùti⁄
 = 
	`mxmlFödEÀmít
(
scut
, scut, "description",

5340 
NULL
, NULL, 
MXML_DESCEND_FIRST
);

5342 i‡(
xml
)

5344 
	`Ârötf
(
out
, "<Node id=\"%d\">\n"

5348 "</Node>\n", 
xmlid
 ++, 
«me
,Çame);

5352 
	`Ârötf
(
out
, "\t<li><a href=\"%s#%s\"%sÅitle=\"",

5353 
èrgë
 ?Å¨gë : "", 
«me
, 
èrgë©å
);

5354 
	`wrôe_des¸ùti⁄
(
out
, 
des¸ùti⁄
, "", 1);

5355 
	`Ârötf
(
out
, "\">%s</a></li>\n", 
«me
);

5358 
scut
 = 
	`föd_public
(scut, 
doc
, "enumeration");

5361 i‡(
xml
)

5362 
	`Âuts
("</Subnodes></Node>\n", 
out
);

5364 
	`Âuts
("</ul></li>\n", 
out
);

5371 i‡(!
xml
)

5372 
	`Âuts
("</ul>\n", 
out
);

5373 
	}
}

5381 
	$wrôe_tokís
(
FILE
 *
out
,

5382 
mxml_node_t
 *
doc
,

5383 c⁄° *
∑th
)

5385 
mxml_node_t
 *
fun˘i⁄
,

5386 *
scut
,

5387 *
¨g
,

5388 *
des¸ùti⁄
,

5389 *
ty≥
,

5390 *
node
;

5391 c⁄° *
«me
,

5392 *
˚«me
,

5393 *
defvÆ
;

5394 
¥efix
;

5401 i‡((
scut
 = 
	`föd_public
(
doc
, doc, "˛ass")Ë!
NULL
)

5403 
scut
)

5405 
˚«me
 = 
	`mxmlEÀmítGëAâr
(
scut
, "name");

5406 
des¸ùti⁄
 = 
	`mxmlFödEÀmít
(
scut
, scut, "description",

5407 
NULL
, NULL, 
MXML_DESCEND_FIRST
);

5409 
	`Ârötf
(
out
, "<Token>\n"

5413 "<Ab°ø˘>", 
∑th
, 
˚«me
, cename);

5414 
	`wrôe_des¸ùti⁄
(
out
, 
des¸ùti⁄
, "", 1);

5415 
	`Âuts
("</Abstract>\n"

5416 "</Tokí>\n", 
out
);

5418 i‡((
fun˘i⁄
 = 
	`föd_public
(
scut
, scut, "fun˘i⁄")Ë!
NULL
)

5420 
fun˘i⁄
)

5422 
«me
 = 
	`mxmlEÀmítGëAâr
(
fun˘i⁄
, "name");

5423 
des¸ùti⁄
 = 
	`mxmlFödEÀmít
(
fun˘i⁄
, function, "description",

5424 
NULL
, NULL, 
MXML_DESCEND_FIRST
);

5426 
	`Ârötf
(
out
, "<Token>\n"

5429 "<TokíIdítifõr>//≠∂e_ªf/˝p/˛m/%s/%s", 
∑th
,

5430 
˚«me
, 
«me
, cename,Çame);

5432 
¨g
 = 
	`mxmlFödEÀmít
(
fun˘i⁄
, fun˘i⁄, "ªtu∫vÆue", 
NULL
,

5433 
NULL
, 
MXML_DESCEND_FIRST
);

5435 i‡(
¨g
 && (
ty≥
 = 
	`mxmlFödEÀmít
◊rg,árg, "ty≥", 
NULL
,

5436 
NULL
, 
MXML_DESCEND_FIRST
)) != NULL)

5438 
node
 = 
ty≥
->
chûd
;Çode;Çodênode->
√xt
)

5439 
	`Âuts
(
node
->
vÆue
.
ãxt
.
°rög
, 
out
);

5441 i‡(
	`°rcmp
(
˚«me
, 
«me
) && strcmp(cename,Çame + 1))

5442 
	`Âuts
("void", 
out
);

5444 
	`Âuts
("/", 
out
);

5446 
¨g
 = 
	`mxmlFödEÀmít
(
fun˘i⁄
, fun˘i⁄, "¨gumít", 
NULL
, NULL,

5447 
MXML_DESCEND_FIRST
), 
¥efix
 = '(';

5448 
¨g
;

5449 
¨g
 = 
	`mxmlFödEÀmít
◊rg, 
fun˘i⁄
, "¨gumít", 
NULL
, NULL,

5450 
MXML_NO_DESCEND
), 
¥efix
 = ',')

5452 
ty≥
 = 
	`mxmlFödEÀmít
(
¨g
,árg, "ty≥", 
NULL
, NULL,

5453 
MXML_DESCEND_FIRST
);

5455 
	`putc
(
¥efix
, 
out
);

5457 
node
 = 
ty≥
->
chûd
;Çode;Çodênode->
√xt
)

5458 
	`Âuts
(
node
->
vÆue
.
ãxt
.
°rög
, 
out
);

5460 
	`Âuts
(
	`mxmlEÀmítGëAâr
(
¨g
, "«me"), 
out
);

5463 i‡(
¥efix
 == '(')

5464 
	`Âuts
("(void", 
out
);

5466 
	`Âuts
(")</TokenIdentifier>\n"

5467 "<Ab°ø˘>", 
out
);

5468 
	`wrôe_des¸ùti⁄
(
out
, 
des¸ùti⁄
, "", 1);

5469 
	`Âuts
("</Abstract>\n"

5470 "<De˛¨©i⁄>", 
out
);

5472 
¨g
 = 
	`mxmlFödEÀmít
(
fun˘i⁄
, fun˘i⁄, "ªtu∫vÆue", 
NULL
,

5473 
NULL
, 
MXML_DESCEND_FIRST
);

5475 i‡(
¨g
)

5476 
	`wrôe_ñemít
(
out
, 
doc
, 
	`mxmlFödEÀmít
(
¨g
,árg, "ty≥", 
NULL
,

5477 
NULL
, 
MXML_DESCEND_FIRST
),

5478 
OUTPUT_XML
);

5479 i‡(
	`°rcmp
(
˚«me
, 
«me
) && strcmp(cename,Çame + 1))

5480 
	`Âuts
("void ", 
out
);

5482 
	`Âuts
(
«me
, 
out
);

5484 
¨g
 = 
	`mxmlFödEÀmít
(
fun˘i⁄
, fun˘i⁄, "¨gumít", 
NULL
, NULL,

5485 
MXML_DESCEND_FIRST
), 
¥efix
 = '(';

5486 
¨g
;

5487 
¨g
 = 
	`mxmlFödEÀmít
◊rg, 
fun˘i⁄
, "¨gumít", 
NULL
, NULL,

5488 
MXML_NO_DESCEND
), 
¥efix
 = ',')

5490 
ty≥
 = 
	`mxmlFödEÀmít
(
¨g
,árg, "ty≥", 
NULL
, NULL,

5491 
MXML_DESCEND_FIRST
);

5493 
	`putc
(
¥efix
, 
out
);

5494 i‡(
¥efix
 == ',')

5495 
	`putc
(' ', 
out
);

5497 i‡(
ty≥
->
chûd
)

5498 
	`wrôe_ñemít
(
out
, 
doc
, 
ty≥
, 
OUTPUT_XML
);

5500 
	`Âuts
(
	`mxmlEÀmítGëAâr
(
¨g
, "«me"), 
out
);

5501 i‡((
defvÆ
 = 
	`mxmlEÀmítGëAâr
(
¨g
, "deÁu…")Ë!
NULL
)

5502 
	`Ârötf
(
out
, " %s", 
defvÆ
);

5505 i‡(
¥efix
 == '(')

5506 
	`Âuts
("(void);", 
out
);

5508 
	`Âuts
(");", 
out
);

5510 
	`Âuts
("</Declaration>\n"

5511 "</Tokí>\n", 
out
);

5513 
fun˘i⁄
 = 
	`föd_public
(fun˘i⁄, 
doc
, "function");

5516 
scut
 = 
	`föd_public
(scut, 
doc
, "class");

5524 i‡((
fun˘i⁄
 = 
	`föd_public
(
doc
, doc, "fun˘i⁄")Ë!
NULL
)

5526 
fun˘i⁄
)

5528 
«me
 = 
	`mxmlEÀmítGëAâr
(
fun˘i⁄
, "name");

5529 
des¸ùti⁄
 = 
	`mxmlFödEÀmít
(
fun˘i⁄
, function, "description",

5530 
NULL
, NULL, 
MXML_DESCEND_FIRST
);

5532 
	`Ârötf
(
out
, "<Token>\n"

5536 "<Ab°ø˘>", 
∑th
, 
«me
,Çame);

5537 
	`wrôe_des¸ùti⁄
(
out
, 
des¸ùti⁄
, "", 1);

5538 
	`Âuts
("</Abstract>\n"

5539 "<De˛¨©i⁄>", 
out
);

5541 
¨g
 = 
	`mxmlFödEÀmít
(
fun˘i⁄
, fun˘i⁄, "ªtu∫vÆue", 
NULL
,

5542 
NULL
, 
MXML_DESCEND_FIRST
);

5544 i‡(
¨g
)

5545 
	`wrôe_ñemít
(
out
, 
doc
, 
	`mxmlFödEÀmít
(
¨g
,árg, "ty≥", 
NULL
,

5546 
NULL
, 
MXML_DESCEND_FIRST
),

5547 
OUTPUT_XML
);

5549 
	`Âuts
("void ", 
out
);

5551 
	`Âuts
(
«me
, 
out
);

5553 
¨g
 = 
	`mxmlFödEÀmít
(
fun˘i⁄
, fun˘i⁄, "¨gumít", 
NULL
, NULL,

5554 
MXML_DESCEND_FIRST
), 
¥efix
 = '(';

5555 
¨g
;

5556 
¨g
 = 
	`mxmlFödEÀmít
◊rg, 
fun˘i⁄
, "¨gumít", 
NULL
, NULL,

5557 
MXML_NO_DESCEND
), 
¥efix
 = ',')

5559 
ty≥
 = 
	`mxmlFödEÀmít
(
¨g
,árg, "ty≥", 
NULL
, NULL,

5560 
MXML_DESCEND_FIRST
);

5562 
	`putc
(
¥efix
, 
out
);

5563 i‡(
¥efix
 == ',')

5564 
	`putc
(' ', 
out
);

5566 i‡(
ty≥
->
chûd
)

5567 
	`wrôe_ñemít
(
out
, 
doc
, 
ty≥
, 
OUTPUT_XML
);

5569 
	`Âuts
(
	`mxmlEÀmítGëAâr
(
¨g
, "«me"), 
out
);

5570 i‡((
defvÆ
 = 
	`mxmlEÀmítGëAâr
(
¨g
, "deÁu…")Ë!
NULL
)

5571 
	`Ârötf
(
out
, " %s", 
defvÆ
);

5574 i‡(
¥efix
 == '(')

5575 
	`Âuts
("(void);", 
out
);

5577 
	`Âuts
(");", 
out
);

5579 
	`Âuts
("</Declaration>\n"

5580 "</Tokí>\n", 
out
);

5582 
fun˘i⁄
 = 
	`föd_public
(fun˘i⁄, 
doc
, "function");

5590 i‡((
scut
 = 
	`föd_public
(
doc
, doc, "ty≥def")Ë!
NULL
)

5592 
scut
)

5594 
«me
 = 
	`mxmlEÀmítGëAâr
(
scut
, "name");

5595 
des¸ùti⁄
 = 
	`mxmlFödEÀmít
(
scut
, scut, "description",

5596 
NULL
, NULL, 
MXML_DESCEND_FIRST
);

5598 
	`Ârötf
(
out
, "<Token>\n"

5602 "<Ab°ø˘>", 
∑th
, 
«me
,Çame);

5603 
	`wrôe_des¸ùti⁄
(
out
, 
des¸ùti⁄
, "", 1);

5604 
	`Âuts
("</Abstract>\n"

5605 "</Tokí>\n", 
out
);

5607 
scut
 = 
	`föd_public
(scut, 
doc
, "typedef");

5615 i‡((
scut
 = 
	`föd_public
(
doc
, doc, "°ru˘")Ë!
NULL
)

5617 
scut
)

5619 
«me
 = 
	`mxmlEÀmítGëAâr
(
scut
, "name");

5620 
des¸ùti⁄
 = 
	`mxmlFödEÀmít
(
scut
, scut, "description",

5621 
NULL
, NULL, 
MXML_DESCEND_FIRST
);

5623 
	`Ârötf
(
out
, "<Token>\n"

5627 "<Ab°ø˘>", 
∑th
, 
«me
,Çame);

5628 
	`wrôe_des¸ùti⁄
(
out
, 
des¸ùti⁄
, "", 1);

5629 
	`Âuts
("</Abstract>\n"

5630 "</Tokí>\n", 
out
);

5632 
scut
 = 
	`föd_public
(scut, 
doc
, "struct");

5640 i‡((
scut
 = 
	`föd_public
(
doc
, doc, "uni⁄")Ë!
NULL
)

5642 
scut
)

5644 
«me
 = 
	`mxmlEÀmítGëAâr
(
scut
, "name");

5645 
des¸ùti⁄
 = 
	`mxmlFödEÀmít
(
scut
, scut, "description",

5646 
NULL
, NULL, 
MXML_DESCEND_FIRST
);

5648 
	`Ârötf
(
out
, "<Token>\n"

5652 "<Ab°ø˘>", 
∑th
, 
«me
,Çame);

5653 
	`wrôe_des¸ùti⁄
(
out
, 
des¸ùti⁄
, "", 1);

5654 
	`Âuts
("</Abstract>\n"

5655 "</Tokí>\n", 
out
);

5657 
scut
 = 
	`föd_public
(scut, 
doc
, "union");

5665 i‡((
¨g
 = 
	`föd_public
(
doc
, doc, "v¨übÀ")Ë!
NULL
)

5667 
¨g
)

5669 
«me
 = 
	`mxmlEÀmítGëAâr
(
¨g
, "name");

5670 
des¸ùti⁄
 = 
	`mxmlFödEÀmít
(
¨g
,árg, "description",

5671 
NULL
, NULL, 
MXML_DESCEND_FIRST
);

5673 
	`Ârötf
(
out
, "<Token>\n"

5677 "<Ab°ø˘>", 
∑th
, 
«me
,Çame);

5678 
	`wrôe_des¸ùti⁄
(
out
, 
des¸ùti⁄
, "", 1);

5679 
	`Âuts
("</Abstract>\n"

5680 "</Tokí>\n", 
out
);

5682 
¨g
 = 
	`föd_public
◊rg, 
doc
, "variable");

5690 i‡((
scut
 = 
	`föd_public
(
doc
, doc, "íumî©i⁄")Ë!
NULL
)

5692 
scut
)

5694 
˚«me
 = 
	`mxmlEÀmítGëAâr
(
scut
, "name");

5695 
des¸ùti⁄
 = 
	`mxmlFödEÀmít
(
scut
, scut, "description",

5696 
NULL
, NULL, 
MXML_DESCEND_FIRST
);

5698 
	`Ârötf
(
out
, "<Token>\n"

5702 "<Ab°ø˘>", 
∑th
, 
˚«me
, cename);

5703 
	`wrôe_des¸ùti⁄
(
out
, 
des¸ùti⁄
, "", 1);

5704 
	`Âuts
("</Abstract>\n"

5705 "</Tokí>\n", 
out
);

5707 
¨g
 = 
	`mxmlFödEÀmít
(
scut
, scut, "c⁄°™t", 
NULL
, NULL,

5708 
MXML_DESCEND_FIRST
);

5709 
¨g
;

5710 
¨g
 = 
	`mxmlFödEÀmít
◊rg, 
scut
, "c⁄°™t", 
NULL
, NULL,

5711 
MXML_NO_DESCEND
))

5713 
«me
 = 
	`mxmlEÀmítGëAâr
(
¨g
, "name");

5714 
des¸ùti⁄
 = 
	`mxmlFödEÀmít
(
¨g
,árg, "des¸ùti⁄", 
NULL
,

5715 
NULL
, 
MXML_DESCEND_FIRST
);

5716 
	`Ârötf
(
out
, "<Token>\n"

5720 "<Ab°ø˘>", 
∑th
, 
˚«me
, 
«me
);

5721 
	`wrôe_des¸ùti⁄
(
out
, 
des¸ùti⁄
, "", 1);

5722 
	`Âuts
("</Abstract>\n"

5723 "</Tokí>\n", 
out
);

5726 
scut
 = 
	`föd_public
(scut, 
doc
, "enumeration");

5729 
	}
}

5737 
	$ws_cb
(
mxml_node_t
 *
node
,

5738 
whîe
)

5740 c⁄° *
«me
;

5741 
dïth
;

5742 c⁄° *
•a˚s
 = " ";

5746 
«me
 = 
node
->
vÆue
.
ñemít
.name;

5748 
whîe
)

5750 
MXML_WS_BEFORE_CLOSE
 :

5751 i‡(
	`°rcmp
(
«me
, "argument") &&

5752 
	`°rcmp
(
«me
, "class") &&

5753 
	`°rcmp
(
«me
, "constant") &&

5754 
	`°rcmp
(
«me
, "enumeration") &&

5755 
	`°rcmp
(
«me
, "function") &&

5756 
	`°rcmp
(
«me
, "mxmldoc") &&

5757 
	`°rcmp
(
«me
, "namespace") &&

5758 
	`°rcmp
(
«me
, "returnvalue") &&

5759 
	`°rcmp
(
«me
, "struct") &&

5760 
	`°rcmp
(
«me
, "typedef") &&

5761 
	`°rcmp
(
«me
, "union") &&

5762 
	`°rcmp
(
«me
, "variable"))

5763  (
NULL
);

5765 
dïth
 = -4; 
node
;Çodênode->
∑ª¡
, depth += 2);

5766 i‡(
dïth
 > 40)

5767  (
•a˚s
);

5768 i‡(
dïth
 < 2)

5769  (
NULL
);

5771  (
•a˚s
 + 40 - 
dïth
);

5773 
MXML_WS_AFTER_CLOSE
 :

5776 
MXML_WS_BEFORE_OPEN
 :

5777 
dïth
 = -4; 
node
;Çodênode->
∑ª¡
, depth += 2);

5778 i‡(
dïth
 > 40)

5779  (
•a˚s
);

5780 i‡(
dïth
 < 2)

5781  (
NULL
);

5783  (
•a˚s
 + 40 - 
dïth
);

5786 
MXML_WS_AFTER_OPEN
 :

5787 i‡(
	`°rcmp
(
«me
, "argument") &&

5788 
	`°rcmp
(
«me
, "class") &&

5789 
	`°rcmp
(
«me
, "constant") &&

5790 
	`°rcmp
(
«me
, "enumeration") &&

5791 
	`°rcmp
(
«me
, "function") &&

5792 
	`°rcmp
(
«me
, "mxmldoc") &&

5793 
	`°rcmp
(
«me
, "namespace") &&

5794 
	`°rcmp
(
«me
, "returnvalue") &&

5795 
	`°rcmp
(
«me
, "struct") &&

5796 
	`°rcmp
(
«me
, "typedef") &&

5797 
	`°rcmp
(
«me
, "union") &&

5798 
	`°rcmp
(
«me
, "variable") &&

5799 
	`°∫cmp
(
«me
, "?xml", 4))

5800  (
NULL
);

5804 
	}
}

	@/home/gaojing/123/xml/release-2.7/testmxml.c

29 
	~"c⁄fig.h
"

30 
	~"mxml.h
"

31 #i‚de‡
WIN32


32 
	~<uni°d.h
>

34 
	~<f˙é.h
>

35 #i‚de‡
O_BINARY


36 
	#O_BINARY
 0

	)

44 
	gevít_cou¡s
[6];

51 
ßx_cb
(
mxml_node_t
 *
node
, 
mxml_ßx_evít_t
 
evít
, *
d©a
);

52 
mxml_ty≥_t
 
ty≥_cb
(
mxml_node_t
 *
node
);

53 c⁄° *
whôe•a˚_cb
(
mxml_node_t
 *
node
, 
whîe
);

61 
	$maö
(
¨gc
,

62 *
¨gv
[])

64 
i
;

65 
FILE
 *
Â
;

66 
fd
;

67 
mxml_node_t
 *
åì
,

68 *
node
;

69 
mxml_ödex_t
 *
öd
;

70 
buf„r
[16384];

71 c⁄° *
ty≥s
[] =

85 i‡(
¨gc
 != 2)

87 
	`Âuts
("Ußge:Åe°mxm»fûíame.xml\n", 
°dîr
);

95 
åì
 = 
	`mxmlNewEÀmít
(
MXML_NO_PARENT
, "element");

97 i‡(!
åì
)

99 
	`Âuts
("ERROR: Nÿ∑ª¡Çodêö basi¯ã°!\n", 
°dîr
);

103 i‡(
åì
->
ty≥
 !
MXML_ELEMENT
)

105 
	`Ârötf
(
°dîr
, "ERROR: Parent hasÅype %s (%d),Éxpected MXML_ELEMENT!\n",

106 
åì
->
ty≥
 < 
MXML_ELEMENT
 ||Åªe->ty≥ > 
MXML_TEXT
 ?

107 "UNKNOWN" : 
ty≥s
[
åì
->
ty≥
],Åree->type);

108 
	`mxmlDñëe
(
åì
);

112 i‡(
	`°rcmp
(
åì
->
vÆue
.
ñemít
.
«me
, "element"))

114 
	`Ârötf
(
°dîr
, "ERROR: Parent value is \"%s\",Éxpected \"element\"!\n",

115 
åì
->
vÆue
.
ñemít
.
«me
);

116 
	`mxmlDñëe
(
åì
);

120 
	`mxmlNewI¡egî
(
åì
, 123);

121 
	`mxmlNewO∑que
(
åì
, "opaque");

122 
	`mxmlNewRól
(
åì
, 123.4f);

123 
	`mxmlNewText
(
åì
, 1, "text");

125 
	`mxmlLﬂdSåög
(
åì
, "<groupÅype='string'>string string string</group>",

126 
MXML_NO_CALLBACK
);

127 
	`mxmlLﬂdSåög
(
åì
, "<groupÅype='integer'>1 2 3</group>",

128 
MXML_INTEGER_CALLBACK
);

129 
	`mxmlLﬂdSåög
(
åì
, "<groupÅype='real'>1.0 2.0 3.0</group>",

130 
MXML_REAL_CALLBACK
);

131 
	`mxmlLﬂdSåög
(
åì
, "<group>opaque opaque opaque</group>",

132 
MXML_OPAQUE_CALLBACK
);

133 
	`mxmlLﬂdSåög
(
åì
, "<foo><bar><one><two>value<two>value2</two></two></one>"

134 "</b¨></foo>", 
MXML_OPAQUE_CALLBACK
);

136 
node
 = 
åì
->
chûd
;

138 i‡(!
node
)

140 
	`Âuts
("ERROR: Nÿfú° chûdÇodêö basi¯ã°!\n", 
°dîr
);

141 
	`mxmlDñëe
(
åì
);

145 i‡(
node
->
ty≥
 !
MXML_INTEGER
)

147 
	`Ârötf
(
°dîr
, "ERROR: First child hasÅype %s (%d),Éxpected MXML_INTEGER!\n",

148 
node
->
ty≥
 < 
MXML_ELEMENT
 ||Çode->ty≥ > 
MXML_TEXT
 ?

149 "UNKNOWN" : 
ty≥s
[
node
->
ty≥
],Çode->type);

150 
	`mxmlDñëe
(
åì
);

154 i‡(
node
->
vÆue
.
öãgî
 != 123)

156 
	`Ârötf
(
°dîr
, "ERROR: First child value is %d,Éxpected 123!\n",

157 
node
->
vÆue
.
öãgî
);

158 
	`mxmlDñëe
(
åì
);

162 
node
 =Çode->
√xt
;

164 i‡(!
node
)

166 
	`Âuts
("ERROR: Nÿ£c⁄d chûdÇodêö basi¯ã°!\n", 
°dîr
);

167 
	`mxmlDñëe
(
åì
);

171 i‡(
node
->
ty≥
 !
MXML_OPAQUE
)

173 
	`Ârötf
(
°dîr
, "ERROR: Second child hasÅype %s (%d),Éxpected MXML_OPAQUE!\n",

174 
node
->
ty≥
 < 
MXML_ELEMENT
 ||Çode->ty≥ > 
MXML_TEXT
 ?

175 "UNKNOWN" : 
ty≥s
[
node
->
ty≥
],Çode->type);

176 
	`mxmlDñëe
(
åì
);

180 i‡(!
node
->
vÆue
.
›aque
 || 
	`°rcmp
(node->value.opaque, "opaque"))

182 
	`Ârötf
(
°dîr
, "ERROR: Second child value is \"%s\",Éxpected \"opaque\"!\n",

183 
node
->
vÆue
.
›aque
 ?Çode->value.opaque : "(null)");

184 
	`mxmlDñëe
(
åì
);

188 
node
 =Çode->
√xt
;

190 i‡(!
node
)

192 
	`Âuts
("ERROR: Nÿthúd chûdÇodêö basi¯ã°!\n", 
°dîr
);

193 
	`mxmlDñëe
(
åì
);

197 i‡(
node
->
ty≥
 !
MXML_REAL
)

199 
	`Ârötf
(
°dîr
, "ERROR: Third child hasÅype %s (%d),Éxpected MXML_REAL!\n",

200 
node
->
ty≥
 < 
MXML_ELEMENT
 ||Çode->ty≥ > 
MXML_TEXT
 ?

201 "UNKNOWN" : 
ty≥s
[
node
->
ty≥
],Çode->type);

202 
	`mxmlDñëe
(
åì
);

206 i‡(
node
->
vÆue
.
ªÆ
 != 123.4f)

208 
	`Ârötf
(
°dîr
, "ERROR: Third child value is %f,Éxpected 123.4!\n",

209 
node
->
vÆue
.
ªÆ
);

210 
	`mxmlDñëe
(
åì
);

214 
node
 =Çode->
√xt
;

216 i‡(!
node
)

218 
	`Âuts
("ERROR: Nÿfouπh chûdÇodêö basi¯ã°!\n", 
°dîr
);

219 
	`mxmlDñëe
(
åì
);

223 i‡(
node
->
ty≥
 !
MXML_TEXT
)

225 
	`Ârötf
(
°dîr
, "ERROR: Fourth child hasÅype %s (%d),Éxpected MXML_TEXT!\n",

226 
node
->
ty≥
 < 
MXML_ELEMENT
 ||Çode->ty≥ > 
MXML_TEXT
 ?

227 "UNKNOWN" : 
ty≥s
[
node
->
ty≥
],Çode->type);

228 
	`mxmlDñëe
(
åì
);

232 i‡(!
node
->
vÆue
.
ãxt
.
whôe•a˚
 ||

233 !
node
->
vÆue
.
ãxt
.
°rög
 || 
	`°rcmp
(node->value.text.string, "text"))

235 
	`Ârötf
(
°dîr
, "ERROR: Fourth child value is %d,\"%s\",Éxpected 1,\"text\"!\n",

236 
node
->
vÆue
.
ãxt
.
whôe•a˚
,

237 
node
->
vÆue
.
ãxt
.
°rög
 ?Çode->value.text.string : "(null)");

238 
	`mxmlDñëe
(
åì
);

242 
i
 = 0; i < 4; i ++)

244 
node
 =Çode->
√xt
;

246 i‡(!
node
)

248 
	`Ârötf
(
°dîr
, "ERROR: Nÿgrou∞#%d chûdÇodêö basi¯ã°!\n", 
i
 + 1);

249 
	`mxmlDñëe
(
åì
);

253 i‡(
node
->
ty≥
 !
MXML_ELEMENT
)

255 
	`Ârötf
(
°dîr
, "ERROR: Group child #%d hasÅype %s (%d),Éxpected MXML_ELEMENT!\n",

256 
i
 + 1, 
node
->
ty≥
 < 
MXML_ELEMENT
 ||Çode->ty≥ > 
MXML_TEXT
 ?

257 "UNKNOWN" : 
ty≥s
[
node
->
ty≥
],Çode->type);

258 
	`mxmlDñëe
(
åì
);

267 
node
 = 
	`mxmlFödP©h
(
åì
, "*/two");

268 i‡(!
node
)

270 
	`Âuts
("ERROR: U«bÀÅÿföd vÆuêf‹ \"*/two\".\n", 
°dîr
);

271 
	`mxmlDñëe
(
åì
);

274 i‡(
node
->
ty≥
 !
MXML_OPAQUE
 || 
	`°rcmp
“ode->
vÆue
.
›aque
, "value"))

276 
	`Âuts
("ERROR: Bad vÆuêf‹ \"*/two\".\n", 
°dîr
);

277 
	`mxmlDñëe
(
åì
);

281 
node
 = 
	`mxmlFödP©h
(
åì
, "foo/*/two");

282 i‡(!
node
)

284 
	`Âuts
("ERROR: U«bÀÅÿföd vÆuêf‹ \"foo/*/two\".\n", 
°dîr
);

285 
	`mxmlDñëe
(
åì
);

288 i‡(
node
->
ty≥
 !
MXML_OPAQUE
 || 
	`°rcmp
“ode->
vÆue
.
›aque
, "value"))

290 
	`Âuts
("ERROR: Bad vÆuêf‹ \"foo/*/two\".\n", 
°dîr
);

291 
	`mxmlDñëe
(
åì
);

295 
node
 = 
	`mxmlFödP©h
(
åì
, "foo/bar/one/two");

296 i‡(!
node
)

298 
	`Âuts
("ERROR: U«bÀÅÿföd vÆuêf‹ \"foo/b¨/⁄e/two\".\n", 
°dîr
);

299 
	`mxmlDñëe
(
åì
);

302 i‡(
node
->
ty≥
 !
MXML_OPAQUE
 || 
	`°rcmp
“ode->
vÆue
.
›aque
, "value"))

304 
	`Âuts
("ERROR: Bad vÆuêf‹ \"foo/b¨/⁄e/two\".\n", 
°dîr
);

305 
	`mxmlDñëe
(
åì
);

313 
öd
 = 
	`mxmlIndexNew
(
åì
, 
NULL
, NULL);

314 i‡(!
öd
)

316 
	`Âuts
("ERROR: U«bÀÅÿ¸óã index o‡Æ»nodes!\n", 
°dîr
);

317 
	`mxmlDñëe
(
åì
);

321 i‡(
öd
->
num_nodes
 != 10)

323 
	`Ârötf
(
°dîr
, "ERROR: Index ofállÇodes contains %d "

324 "nodes;Éx≥˘ed 10!\n", 
öd
->
num_nodes
);

325 
	`mxmlIndexDñëe
(
öd
);

326 
	`mxmlDñëe
(
åì
);

330 
	`mxmlIndexRe£t
(
öd
);

331 i‡(!
	`mxmlIndexFöd
(
öd
, "group", 
NULL
))

333 
	`Âuts
("ERROR: mxmlIndexFöd f‹ \"group\" faûed!\n", 
°dîr
);

334 
	`mxmlIndexDñëe
(
öd
);

335 
	`mxmlDñëe
(
åì
);

339 
	`mxmlIndexDñëe
(
öd
);

341 
öd
 = 
	`mxmlIndexNew
(
åì
, "group", 
NULL
);

342 i‡(!
öd
)

344 
	`Âuts
("ERROR: U«bÀÅÿ¸óã index o‡groups!\n", 
°dîr
);

345 
	`mxmlDñëe
(
åì
);

349 i‡(
öd
->
num_nodes
 != 4)

351 
	`Ârötf
(
°dîr
, "ERROR: Index of groups contains %d "

352 "nodes;Éx≥˘ed 4!\n", 
öd
->
num_nodes
);

353 
	`mxmlIndexDñëe
(
öd
);

354 
	`mxmlDñëe
(
åì
);

358 
	`mxmlIndexRe£t
(
öd
);

359 i‡(!
	`mxmlIndexEnum
(
öd
))

361 
	`Âuts
("ERROR: mxmlIndexEnum faûed!\n", 
°dîr
);

362 
	`mxmlIndexDñëe
(
öd
);

363 
	`mxmlDñëe
(
åì
);

367 
	`mxmlIndexDñëe
(
öd
);

369 
öd
 = 
	`mxmlIndexNew
(
åì
, 
NULL
, "type");

370 i‡(!
öd
)

372 
	`Âuts
("ERROR: U«bÀÅÿ¸óã index o‡ty≥áâribuãs!\n", 
°dîr
);

373 
	`mxmlDñëe
(
åì
);

377 i‡(
öd
->
num_nodes
 != 3)

379 
	`Ârötf
(
°dîr
, "ERROR: Index ofÅypeáttributes contains %d "

380 "nodes;Éx≥˘ed 3!\n", 
öd
->
num_nodes
);

381 
	`mxmlIndexDñëe
(
öd
);

382 
	`mxmlDñëe
(
åì
);

386 
	`mxmlIndexRe£t
(
öd
);

387 i‡(!
	`mxmlIndexFöd
(
öd
, 
NULL
, "string"))

389 
	`Âuts
("ERROR: mxmlIndexFöd f‹ \"°rög\" faûed!\n", 
°dîr
);

390 
	`mxmlIndexDñëe
(
öd
);

391 
	`mxmlDñëe
(
åì
);

395 
	`mxmlIndexDñëe
(
öd
);

397 
öd
 = 
	`mxmlIndexNew
(
åì
, "group", "type");

398 i‡(!
öd
)

400 
	`Âuts
("ERROR: U«bÀÅÿ¸óã index o‡ñemít†™dáâribuãs!\n", 
°dîr
);

401 
	`mxmlDñëe
(
åì
);

405 i‡(
öd
->
num_nodes
 != 3)

407 
	`Ârötf
(
°dîr
, "ERROR: Index ofÉlementsándáttributes contains %d "

408 "nodes;Éx≥˘ed 3!\n", 
öd
->
num_nodes
);

409 
	`mxmlIndexDñëe
(
öd
);

410 
	`mxmlDñëe
(
åì
);

414 
	`mxmlIndexRe£t
(
öd
);

415 i‡(!
	`mxmlIndexFöd
(
öd
, "group", "string"))

417 
	`Âuts
("ERROR: mxmlIndexFöd f‹ \"°rög\" faûed!\n", 
°dîr
);

418 
	`mxmlIndexDñëe
(
öd
);

419 
	`mxmlDñëe
(
åì
);

423 
	`mxmlIndexDñëe
(
öd
);

429 
i
 = 0; i < 9; i ++)

431 i‡(
åì
->
chûd
)

432 
	`mxmlDñëe
(
åì
->
chûd
);

435 
	`Ârötf
(
°dîr
, "ERROR: ChildÖointerÖrematurely NULL on child #%d\n",

436 
i
 + 1);

437 
	`mxmlDñëe
(
åì
);

442 i‡(
åì
->
chûd
)

444 
	`Âuts
("ERROR: ChûdÖoöã∏nŸ NULLá·î dñëögáŒ chûdªn!\n", 
°dîr
);

448 i‡(
åì
->
œ°_chûd
)

450 
	`Âuts
("ERROR: La° chûdÖoöã∏nŸ NULLá·î dñëögáŒ chûdªn!\n", 
°dîr
);

454 
	`mxmlDñëe
(
åì
);

460 i‡(
¨gv
[1][0] == '<')

461 
åì
 = 
	`mxmlLﬂdSåög
(
NULL
, 
¨gv
[1], 
ty≥_cb
);

462 i‡((
Â
 = 
	`f›í
(
¨gv
[1], "rb")Ë=
NULL
)

464 
	`≥º‹
(
¨gv
[1]);

473 
åì
 = 
	`mxmlLﬂdFûe
(
NULL
, 
Â
, 
ty≥_cb
);

475 
	`f˛o£
(
Â
);

478 i‡(!
åì
)

480 
	`Âuts
("U«bÀÅÿªad XML fûe!\n", 
°dîr
);

484 i‡(!
	`°rcmp
(
¨gv
[1], "test.xml"))

491 i‡((
node
 = 
	`mxmlFödEÀmít
(
åì
,Åªe, "choi˚", 
NULL
, NULL,

492 
MXML_DESCEND
)Ë=
NULL
)

494 
	`Âuts
("U«bÀÅÿföd fú° <choi˚>ÉÀmíàö XMLÅªe!\n", 
°dîr
);

495 
	`mxmlDñëe
(
åì
);

499 i‡(!
	`mxmlFödEÀmít
(
node
, 
åì
, "choi˚", 
NULL
, NULL, 
MXML_NO_DESCEND
))

501 
	`Âuts
("U«bÀÅÿföd sec⁄d <choi˚>ÉÀmíàö XMLÅªe!\n", 
°dîr
);

502 
	`mxmlDñëe
(
åì
);

511 
	`mxmlSaveFûe
(
åì
, 
°dout
, 
whôe•a˚_cb
);

517 i‡(
	`mxmlSaveSåög
(
åì
, 
buf„r
, (buf„r), 
whôe•a˚_cb
) > 0)

518 
	`Âuts
(
buf„r
, 
°dîr
);

524 
	`mxmlDñëe
(
åì
);

530 i‡(
¨gv
[1][0] != '<')

536 i‡((
fd
 = 
	`›í
(
¨gv
[1], 
O_RDONLY
 | 
O_BINARY
)) < 0)

538 
	`≥º‹
(
¨gv
[1]);

546 
åì
 = 
	`mxmlLﬂdFd
(
NULL
, 
fd
, 
ty≥_cb
);

548 
	`˛o£
(
fd
);

554 
	`¢¥ötf
(
buf„r
, (buf„r), "%sfd", 
¨gv
[1]);

556 i‡((
fd
 = 
	`›í
(
buf„r
, 
O_WRONLY
 | 
O_CREAT
 | 
O_TRUNC
 | 
O_BINARY
, 0666)) < 0)

558 
	`≥º‹
(
buf„r
);

559 
	`mxmlDñëe
(
åì
);

567 
	`mxmlSaveFd
(
åì
, 
fd
, 
whôe•a˚_cb
);

569 
	`˛o£
(
fd
);

575 
	`mxmlDñëe
(
åì
);

582 
	`mem£t
(
evít_cou¡s
, 0, (event_counts));

584 i‡(
¨gv
[1][0] == '<')

585 
	`mxmlSAXLﬂdSåög
(
NULL
, 
¨gv
[1], 
ty≥_cb
, 
ßx_cb
, NULL);

586 i‡((
Â
 = 
	`f›í
(
¨gv
[1], "rb")Ë=
NULL
)

588 
	`≥º‹
(
¨gv
[1]);

597 
	`mxmlSAXLﬂdFûe
(
NULL
, 
Â
, 
ty≥_cb
, 
ßx_cb
, NULL);

599 
	`f˛o£
(
Â
);

602 i‡(!
	`°rcmp
(
¨gv
[1], "test.xml"))

604 i‡(
evít_cou¡s
[
MXML_SAX_CDATA
] != 1)

606 
	`Ârötf
(
°dîr
, "MXML_SAX_CDATA seen %dÅimes,Éxpected 1Åimes!\n",

607 
evít_cou¡s
[
MXML_SAX_CDATA
]);

611 i‡(
evít_cou¡s
[
MXML_SAX_COMMENT
] != 1)

613 
	`Ârötf
(
°dîr
, "MXML_SAX_COMMENT seen %dÅimes,Éxpected 1Åimes!\n",

614 
evít_cou¡s
[
MXML_SAX_COMMENT
]);

618 i‡(
evít_cou¡s
[
MXML_SAX_DATA
] != 60)

620 
	`Ârötf
(
°dîr
, "MXML_SAX_DATA seen %dÅimes,Éxpected 60Åimes!\n",

621 
evít_cou¡s
[
MXML_SAX_DATA
]);

625 i‡(
evít_cou¡s
[
MXML_SAX_DIRECTIVE
] != 1)

627 
	`Ârötf
(
°dîr
, "MXML_SAX_DIRECTIVE seen %dÅimes,Éxpected 1Åimes!\n",

628 
evít_cou¡s
[
MXML_SAX_DIRECTIVE
]);

632 i‡(
evít_cou¡s
[
MXML_SAX_ELEMENT_CLOSE
] != 20)

634 
	`Ârötf
(
°dîr
, "MXML_SAX_ELEMENT_CLOSE seen %dÅimes,Éxpected 20Åimes!\n",

635 
evít_cou¡s
[
MXML_SAX_ELEMENT_CLOSE
]);

639 i‡(
evít_cou¡s
[
MXML_SAX_ELEMENT_OPEN
] != 20)

641 
	`Ârötf
(
°dîr
, "MXML_SAX_ELEMENT_OPEN seen %dÅimes,Éxpected 20Åimes!\n",

642 
evít_cou¡s
[
MXML_SAX_ELEMENT_OPEN
]);

652 
	}
}

660 
	$ßx_cb
(
mxml_node_t
 *
node
,

661 
mxml_ßx_evít_t
 
evít
,

662 *
d©a
)

668 
evít_cou¡s
[
evít
] ++;

669 
	}
}

676 
mxml_ty≥_t


677 
	$ty≥_cb
(
mxml_node_t
 *
node
)

679 c⁄° *
ty≥
;

686 i‡((
ty≥
 = 
	`mxmlEÀmítGëAâr
(
node
, "ty≥")Ë=
NULL
)

687 
ty≥
 = 
node
->
vÆue
.
ñemít
.
«me
;

689 i‡(!
	`°rcmp
(
ty≥
, "integer"))

690  (
MXML_INTEGER
);

691 i‡(!
	`°rcmp
(
ty≥
, "opaque") || !strcmp(type, "pre"))

692  (
MXML_OPAQUE
);

693 i‡(!
	`°rcmp
(
ty≥
, "real"))

694  (
MXML_REAL
);

696  (
MXML_TEXT
);

697 
	}
}

706 
	$whôe•a˚_cb
(
mxml_node_t
 *
node
,

707 
whîe
)

709 
mxml_node_t
 *
∑ª¡
;

710 
Àvñ
;

711 c⁄° *
«me
;

712 c⁄° *
èbs
 = "\t\t\t\t\t\t\t\t";

721 
«me
 = 
node
->
vÆue
.
ñemít
.name;

723 i‡(!
	`°rcmp
(
«me
, "html") || !strcmp(name, "head") || !strcmp(name, "body") ||

724 !
	`°rcmp
(
«me
, "pre") || !strcmp(name, "p") ||

725 !
	`°rcmp
(
«me
, "h1") || !strcmp(name, "h2") || !strcmp(name, "h3") ||

726 !
	`°rcmp
(
«me
, "h4") || !strcmp(name, "h5") || !strcmp(name, "h6"))

732 i‡(
whîe
 =
MXML_WS_BEFORE_OPEN
 || whîê=
MXML_WS_AFTER_CLOSE
)

735 i‡(!
	`°rcmp
(
«me
, "dl") || !strcmp(name, "ol") || !strcmp(name, "ul"))

743 i‡(!
	`°rcmp
(
«me
, "dd") || !strcmp(name, "dt") || !strcmp(name, "li"))

749 i‡(
whîe
 =
MXML_WS_BEFORE_OPEN
)

751 i‡(
whîe
 =
MXML_WS_AFTER_CLOSE
)

754 i‡(!
	`°∫cmp
(
«me
, "?xml", 4))

756 i‡(
whîe
 =
MXML_WS_AFTER_OPEN
)

759  (
NULL
);

761 i‡(
whîe
 =
MXML_WS_BEFORE_OPEN
 ||

762 ((!
	`°rcmp
(
«me
, "choice") || !strcmp(name, "option")) &&

763 
whîe
 =
MXML_WS_BEFORE_CLOSE
))

765 
Àvñ
 = -1, 
∑ª¡
 = 
node
->parent;

766 
∑ª¡
;

767 
Àvñ
 ++, 
∑ª¡
 =Öarent->parent);

769 i‡(
Àvñ
 > 8)

770 
Àvñ
 = 8;

771 i‡(
Àvñ
 < 0)

772 
Àvñ
 = 0;

774  (
èbs
 + 8 - 
Àvñ
);

776 i‡(
whîe
 =
MXML_WS_AFTER_CLOSE
 ||

777 ((!
	`°rcmp
(
«me
, "group") || !strcmp(name, "option") ||

778 !
	`°rcmp
(
«me
, "choice")) &&

779 
whîe
 =
MXML_WS_AFTER_OPEN
))

781 i‡(
whîe
 =
MXML_WS_AFTER_OPEN
 && !
node
->
chûd
)

788  (
NULL
);

789 
	}
}

	@/home/gaojing/123/xml/release-2.7/vcnet/config.h

28 
	#_CRT_SECURE_NO_DEPRECATE


	)

29 
	#_CRT_SECURE_NO_WARNINGS


	)

36 
	~<°dio.h
>

37 
	~<°dlib.h
>

38 
	~<°rög.h
>

39 
	~<°d¨g.h
>

40 
	~<˘y≥.h
>

41 
	~<io.h
>

54 
	#˛o£
 
_˛o£


	)

55 
	#›í
 
_›í


	)

56 
	#ªad
 
_ªad


	)

57 
	#¢¥ötf
 
_¢¥ötf


	)

58 
	#°rdup
 
_°rdup


	)

59 
	#v¢¥ötf
 
_v¢¥ötf


	)

60 
	#wrôe
 
_wrôe


	)

67 
	#MXML_VERSION
 "Möi-XML v2.7"

	)

74 
	#ölöe
 
_ölöe


	)

81 
	#HAVE_LONG_LONG
 1

	)

88 
	#HAVE_SNPRINTF
 1

	)

89 
	#HAVE_VSNPRINTF
 1

	)

96 
	#HAVE_STRDUP
 1

	)

103 #i‚de‡
HAVE_STRDUP


104 *
_mxml_°rdup
(const *);

105 
	#°rdup
 
_mxml_°rdup


	)

108 *
_mxml_°rdupf
(const *, ...);

109 *
_mxml_v°rdupf
(c⁄° *, 
va_li°
);

111 #i‚de‡
HAVE_SNPRINTF


112 
_mxml_¢¥ötf
(*, 
size_t
, const *, ...);

113 
	#¢¥ötf
 
_mxml_¢¥ötf


	)

116 #i‚de‡
HAVE_VSNPRINTF


117 
_mxml_v¢¥ötf
(*, 
size_t
, c⁄° *, 
va_li°
);

118 
	#v¢¥ötf
 
_mxml_v¢¥ötf


	)

	@config.h

22 
	~<°dio.h
>

23 
	~<°dlib.h
>

24 
	~<°rög.h
>

25 
	~<°d¨g.h
>

26 
	~<˘y≥.h
>

33 
	#MXML_VERSION
 "Möi-XML v2.7"

	)

40 
	#ölöe


	)

47 
	#HAVE_LONG_LONG
 1

	)

54 
	#HAVE_SNPRINTF
 1

	)

55 
	#HAVE_VSNPRINTF
 1

	)

62 
	#HAVE_STRDUP
 1

	)

69 
	#HAVE_PTHREAD_H
 1

	)

76 #i‚de‡
HAVE_STRDUP


77 *
_mxml_°rdup
(const *);

78 
	#°rdup
 
_mxml_°rdup


	)

81 *
_mxml_°rdupf
(const *, ...);

82 *
_mxml_v°rdupf
(c⁄° *, 
va_li°
);

84 #i‚de‡
HAVE_SNPRINTF


85 
_mxml_¢¥ötf
(*, 
size_t
, const *, ...);

86 
	#¢¥ötf
 
_mxml_¢¥ötf


	)

89 #i‚de‡
HAVE_VSNPRINTF


90 
_mxml_v¢¥ötf
(*, 
size_t
, c⁄° *, 
va_li°
);

91 
	#v¢¥ötf
 
_mxml_v¢¥ötf


	)

	@mxml-private.h

21 
	~"c⁄fig.h
"

22 
	~"mxml.h
"

29 
	s_mxml_globÆ_s


31 (*
	mîr‹_cb
)(const *);

32 
	mnum_ítôy_cbs
;

33 (*
	mítôy_cbs
[100])(c⁄° *
	m«me
);

34 
	mwøp
;

35 
mxml_cu°om_lﬂd_cb_t
 
	mcu°om_lﬂd_cb
;

36 
mxml_cu°om_ßve_cb_t
 
	mcu°om_ßve_cb
;

37 } 
	t_mxml_globÆ_t
;

44 
_mxml_globÆ_t
 *
_mxml_globÆ
();

45 
_mxml_ítôy_cb
(c⁄° *
«me
);

	@mxml.h

21 #i‚de‡
_mxml_h_


22 
	#_mxml_h_


	)

28 
	~<°dio.h
>

29 
	~<°dlib.h
>

30 
	~<°rög.h
>

31 
	~<˘y≥.h
>

32 
	~<î∫o.h
>

39 
	#MXML_TAB
 8

	)

41 
	#MXML_NO_CALLBACK
 0

	)

42 
	#MXML_INTEGER_CALLBACK
 
mxml_öãgî_cb


	)

44 
	#MXML_OPAQUE_CALLBACK
 
mxml_›aque_cb


	)

46 
	#MXML_REAL_CALLBACK
 
mxml_ªÆ_cb


	)

48 
	#MXML_TEXT_CALLBACK
 0

	)

49 
	#MXML_IGNORE_CALLBACK
 
mxml_ign‹e_cb


	)

52 
	#MXML_NO_PARENT
 0

	)

54 
	#MXML_DESCEND
 1

	)

55 
	#MXML_NO_DESCEND
 0

	)

56 
	#MXML_DESCEND_FIRST
 -1

	)

58 
	#MXML_WS_BEFORE_OPEN
 0

	)

59 
	#MXML_WS_AFTER_OPEN
 1

	)

60 
	#MXML_WS_BEFORE_CLOSE
 2

	)

61 
	#MXML_WS_AFTER_CLOSE
 3

	)

63 
	#MXML_ADD_BEFORE
 0

	)

64 
	#MXML_ADD_AFTER
 1

	)

65 
	#MXML_ADD_TO_PARENT
 
NULL


	)

72 
mxml_ßx_evít_e


74 
	gMXML_SAX_CDATA
,

75 
	gMXML_SAX_COMMENT
,

76 
	gMXML_SAX_DATA
,

77 
	gMXML_SAX_DIRECTIVE
,

78 
	gMXML_SAX_ELEMENT_CLOSE
,

79 
	gMXML_SAX_ELEMENT_OPEN


80 } 
	tmxml_ßx_evít_t
;

82 
mxml_ty≥_e


84 
	gMXML_IGNORE
 = -1,

85 
	gMXML_ELEMENT
,

86 
	gMXML_INTEGER
,

87 
	gMXML_OPAQUE
,

88 
	gMXML_REAL
,

89 
	gMXML_TEXT
,

90 
	gMXML_CUSTOM


91 } 
	tmxml_ty≥_t
;

93 (*
	tmxml_cu°om_de°roy_cb_t
)(*);

96 (*
	tmxml_îr‹_cb_t
)(const *);

99 
mxml_©å_s


101 *
«me
;

102 *
vÆue
;

103 
	}
} 
	tmxml_©å_t
;

105 
mxml_ñemít_s


107 *
	g«me
;

108 
	gnum_©ås
;

109 
mxml_©å_t
 *
	g©ås
;

110 } 
	tmxml_ñemít_t
;

112 
mxml_ãxt_s


114 
	gwhôe•a˚
;

115 *
	g°rög
;

116 } 
	tmxml_ãxt_t
;

118 
mxml_cu°om_s


120 *
	gd©a
;

121 
mxml_cu°om_de°roy_cb_t
 
	gde°roy
;

122 } 
	tmxml_cu°om_t
;

124 
mxml_vÆue_u


126 
mxml_ñemít_t
 
	gñemít
;

127 
	göãgî
;

128 *
	g›aque
;

129 
	gªÆ
;

130 
mxml_ãxt_t
 
	gãxt
;

131 
mxml_cu°om_t
 
	gcu°om
;

132 } 
	tmxml_vÆue_t
;

134 
mxml_node_s


136 
mxml_ty≥_t
 
	gty≥
;

137 
mxml_node_s
 *
	g√xt
;

138 
mxml_node_s
 *
	g¥ev
;

139 
mxml_node_s
 *
	g∑ª¡
;

140 
mxml_node_s
 *
	gchûd
;

141 
mxml_node_s
 *
	gœ°_chûd
;

142 
mxml_vÆue_t
 
	gvÆue
;

143 
	gªf_cou¡
;

144 *
	gu£r_d©a
;

147 
mxml_node_s
 
	tmxml_node_t
;

149 
mxml_ödex_s


151 *
	g©å
;

152 
	gnum_nodes
;

153 
	gÆloc_nodes
;

154 
	gcur_node
;

155 
mxml_node_t
 **
	gnodes
;

158 
mxml_ödex_s
 
	tmxml_ödex_t
;

161 (*
	tmxml_cu°om_lﬂd_cb_t
)(
	tmxml_node_t
 *, const *);

164 *(*
	tmxml_cu°om_ßve_cb_t
)(
	tmxml_node_t
 *);

167 (*
	tmxml_ítôy_cb_t
)(const *);

170 
	$mxml_ty≥_t
 (*
	tmxml_lﬂd_cb_t
)(
	tmxml_node_t
 *);

173 c⁄° *(*
	tmxml_ßve_cb_t
)(
	tmxml_node_t
 *, );

176 (*
	tmxml_ßx_cb_t
)(
	tmxml_node_t
 *, 
	tmxml_ßx_evít_t
, *);

184 #ifde‡
__˝lu•lus


192 
	`mxmlAdd
(
mxml_node_t
 *
∑ª¡
, 
whîe
,

193 
mxml_node_t
 *
chûd
, mxml_node_à*
node
);

194 
	`mxmlDñëe
(
mxml_node_t
 *
node
);

195 
	`mxmlEÀmítDñëeAâr
(
mxml_node_t
 *
node
,

196 c⁄° *
«me
);

197 c⁄° *
	`mxmlEÀmítGëAâr
(
mxml_node_t
 *
node
, c⁄° *
«me
);

198 
	`mxmlEÀmítSëAâr
(
mxml_node_t
 *
node
, c⁄° *
«me
,

199 c⁄° *
vÆue
);

200 
	`mxmlEÀmítSëAârf
(
mxml_node_t
 *
node
, c⁄° *
«me
,

201 c⁄° *
f‹m©
, ...)

202 #ifde‡
__GNUC__


203 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__¥ötf__
, 3, 4)))

206 
	`mxmlE¡ôyAddCÆlback
(
mxml_ítôy_cb_t
 
cb
);

207 c⁄° *
	`mxmlE¡ôyGëName
(
vÆ
);

208 
	`mxmlE¡ôyGëVÆue
(c⁄° *
«me
);

209 
	`mxmlE¡ôyRemoveCÆlback
(
mxml_ítôy_cb_t
 
cb
);

210 
mxml_node_t
 *
	`mxmlFödEÀmít
(mxml_node_à*
node
, mxml_node_à*
t›
,

211 c⁄° *
«me
, c⁄° *
©å
,

212 c⁄° *
vÆue
, 
des˚nd
);

213 
mxml_node_t
 *
	`mxmlFödP©h
(mxml_node_à*
node
, c⁄° *
∑th
);

214 c⁄° *
	`mxmlGëCDATA
(
mxml_node_t
 *
node
);

215 c⁄° *
	`mxmlGëCu°om
(
mxml_node_t
 *
node
);

216 c⁄° *
	`mxmlGëEÀmít
(
mxml_node_t
 *
node
);

217 
mxml_node_t
 *
	`mxmlGëFú°Chûd
(mxml_node_à*
node
);

218 
	`mxmlGëI¡egî
(
mxml_node_t
 *
node
);

219 
mxml_node_t
 *
	`mxmlGëLa°Chûd
(mxml_node_à*
node
);

220 
mxml_node_t
 *
	`mxmlGëNextSiblög
(mxml_node_à*
node
);

221 c⁄° *
	`mxmlGëO∑que
(
mxml_node_t
 *
node
);

222 
mxml_node_t
 *
	`mxmlGëP¨ít
(mxml_node_à*
node
);

223 
mxml_node_t
 *
	`mxmlGëPªvSiblög
(mxml_node_à*
node
);

224 
	`mxmlGëRól
(
mxml_node_t
 *
node
);

225 
	`mxmlGëRefCou¡
(
mxml_node_t
 *
node
);

226 c⁄° *
	`mxmlGëText
(
mxml_node_t
 *
node
, *
whôe•a˚
);

227 
mxml_ty≥_t
 
	`mxmlGëTy≥
(
mxml_node_t
 *
node
);

228 *
	`mxmlGëU£rD©a
(
mxml_node_t
 *
node
);

229 
	`mxmlIndexDñëe
(
mxml_ödex_t
 *
öd
);

230 
mxml_node_t
 *
	`mxmlIndexEnum
(
mxml_ödex_t
 *
öd
);

231 
mxml_node_t
 *
	`mxmlIndexFöd
(
mxml_ödex_t
 *
öd
,

232 c⁄° *
ñemít
,

233 c⁄° *
vÆue
);

234 
	`mxmlIndexGëCou¡
(
mxml_ödex_t
 *
öd
);

235 
mxml_ödex_t
 *
	`mxmlIndexNew
(
mxml_node_t
 *
node
, c⁄° *
ñemít
,

236 c⁄° *
©å
);

237 
mxml_node_t
 *
	`mxmlIndexRe£t
(
mxml_ödex_t
 *
öd
);

238 
mxml_node_t
 *
	`mxmlLﬂdFd
(mxml_node_à*
t›
, 
fd
,

239 
	`mxml_ty≥_t
 (*
cb
)(
mxml_node_t
 *));

240 
mxml_node_t
 *
	`mxmlLﬂdFûe
(mxml_node_à*
t›
, 
FILE
 *
Â
,

241 
	`mxml_ty≥_t
 (*
cb
)(
mxml_node_t
 *));

242 
mxml_node_t
 *
	`mxmlLﬂdSåög
(mxml_node_à*
t›
, c⁄° *
s
,

243 
	`mxml_ty≥_t
 (*
cb
)(
mxml_node_t
 *));

244 
mxml_node_t
 *
	`mxmlNewCDATA
(mxml_node_à*
∑ª¡
, c⁄° *
°rög
);

245 
mxml_node_t
 *
	`mxmlNewCu°om
(mxml_node_à*
∑ª¡
, *
d©a
,

246 
mxml_cu°om_de°roy_cb_t
 
de°roy
);

247 
mxml_node_t
 *
	`mxmlNewEÀmít
(mxml_node_à*
∑ª¡
, c⁄° *
«me
);

248 
mxml_node_t
 *
	`mxmlNewI¡egî
(mxml_node_à*
∑ª¡
, 
öãgî
);

249 
mxml_node_t
 *
	`mxmlNewO∑que
(mxml_node_à*
∑ª¡
, c⁄° *
›aque
);

250 
mxml_node_t
 *
	`mxmlNewRól
(mxml_node_à*
∑ª¡
, 
ªÆ
);

251 
mxml_node_t
 *
	`mxmlNewText
(mxml_node_à*
∑ª¡
, 
whôe•a˚
,

252 c⁄° *
°rög
);

253 
mxml_node_t
 *
	`mxmlNewTextf
(mxml_node_à*
∑ª¡
, 
whôe•a˚
,

254 c⁄° *
f‹m©
, ...)

255 #ifde‡
__GNUC__


256 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__¥ötf__
, 3, 4)))

259 
mxml_node_t
 *
	`mxmlNewXML
(c⁄° *
vîsi⁄
);

260 
	`mxmlRñó£
(
mxml_node_t
 *
node
);

261 
	`mxmlRemove
(
mxml_node_t
 *
node
);

262 
	`mxmlRëaö
(
mxml_node_t
 *
node
);

263 *
	`mxmlSaveAŒocSåög
(
mxml_node_t
 *
node
,

264 
mxml_ßve_cb_t
 
cb
);

265 
	`mxmlSaveFd
(
mxml_node_t
 *
node
, 
fd
,

266 
mxml_ßve_cb_t
 
cb
);

267 
	`mxmlSaveFûe
(
mxml_node_t
 *
node
, 
FILE
 *
Â
,

268 
mxml_ßve_cb_t
 
cb
);

269 
	`mxmlSaveSåög
(
mxml_node_t
 *
node
, *
buf„r
,

270 
bufsize
, 
mxml_ßve_cb_t
 
cb
);

271 
mxml_node_t
 *
	`mxmlSAXLﬂdFd
(mxml_node_à*
t›
, 
fd
,

272 
	`mxml_ty≥_t
 (*
cb
)(
mxml_node_t
 *),

273 
mxml_ßx_cb_t
 
ßx
, *
ßx_d©a
);

274 
mxml_node_t
 *
	`mxmlSAXLﬂdFûe
(mxml_node_à*
t›
, 
FILE
 *
Â
,

275 
	`mxml_ty≥_t
 (*
cb
)(
mxml_node_t
 *),

276 
mxml_ßx_cb_t
 
ßx
, *
ßx_d©a
);

277 
mxml_node_t
 *
	`mxmlSAXLﬂdSåög
(mxml_node_à*
t›
, c⁄° *
s
,

278 
	`mxml_ty≥_t
 (*
cb
)(
mxml_node_t
 *),

279 
mxml_ßx_cb_t
 
ßx
, *
ßx_d©a
);

280 
	`mxmlSëCDATA
(
mxml_node_t
 *
node
, c⁄° *
d©a
);

281 
	`mxmlSëCu°om
(
mxml_node_t
 *
node
, *
d©a
,

282 
mxml_cu°om_de°roy_cb_t
 
de°roy
);

283 
	`mxmlSëCu°omH™dÀrs
(
mxml_cu°om_lﬂd_cb_t
 
lﬂd
,

284 
mxml_cu°om_ßve_cb_t
 
ßve
);

285 
	`mxmlSëEÀmít
(
mxml_node_t
 *
node
, c⁄° *
«me
);

286 
	`mxmlSëEº‹CÆlback
(
mxml_îr‹_cb_t
 
cb
);

287 
	`mxmlSëI¡egî
(
mxml_node_t
 *
node
, 
öãgî
);

288 
	`mxmlSëO∑que
(
mxml_node_t
 *
node
, c⁄° *
›aque
);

289 
	`mxmlSëRól
(
mxml_node_t
 *
node
, 
ªÆ
);

290 
	`mxmlSëText
(
mxml_node_t
 *
node
, 
whôe•a˚
,

291 c⁄° *
°rög
);

292 
	`mxmlSëTextf
(
mxml_node_t
 *
node
, 
whôe•a˚
,

293 c⁄° *
f‹m©
, ...)

294 #ifde‡
__GNUC__


295 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__¥ötf__
, 3, 4)))

298 
	`mxmlSëU£rD©a
(
mxml_node_t
 *
node
, *
d©a
);

299 
	`mxmlSëWøpM¨gö
(
cﬁumn
);

300 
mxml_node_t
 *
	`mxmlWÆkNext
(mxml_node_à*
node
, mxml_node_à*
t›
,

301 
des˚nd
);

302 
mxml_node_t
 *
	`mxmlWÆkPªv
(mxml_node_à*
node
, mxml_node_à*
t›
,

303 
des˚nd
);

310 
	`mxml_îr‹
(c⁄° *
f‹m©
, ...);

311 
mxml_ty≥_t
 
	`mxml_ign‹e_cb
(
mxml_node_t
 *
node
);

312 
mxml_ty≥_t
 
	`mxml_öãgî_cb
(
mxml_node_t
 *
node
);

313 
mxml_ty≥_t
 
	`mxml_›aque_cb
(
mxml_node_t
 *
node
);

314 
mxml_ty≥_t
 
	`mxml_ªÆ_cb
(
mxml_node_t
 *
node
);

321 #ifde‡
__˝lu•lus


322 
	}
}

	@
1
.
0
20
816
/home/gaojing/123/xml/release-2.7/config.h
/home/gaojing/123/xml/release-2.7/mvalidate.c
/home/gaojing/123/xml/release-2.7/mxml-attr.c
/home/gaojing/123/xml/release-2.7/mxml-entity.c
/home/gaojing/123/xml/release-2.7/mxml-file.c
/home/gaojing/123/xml/release-2.7/mxml-get.c
/home/gaojing/123/xml/release-2.7/mxml-index.c
/home/gaojing/123/xml/release-2.7/mxml-node.c
/home/gaojing/123/xml/release-2.7/mxml-private.c
/home/gaojing/123/xml/release-2.7/mxml-private.h
/home/gaojing/123/xml/release-2.7/mxml-search.c
/home/gaojing/123/xml/release-2.7/mxml-set.c
/home/gaojing/123/xml/release-2.7/mxml-string.c
/home/gaojing/123/xml/release-2.7/mxml.h
/home/gaojing/123/xml/release-2.7/mxmldoc.c
/home/gaojing/123/xml/release-2.7/testmxml.c
/home/gaojing/123/xml/release-2.7/vcnet/config.h
config.h
mxml-private.h
mxml.h
